ARM GAS  /tmp/ccqZ2XVC.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"usbh_mtp.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.MTP_FindCtlEndpoint,"ax",%progbits
  22              		.align	2
  23              		.thumb
  24              		.thumb_func
  26              	MTP_FindCtlEndpoint:
  27              	.LFB125:
  28              		.file 1 "Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c"
   1:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
   2:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   ******************************************************************************
   3:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @file    usbh_mtp.c
   4:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @author  MCD Application Team
   5:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @version V3.2.2
   6:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @date    07-July-2015
   7:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief   This file is the MTP Layer Handlers for USB Host MTP class.
   8:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
   9:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @verbatim
  10:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *      
  11:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *          ===================================================================      
  12:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *                                MTP Class  Description
  13:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *          =================================================================== 
  14:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           This module manages the MTP class following the 
  15:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           "Media Transfer Protocol (MTP) specification Version 1.11 April 6th, 2011".
  16:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           the implmentation is compatible with the PTP model as an extension  
  17:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           of the existing Picture Transfer Protocol defined by the ISO 15740 specification
  18:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *             
  19:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *  @endverbatim
  20:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  21:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   ******************************************************************************
  22:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @attention
  23:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  24:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * <h2><center>&copy; COPYRIGHT 2015 STMicroelectronics</center></h2>
  25:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  26:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  27:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * You may not use this file except in compliance with the License.
  28:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * You may obtain a copy of the License at:
  29:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  30:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *        http://www.st.com/software_license_agreement_liberty_v2
ARM GAS  /tmp/ccqZ2XVC.s 			page 2


  31:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  32:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * Unless required by applicable law or agreed to in writing, software 
  33:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * distributed under the License is distributed on an "AS IS" BASIS, 
  34:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  35:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * See the License for the specific language governing permissions and
  36:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * limitations under the License.
  37:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  38:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   ******************************************************************************
  39:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
  40:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  41:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /* Includes ------------------------------------------------------------------*/
  42:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #include "usbh_mtp.h"
  43:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  44:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @addtogroup USBH_LIB
  45:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  46:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  47:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  48:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @addtogroup USBH_CLASS
  49:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  50:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  51:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  52:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @addtogroup USBH_MTP_CLASS
  53:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  54:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  55:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  56:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE 
  57:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @brief    This file includes MTP Layer Handlers for USB Host MTP class.
  58:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  59:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  60:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  61:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_TypesDefinitions
  62:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  63:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  64:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  65:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  66:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  67:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  68:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  69:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Defines
  70:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  71:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  72:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  73:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  74:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  75:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  76:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  77:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Macros
  78:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  79:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  80:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  81:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  82:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  83:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  84:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  85:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Variables
  86:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  87:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
ARM GAS  /tmp/ccqZ2XVC.s 			page 3


  88:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  89:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  90:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  91:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  92:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  93:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_FunctionPrototypes
  94:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  95:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
  96:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  97:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_InterfaceInit  (USBH_HandleTypeDef *phost);
  98:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  99:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_InterfaceDeInit  (USBH_HandleTypeDef *phost);
 100:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 101:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Process(USBH_HandleTypeDef *phost);
 102:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 103:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_ClassRequest (USBH_HandleTypeDef *phost);
 104:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 105:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindCtlEndpoint(USBH_HandleTypeDef *phost);
 106:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 107:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataOutEndpoint(USBH_HandleTypeDef *phost);
 108:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 109:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataInEndpoint(USBH_HandleTypeDef *phost);
 110:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 111:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_SOFProcess (USBH_HandleTypeDef *phost);
 112:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 113:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Events (USBH_HandleTypeDef *phost);
 114:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 115:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static void MTP_DecodeEvent (USBH_HandleTypeDef *phost) ;
 116:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 117:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_ClassTypeDef  MTP_Class = 
 118:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 119:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   "MTP",
 120:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USB_MTP_CLASS,
 121:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_InterfaceInit,
 122:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_InterfaceDeInit,
 123:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_ClassRequest,
 124:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_Process,
 125:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_SOFProcess,
 126:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   NULL,
 127:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** };
 128:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 129:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
 130:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
 131:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 132:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 133:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Functions
 134:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
 135:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */ 
 136:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 137:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 138:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_InterfaceInit 
 139:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function init the MTP class.
 140:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 141:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 142:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 143:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_InterfaceInit (USBH_HandleTypeDef *phost)
 144:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {	
ARM GAS  /tmp/ccqZ2XVC.s 			page 4


 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_OK ;
 146:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 147:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 148:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle;
 149:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 150:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   interface = USBH_FindInterface(phost, 
 151:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                  USB_MTP_CLASS, 
 152:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                  1, 
 153:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                  1);
 154:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 155:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(interface == 0xFF) /* No Valid Interface */
 156:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 157:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status = USBH_FAIL;  
 158:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_DbgLog ("Cannot Find the interface for Still Image Class.");         
 159:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 160:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   else
 161:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 162:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_SelectInterface (phost, interface);
 163:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 164:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     endpoint = MTP_FindCtlEndpoint(phost);
 165:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 166:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     phost->pActiveClass->pData = (MTP_HandleTypeDef *)USBH_malloc (sizeof(MTP_HandleTypeDef));
 167:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 168:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 169:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if( MTP_Handle == NULL)
 170:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 171:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       status = USBH_FAIL;  
 172:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog ("Cannot allocate RAM for MTP Handle");       
 173:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 174:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 175:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     /*Collect the control endpoint address and length*/
 176:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationEp = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpo
 177:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationEpSize  = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].w
 178:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationPipe = USBH_AllocPipe(phost, MTP_Handle->NotificationEp);
 179:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->events.poll = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bInterval
 180:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 181:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     /* Open pipe for Notification endpoint */
 182:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_OpenPipe  (phost,
 183:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->NotificationPipe,
 184:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->NotificationEp,                            
 185:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     phost->device.address,
 186:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     phost->device.speed,
 187:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     USB_EP_TYPE_INTR,
 188:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->NotificationEpSize); 
 189:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 190:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_LL_SetToggle (phost, MTP_Handle->NotificationPipe, 0);    
 191:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 192:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 193:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     endpoint = MTP_FindDataInEndpoint(phost);
 194:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 195:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     /*Collect the control endpoint address and length*/
 196:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInEp = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAdd
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInEpSize  = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPac
 198:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInPipe = USBH_AllocPipe(phost, MTP_Handle->DataInEp);
 199:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 200:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     /* Open pipe for DATA IN endpoint */
 201:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_OpenPipe  (phost,
ARM GAS  /tmp/ccqZ2XVC.s 			page 5


 202:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataInPipe,
 203:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataInEp,                            
 204:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     phost->device.address,
 205:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     phost->device.speed,
 206:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     USB_EP_TYPE_BULK,
 207:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataInEpSize); 
 208:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 209:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_LL_SetToggle (phost, MTP_Handle->DataInPipe, 0);  
 210:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 211:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     endpoint = MTP_FindDataOutEndpoint(phost);
 212:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 213:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     /*Collect the DATA OUT endpoint address and length*/
 214:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutEp = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAd
 215:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutEpSize  = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPa
 216:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutPipe = USBH_AllocPipe(phost, MTP_Handle->DataOutEp);
 217:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 218:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     /* Open pipe for DATA OUT endpoint */
 219:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_OpenPipe  (phost,
 220:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataOutPipe,
 221:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataOutEp,                            
 222:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     phost->device.address,
 223:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     phost->device.speed,
 224:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     USB_EP_TYPE_BULK,
 225:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataOutEpSize); 
 226:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 227:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_LL_SetToggle (phost, MTP_Handle->DataOutPipe, 0); 
 228:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 229:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 230:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->state = MTP_OPENSESSION;
 231:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->is_ready = 0;
 232:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->events.state = MTP_EVENTS_INIT;
 233:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_PTP_Init(phost);
 234:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 235:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 236:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 237:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 238:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 239:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 240:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  Find MTP Ctl interface
 241:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 242:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 243:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 244:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindCtlEndpoint(USBH_HandleTypeDef *phost)
 245:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
  29              		.loc 1 245 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              	.LVL0:
  35 0000 70B4     		push	{r4, r5, r6}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 12
  38              		.cfi_offset 4, -12
  39              		.cfi_offset 5, -8
  40              		.cfi_offset 6, -4
  41              	.LVL1:
ARM GAS  /tmp/ccqZ2XVC.s 			page 6


 246:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 247:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   for (interface = 0;  interface < USBH_MAX_NUM_INTERFACES ; interface ++ )
  42              		.loc 1 248 0
  43 0002 0024     		movs	r4, #0
  44 0004 30E0     		b	.L2
  45              	.LVL2:
  46              	.L8:
 249:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 250:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(phost->device.CfgDesc.Itf_Desc[interface].bInterfaceClass == USB_MTP_CLASS)
  47              		.loc 1 250 0
  48 0006 2546     		mov	r5, r4
  49 0008 3223     		movs	r3, #50
  50 000a 03FB0403 		mla	r3, r3, r4, r0
  51 000e 93F84133 		ldrb	r3, [r3, #833]	@ zero_extendqisi2
  52 0012 062B     		cmp	r3, #6
  53 0014 26D1     		bne	.L4
  54 0016 22E0     		b	.L9
  55              	.LVL3:
  56              	.L7:
 251:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {    
 252:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       for (endpoint = 0;  endpoint < USBH_MAX_NUM_ENDPOINTS ; endpoint ++ )
 253:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 254:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         if((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddress & 0x80)&&
  57              		.loc 1 254 0
  58 0018 0E46     		mov	r6, r1
  59 001a 4B1C     		adds	r3, r1, #1
  60 001c 3222     		movs	r2, #50
  61 001e 02FB05F2 		mul	r2, r2, r5
  62 0022 02EBC303 		add	r3, r2, r3, lsl #3
  63 0026 0344     		add	r3, r3, r0
  64 0028 93F94033 		ldrsb	r3, [r3, #832]
  65 002c 002B     		cmp	r3, #0
  66 002e 13DA     		bge	.L5
 255:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
  67              		.loc 1 255 0 discriminator 1
  68 0030 4B1C     		adds	r3, r1, #1
  69 0032 3222     		movs	r2, #50
  70 0034 02FB05F2 		mul	r2, r2, r5
  71 0038 02EBC303 		add	r3, r2, r3, lsl #3
  72 003c 0344     		add	r3, r3, r0
  73 003e B3F84233 		ldrh	r3, [r3, #834]
 254:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
  74              		.loc 1 254 0 discriminator 1
  75 0042 4BB1     		cbz	r3, .L5
 256:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****              ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bmAttributes & USBH_EP_I
  76              		.loc 1 256 0
  77 0044 0136     		adds	r6, r6, #1
  78 0046 02EBC606 		add	r6, r2, r6, lsl #3
  79 004a 0644     		add	r6, r6, r0
  80 004c 96F84133 		ldrb	r3, [r6, #833]	@ zero_extendqisi2
 255:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
  81              		.loc 1 255 0
  82 0050 03F00303 		and	r3, r3, #3
  83 0054 032B     		cmp	r3, #3
  84 0056 0BD0     		beq	.L10
  85              	.L5:
ARM GAS  /tmp/ccqZ2XVC.s 			page 7


 252:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
  86              		.loc 1 252 0 discriminator 2
  87 0058 0131     		adds	r1, r1, #1
  88              	.LVL4:
  89 005a C9B2     		uxtb	r1, r1
  90              	.LVL5:
  91 005c 00E0     		b	.L3
  92              	.LVL6:
  93              	.L9:
  94 005e 0021     		movs	r1, #0
  95              	.L3:
  96              	.LVL7:
 252:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
  97              		.loc 1 252 0 is_stmt 0 discriminator 1
  98 0060 0429     		cmp	r1, #4
  99 0062 D9D9     		bls	.L7
 100              	.LVL8:
 101              	.L4:
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 102              		.loc 1 248 0 is_stmt 1 discriminator 2
 103 0064 0134     		adds	r4, r4, #1
 104              	.LVL9:
 105 0066 E4B2     		uxtb	r4, r4
 106              	.LVL10:
 107              	.L2:
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 108              		.loc 1 248 0 is_stmt 0 discriminator 1
 109 0068 092C     		cmp	r4, #9
 110 006a CCD9     		bls	.L8
 257:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 258:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           return endpoint;
 259:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 260:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 261:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 262:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 263:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 264:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return 0xFF; /* Invalid Endpoint */
 111              		.loc 1 264 0 is_stmt 1
 112 006c FF20     		movs	r0, #255
 113              	.LVL11:
 114 006e 00E0     		b	.L6
 115              	.LVL12:
 116              	.L10:
 258:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 117              		.loc 1 258 0
 118 0070 0846     		mov	r0, r1
 119              	.LVL13:
 120              	.L6:
 265:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 121              		.loc 1 265 0
 122 0072 70BC     		pop	{r4, r5, r6}
 123              	.LCFI1:
 124              		.cfi_restore 6
 125              		.cfi_restore 5
 126              		.cfi_restore 4
 127              		.cfi_def_cfa_offset 0
 128              	.LVL14:
ARM GAS  /tmp/ccqZ2XVC.s 			page 8


 129 0074 7047     		bx	lr
 130              		.cfi_endproc
 131              	.LFE125:
 133 0076 00BF     		.section	.text.MTP_FindDataOutEndpoint,"ax",%progbits
 134              		.align	2
 135              		.thumb
 136              		.thumb_func
 138              	MTP_FindDataOutEndpoint:
 139              	.LFB126:
 266:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 267:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 268:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 269:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  Find MTP DATA OUT interface
 270:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 271:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 272:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 273:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataOutEndpoint(USBH_HandleTypeDef *phost)
 274:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 140              		.loc 1 274 0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 0
 143              		@ frame_needed = 0, uses_anonymous_args = 0
 144              		@ link register save eliminated.
 145              	.LVL15:
 146 0000 70B4     		push	{r4, r5, r6}
 147              	.LCFI2:
 148              		.cfi_def_cfa_offset 12
 149              		.cfi_offset 4, -12
 150              		.cfi_offset 5, -8
 151              		.cfi_offset 6, -4
 152              	.LVL16:
 275:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 276:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 277:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   for (interface = 0;  interface < USBH_MAX_NUM_INTERFACES ; interface ++ )
 153              		.loc 1 277 0
 154 0002 0024     		movs	r4, #0
 155 0004 2FE0     		b	.L13
 156              	.LVL17:
 157              	.L19:
 278:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 279:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(phost->device.CfgDesc.Itf_Desc[interface].bInterfaceClass == USB_MTP_CLASS)
 158              		.loc 1 279 0
 159 0006 2546     		mov	r5, r4
 160 0008 3223     		movs	r3, #50
 161 000a 03FB0403 		mla	r3, r3, r4, r0
 162 000e 93F84133 		ldrb	r3, [r3, #833]	@ zero_extendqisi2
 163 0012 062B     		cmp	r3, #6
 164 0014 25D1     		bne	.L15
 165 0016 21E0     		b	.L20
 166              	.LVL18:
 167              	.L18:
 280:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {    
 281:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       for (endpoint = 0;  endpoint < USBH_MAX_NUM_ENDPOINTS ; endpoint ++ )
 282:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 283:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 284:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         if(((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddress & 0x80) =
 168              		.loc 1 284 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 9


 169 0018 1E46     		mov	r6, r3
 170 001a 5A1C     		adds	r2, r3, #1
 171 001c 3221     		movs	r1, #50
 172 001e 01FB05F1 		mul	r1, r1, r5
 173 0022 01EBC202 		add	r2, r1, r2, lsl #3
 174 0026 0244     		add	r2, r2, r0
 175 0028 92F94023 		ldrsb	r2, [r2, #832]
 176 002c 002A     		cmp	r2, #0
 177 002e 12DB     		blt	.L16
 285:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
 178              		.loc 1 285 0 discriminator 1
 179 0030 5A1C     		adds	r2, r3, #1
 180 0032 3221     		movs	r1, #50
 181 0034 01FB05F1 		mul	r1, r1, r5
 182 0038 01EBC202 		add	r2, r1, r2, lsl #3
 183 003c 0244     		add	r2, r2, r0
 184 003e B2F84223 		ldrh	r2, [r2, #834]
 284:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
 185              		.loc 1 284 0 discriminator 1
 186 0042 42B1     		cbz	r2, .L16
 286:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****              ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bmAttributes & USBH_EP_B
 187              		.loc 1 286 0
 188 0044 0136     		adds	r6, r6, #1
 189 0046 01EBC606 		add	r6, r1, r6, lsl #3
 190 004a 0644     		add	r6, r6, r0
 191 004c 96F84123 		ldrb	r2, [r6, #833]	@ zero_extendqisi2
 285:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
 192              		.loc 1 285 0
 193 0050 12F0020F 		tst	r2, #2
 194 0054 0BD1     		bne	.L21
 195              	.L16:
 281:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 196              		.loc 1 281 0 discriminator 2
 197 0056 0133     		adds	r3, r3, #1
 198              	.LVL19:
 199 0058 DBB2     		uxtb	r3, r3
 200              	.LVL20:
 201 005a 00E0     		b	.L14
 202              	.LVL21:
 203              	.L20:
 204 005c 0023     		movs	r3, #0
 205              	.L14:
 206              	.LVL22:
 281:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 207              		.loc 1 281 0 is_stmt 0 discriminator 1
 208 005e 042B     		cmp	r3, #4
 209 0060 DAD9     		bls	.L18
 210              	.LVL23:
 211              	.L15:
 277:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 212              		.loc 1 277 0 is_stmt 1 discriminator 2
 213 0062 0134     		adds	r4, r4, #1
 214              	.LVL24:
 215 0064 E4B2     		uxtb	r4, r4
 216              	.LVL25:
 217              	.L13:
 277:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
ARM GAS  /tmp/ccqZ2XVC.s 			page 10


 218              		.loc 1 277 0 is_stmt 0 discriminator 1
 219 0066 092C     		cmp	r4, #9
 220 0068 CDD9     		bls	.L19
 287:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 288:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           return endpoint;
 289:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 290:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 291:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 292:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 293:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 294:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return 0xFF; /* Invalid Endpoint */
 221              		.loc 1 294 0 is_stmt 1
 222 006a FF20     		movs	r0, #255
 223              	.LVL26:
 224 006c 00E0     		b	.L17
 225              	.LVL27:
 226              	.L21:
 288:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 227              		.loc 1 288 0
 228 006e 1846     		mov	r0, r3
 229              	.LVL28:
 230              	.L17:
 295:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 231              		.loc 1 295 0
 232 0070 70BC     		pop	{r4, r5, r6}
 233              	.LCFI3:
 234              		.cfi_restore 6
 235              		.cfi_restore 5
 236              		.cfi_restore 4
 237              		.cfi_def_cfa_offset 0
 238              	.LVL29:
 239 0072 7047     		bx	lr
 240              		.cfi_endproc
 241              	.LFE126:
 243              		.section	.text.MTP_FindDataInEndpoint,"ax",%progbits
 244              		.align	2
 245              		.thumb
 246              		.thumb_func
 248              	MTP_FindDataInEndpoint:
 249              	.LFB127:
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 297:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 298:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  Find MTP DATA IN interface
 299:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 300:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 301:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 302:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataInEndpoint(USBH_HandleTypeDef *phost)
 303:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 250              		.loc 1 303 0
 251              		.cfi_startproc
 252              		@ args = 0, pretend = 0, frame = 0
 253              		@ frame_needed = 0, uses_anonymous_args = 0
 254              		@ link register save eliminated.
 255              	.LVL30:
 256 0000 70B4     		push	{r4, r5, r6}
 257              	.LCFI4:
 258              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccqZ2XVC.s 			page 11


 259              		.cfi_offset 4, -12
 260              		.cfi_offset 5, -8
 261              		.cfi_offset 6, -4
 262              	.LVL31:
 304:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 305:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   for (interface = 0;  interface < USBH_MAX_NUM_INTERFACES ; interface ++ )
 263              		.loc 1 306 0
 264 0002 0024     		movs	r4, #0
 265 0004 2FE0     		b	.L24
 266              	.LVL32:
 267              	.L30:
 307:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 308:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(phost->device.CfgDesc.Itf_Desc[interface].bInterfaceClass == USB_MTP_CLASS)
 268              		.loc 1 308 0
 269 0006 2546     		mov	r5, r4
 270 0008 3223     		movs	r3, #50
 271 000a 03FB0403 		mla	r3, r3, r4, r0
 272 000e 93F84133 		ldrb	r3, [r3, #833]	@ zero_extendqisi2
 273 0012 062B     		cmp	r3, #6
 274 0014 25D1     		bne	.L26
 275 0016 21E0     		b	.L31
 276              	.LVL33:
 277              	.L29:
 309:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {    
 310:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       for (endpoint = 0;  endpoint < USBH_MAX_NUM_ENDPOINTS ; endpoint ++ )
 311:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 312:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         
 313:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         if((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddress & 0x80)&&
 278              		.loc 1 313 0
 279 0018 0E46     		mov	r6, r1
 280 001a 4B1C     		adds	r3, r1, #1
 281 001c 3222     		movs	r2, #50
 282 001e 02FB05F2 		mul	r2, r2, r5
 283 0022 02EBC303 		add	r3, r2, r3, lsl #3
 284 0026 0344     		add	r3, r3, r0
 285 0028 93F94033 		ldrsb	r3, [r3, #832]
 286 002c 002B     		cmp	r3, #0
 287 002e 12DA     		bge	.L27
 314:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
 288              		.loc 1 314 0 discriminator 1
 289 0030 4B1C     		adds	r3, r1, #1
 290 0032 3222     		movs	r2, #50
 291 0034 02FB05F2 		mul	r2, r2, r5
 292 0038 02EBC303 		add	r3, r2, r3, lsl #3
 293 003c 0344     		add	r3, r3, r0
 294 003e B3F84233 		ldrh	r3, [r3, #834]
 313:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
 295              		.loc 1 313 0 discriminator 1
 296 0042 43B1     		cbz	r3, .L27
 315:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****              ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bmAttributes & USBH_EP_B
 297              		.loc 1 315 0
 298 0044 0136     		adds	r6, r6, #1
 299 0046 02EBC606 		add	r6, r2, r6, lsl #3
 300 004a 0644     		add	r6, r6, r0
 301 004c 96F84133 		ldrb	r3, [r6, #833]	@ zero_extendqisi2
 314:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****            (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0)&&
ARM GAS  /tmp/ccqZ2XVC.s 			page 12


 302              		.loc 1 314 0
 303 0050 13F0020F 		tst	r3, #2
 304 0054 0BD1     		bne	.L32
 305              	.L27:
 310:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 306              		.loc 1 310 0 discriminator 2
 307 0056 0131     		adds	r1, r1, #1
 308              	.LVL34:
 309 0058 C9B2     		uxtb	r1, r1
 310              	.LVL35:
 311 005a 00E0     		b	.L25
 312              	.LVL36:
 313              	.L31:
 314 005c 0021     		movs	r1, #0
 315              	.L25:
 316              	.LVL37:
 310:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 317              		.loc 1 310 0 is_stmt 0 discriminator 1
 318 005e 0429     		cmp	r1, #4
 319 0060 DAD9     		bls	.L29
 320              	.LVL38:
 321              	.L26:
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 322              		.loc 1 306 0 is_stmt 1 discriminator 2
 323 0062 0134     		adds	r4, r4, #1
 324              	.LVL39:
 325 0064 E4B2     		uxtb	r4, r4
 326              	.LVL40:
 327              	.L24:
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 328              		.loc 1 306 0 is_stmt 0 discriminator 1
 329 0066 092C     		cmp	r4, #9
 330 0068 CDD9     		bls	.L30
 316:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           return endpoint;
 318:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 319:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 320:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 321:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 322:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 323:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return 0xFF; /* Invalid Endpoint */
 331              		.loc 1 323 0 is_stmt 1
 332 006a FF20     		movs	r0, #255
 333              	.LVL41:
 334 006c 00E0     		b	.L28
 335              	.LVL42:
 336              	.L32:
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 337              		.loc 1 317 0
 338 006e 0846     		mov	r0, r1
 339              	.LVL43:
 340              	.L28:
 324:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 341              		.loc 1 324 0
 342 0070 70BC     		pop	{r4, r5, r6}
 343              	.LCFI5:
 344              		.cfi_restore 6
ARM GAS  /tmp/ccqZ2XVC.s 			page 13


 345              		.cfi_restore 5
 346              		.cfi_restore 4
 347              		.cfi_def_cfa_offset 0
 348              	.LVL44:
 349 0072 7047     		bx	lr
 350              		.cfi_endproc
 351              	.LFE127:
 353              		.section	.text.USBH_MTP_ClassRequest,"ax",%progbits
 354              		.align	2
 355              		.thumb
 356              		.thumb_func
 358              	USBH_MTP_ClassRequest:
 359              	.LFB129:
 325:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 326:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 327:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 328:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_InterfaceDeInit 
 329:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function DeInit the Pipes used for the MTP class.
 330:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 331:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 332:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 333:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_InterfaceDeInit (USBH_HandleTypeDef *phost)
 334:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 335:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 336:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 337:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->DataOutPipe)
 338:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 339:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_ClosePipe(phost, MTP_Handle->DataOutPipe);
 340:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe  (phost, MTP_Handle->DataOutPipe);
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutPipe = 0;     /* Reset the Channel as Free */
 342:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 343:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 344:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->DataInPipe)
 345:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 346:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_ClosePipe(phost, MTP_Handle->DataInPipe);
 347:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe  (phost, MTP_Handle->DataInPipe);
 348:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInPipe = 0;     /* Reset the Channel as Free */
 349:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   } 
 350:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 351:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->NotificationPipe)
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 353:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_ClosePipe(phost, MTP_Handle->NotificationPipe);
 354:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe  (phost, MTP_Handle->NotificationPipe);
 355:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationPipe = 0;     /* Reset the Channel as Free */
 356:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   } 
 357:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 358:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(phost->pActiveClass->pData)
 359:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 360:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_free (phost->pActiveClass->pData);
 361:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     phost->pActiveClass->pData = 0;
 362:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 363:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_OK;
 364:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 365:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 366:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 367:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_ClassRequest 
 368:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function is responsible for handling Standard requests
ARM GAS  /tmp/ccqZ2XVC.s 			page 14


 369:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         for MTP class.
 370:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 371:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 372:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 373:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_ClassRequest (USBH_HandleTypeDef *phost)
 374:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {  
 360              		.loc 1 374 0
 361              		.cfi_startproc
 362              		@ args = 0, pretend = 0, frame = 0
 363              		@ frame_needed = 0, uses_anonymous_args = 0
 364              		@ link register save eliminated.
 365              	.LVL45:
 375:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 376:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 377:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif    
 378:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_OK;;
 379:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 366              		.loc 1 379 0
 367 0000 0020     		movs	r0, #0
 368              	.LVL46:
 369 0002 7047     		bx	lr
 370              		.cfi_endproc
 371              	.LFE129:
 373              		.section	.text.USBH_MTP_SOFProcess,"ax",%progbits
 374              		.align	2
 375              		.thumb
 376              		.thumb_func
 378              	USBH_MTP_SOFProcess:
 379              	.LFB131:
 380:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 381:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 382:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 383:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_Process 
 384:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function is for managing state machine for MTP data transfers 
 385:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 386:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 387:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 388:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Process (USBH_HandleTypeDef *phost)
 389:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 390:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 391:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 392:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t idx = 0;
 393:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 394:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   switch(MTP_Handle->state)
 395:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 396:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   case  MTP_OPENSESSION:
 397:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 398:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status = USBH_PTP_OpenSession (phost, 1); /* Session '0' is not valid */
 399:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(status == USBH_OK)
 401:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 402:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_UsrLog("MTP Session #0 Opened");
 403:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_Handle->state = MTP_GETDEVICEINFO; 
 404:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 405:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 406:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif      
 407:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
ARM GAS  /tmp/ccqZ2XVC.s 			page 15


 408:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 409:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 410:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   case MTP_GETDEVICEINFO:
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status = USBH_PTP_GetDeviceInfo (phost, &(MTP_Handle->info.devinfo));
 412:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 413:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(status == USBH_OK)
 414:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 415:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog(">>>>> MTP Device Information");
 416:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Standard version : %x", MTP_Handle->info.devinfo.StandardVersion);
 417:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Vendor ExtID : %s", (MTP_Handle->info.devinfo.VendorExtensionID == 6)?"MTP": "NO
 418:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Functional mode : %s", (MTP_Handle->info.devinfo.FunctionalMode == 0) ? "Standar
 419:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Number of Supported Operation(s) : %d", MTP_Handle->info.devinfo.OperationsSuppo
 420:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Number of Supported Events(s) : %d", MTP_Handle->info.devinfo.EventsSupported_le
 421:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Number of Supported Proprieties : %d", MTP_Handle->info.devinfo.DeviceProperties
 422:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Manufacturer : %s", MTP_Handle->info.devinfo.Manufacturer);
 423:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Model : %s", MTP_Handle->info.devinfo.Model);       
 424:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Device version : %s", MTP_Handle->info.devinfo.DeviceVersion); 
 425:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Serial number : %s", MTP_Handle->info.devinfo.SerialNumber); 
 426:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 427:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_Handle->state = MTP_GETSTORAGEIDS; 
 428:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 429:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 430:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif      
 431:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 432:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 433:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 434:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   case MTP_GETSTORAGEIDS:
 435:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status = USBH_PTP_GetStorageIds (phost, &(MTP_Handle->info.storids));
 436:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 437:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(status == USBH_OK)
 438:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 439:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Number of storage ID items : %d", MTP_Handle->info.storids.n);
 440:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       for (idx  = 0; idx < MTP_Handle->info.storids.n; idx ++)
 441:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 442:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("storage#%d ID : %x", idx, MTP_Handle->info.storids.Storage[idx]);
 443:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 444:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 445:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_Handle->current_storage_unit = 0;
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_Handle->state = MTP_GETSTORAGEINFO;
 447:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 448:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 449:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif      
 450:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 451:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 452:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 453:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   case MTP_GETSTORAGEINFO:
 454:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status = USBH_PTP_GetStorageInfo (phost, 
 455:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                       MTP_Handle->info.storids.Storage[MTP_Handle->current_storage_
 456:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                       &((MTP_Handle->info.storinfo)[MTP_Handle->current_storage_uni
 457:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 458:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(status == USBH_OK)
 459:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 460:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_UsrLog("Volume#%lu: %s   [%s]", MTP_Handle->current_storage_unit,
 461:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                   MTP_Handle->info.storinfo[MTP_Handle->current_storage_unit].StorageDescription,
 462:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                   MTP_Handle->info.storinfo[MTP_Handle->current_storage_unit].VolumeLabel);
 463:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(++MTP_Handle->current_storage_unit >= MTP_Handle->info.storids.n)
 464:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
ARM GAS  /tmp/ccqZ2XVC.s 			page 16


 465:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->state = MTP_IDLE;
 466:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->is_ready = 1;
 467:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->current_storage_unit = 0;
 468:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->params.CurrentStorageId = MTP_Handle->info.storids.Storage[0];
 469:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         
 470:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_UsrLog( "MTP Class initialized.");
 471:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_UsrLog("%s is default storage unit", MTP_Handle->info.storinfo[0].StorageDescription);
 472:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         phost->pUser(phost, HOST_USER_CLASS_ACTIVE);    
 473:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 474:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 475:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 476:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif        
 477:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 478:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 479:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 480:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   case  MTP_IDLE:
 481:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_MTP_Events(phost);
 482:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 483:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     osDelay(10);
 484:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 485:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif   
 486:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   default:
 487:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status = USBH_OK;
 488:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 489:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 491:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 492:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 493:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 494:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_SOFProcess 
 495:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function is for managing SOF callback 
 496:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 497:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 498:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 499:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_SOFProcess (USBH_HandleTypeDef *phost)
 500:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 380              		.loc 1 500 0
 381              		.cfi_startproc
 382              		@ args = 0, pretend = 0, frame = 0
 383              		@ frame_needed = 0, uses_anonymous_args = 0
 384              		@ link register save eliminated.
 385              	.LVL47:
 501:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_OK;
 502:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 503:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 504:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 386              		.loc 1 504 0
 387 0000 0020     		movs	r0, #0
 388              	.LVL48:
 389 0002 7047     		bx	lr
 390              		.cfi_endproc
 391              	.LFE131:
 393              		.section	.text.USBH_MTP_InterfaceDeInit,"ax",%progbits
 394              		.align	2
 395              		.thumb
 396              		.thumb_func
 398              	USBH_MTP_InterfaceDeInit:
ARM GAS  /tmp/ccqZ2XVC.s 			page 17


 399              	.LFB128:
 334:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 400              		.loc 1 334 0
 401              		.cfi_startproc
 402              		@ args = 0, pretend = 0, frame = 0
 403              		@ frame_needed = 0, uses_anonymous_args = 0
 404              	.LVL49:
 405 0000 70B5     		push	{r4, r5, r6, lr}
 406              	.LCFI6:
 407              		.cfi_def_cfa_offset 16
 408              		.cfi_offset 4, -16
 409              		.cfi_offset 5, -12
 410              		.cfi_offset 6, -8
 411              		.cfi_offset 14, -4
 412 0002 0546     		mov	r5, r0
 335:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 413              		.loc 1 335 0
 414 0004 D0F84435 		ldr	r3, [r0, #1348]
 415 0008 DC69     		ldr	r4, [r3, #28]
 416              	.LVL50:
 337:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 417              		.loc 1 337 0
 418 000a 41F62D53 		movw	r3, #7469
 419 000e E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 420 0010 49B1     		cbz	r1, .L37
 339:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe  (phost, MTP_Handle->DataOutPipe);
 421              		.loc 1 339 0
 422 0012 FFF7FEFF 		bl	USBH_ClosePipe
 423              	.LVL51:
 340:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutPipe = 0;     /* Reset the Channel as Free */
 424              		.loc 1 340 0
 425 0016 41F62D56 		movw	r6, #7469
 426 001a A15D     		ldrb	r1, [r4, r6]	@ zero_extendqisi2
 427 001c 2846     		mov	r0, r5
 428 001e FFF7FEFF 		bl	USBH_FreePipe
 429              	.LVL52:
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 430              		.loc 1 341 0
 431 0022 0023     		movs	r3, #0
 432 0024 A355     		strb	r3, [r4, r6]
 433              	.L37:
 344:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 434              		.loc 1 344 0
 435 0026 41F62C53 		movw	r3, #7468
 436 002a E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 437 002c 51B1     		cbz	r1, .L38
 346:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe  (phost, MTP_Handle->DataInPipe);
 438              		.loc 1 346 0
 439 002e 2846     		mov	r0, r5
 440 0030 FFF7FEFF 		bl	USBH_ClosePipe
 441              	.LVL53:
 347:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInPipe = 0;     /* Reset the Channel as Free */
 442              		.loc 1 347 0
 443 0034 41F62C56 		movw	r6, #7468
 444 0038 A15D     		ldrb	r1, [r4, r6]	@ zero_extendqisi2
 445 003a 2846     		mov	r0, r5
 446 003c FFF7FEFF 		bl	USBH_FreePipe
ARM GAS  /tmp/ccqZ2XVC.s 			page 18


 447              	.LVL54:
 348:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   } 
 448              		.loc 1 348 0
 449 0040 0023     		movs	r3, #0
 450 0042 A355     		strb	r3, [r4, r6]
 451              	.L38:
 351:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 452              		.loc 1 351 0
 453 0044 41F62E53 		movw	r3, #7470
 454 0048 E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 455 004a 51B1     		cbz	r1, .L39
 353:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe  (phost, MTP_Handle->NotificationPipe);
 456              		.loc 1 353 0
 457 004c 2846     		mov	r0, r5
 458 004e FFF7FEFF 		bl	USBH_ClosePipe
 459              	.LVL55:
 354:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationPipe = 0;     /* Reset the Channel as Free */
 460              		.loc 1 354 0
 461 0052 41F62E56 		movw	r6, #7470
 462 0056 A15D     		ldrb	r1, [r4, r6]	@ zero_extendqisi2
 463 0058 2846     		mov	r0, r5
 464 005a FFF7FEFF 		bl	USBH_FreePipe
 465              	.LVL56:
 355:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   } 
 466              		.loc 1 355 0
 467 005e 0023     		movs	r3, #0
 468 0060 A355     		strb	r3, [r4, r6]
 469              	.L39:
 358:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 470              		.loc 1 358 0
 471 0062 D5F84435 		ldr	r3, [r5, #1348]
 472 0066 D869     		ldr	r0, [r3, #28]
 473 0068 28B1     		cbz	r0, .L40
 360:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     phost->pActiveClass->pData = 0;
 474              		.loc 1 360 0
 475 006a FFF7FEFF 		bl	free
 476              	.LVL57:
 361:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 477              		.loc 1 361 0
 478 006e D5F84435 		ldr	r3, [r5, #1348]
 479 0072 0022     		movs	r2, #0
 480 0074 DA61     		str	r2, [r3, #28]
 481              	.L40:
 364:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 482              		.loc 1 364 0
 483 0076 0020     		movs	r0, #0
 484 0078 70BD     		pop	{r4, r5, r6, pc}
 485              		.cfi_endproc
 486              	.LFE128:
 488 007a 00BF     		.section	.text.USBH_MTP_InterfaceInit,"ax",%progbits
 489              		.align	2
 490              		.thumb
 491              		.thumb_func
 493              	USBH_MTP_InterfaceInit:
 494              	.LFB124:
 144:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_OK ;
 495              		.loc 1 144 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 19


 496              		.cfi_startproc
 497              		@ args = 0, pretend = 0, frame = 0
 498              		@ frame_needed = 0, uses_anonymous_args = 0
 499              	.LVL58:
 500 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 501              	.LCFI7:
 502              		.cfi_def_cfa_offset 32
 503              		.cfi_offset 4, -32
 504              		.cfi_offset 5, -28
 505              		.cfi_offset 6, -24
 506              		.cfi_offset 7, -20
 507              		.cfi_offset 8, -16
 508              		.cfi_offset 9, -12
 509              		.cfi_offset 10, -8
 510              		.cfi_offset 14, -4
 511 0004 84B0     		sub	sp, sp, #16
 512              	.LCFI8:
 513              		.cfi_def_cfa_offset 48
 514 0006 0446     		mov	r4, r0
 515              	.LVL59:
 150:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                  USB_MTP_CLASS, 
 516              		.loc 1 150 0
 517 0008 0123     		movs	r3, #1
 518 000a 1A46     		mov	r2, r3
 519 000c 0621     		movs	r1, #6
 520 000e FFF7FEFF 		bl	USBH_FindInterface
 521              	.LVL60:
 155:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 522              		.loc 1 155 0
 523 0012 FF28     		cmp	r0, #255
 524 0014 00F0B180 		beq	.L44
 525 0018 0646     		mov	r6, r0
 162:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 526              		.loc 1 162 0
 527 001a 0146     		mov	r1, r0
 528 001c 2046     		mov	r0, r4
 529              	.LVL61:
 530 001e FFF7FEFF 		bl	USBH_SelectInterface
 531              	.LVL62:
 164:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 532              		.loc 1 164 0
 533 0022 2046     		mov	r0, r4
 534 0024 FFF7FEFF 		bl	MTP_FindCtlEndpoint
 535              	.LVL63:
 536 0028 0746     		mov	r7, r0
 537              	.LVL64:
 166:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 538              		.loc 1 166 0
 539 002a D4F84455 		ldr	r5, [r4, #1348]
 540 002e 42F2D010 		movw	r0, #8656
 541 0032 FFF7FEFF 		bl	malloc
 542              	.LVL65:
 543 0036 E861     		str	r0, [r5, #28]
 167:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 544              		.loc 1 167 0
 545 0038 D4F84435 		ldr	r3, [r4, #1348]
 546 003c DD69     		ldr	r5, [r3, #28]
ARM GAS  /tmp/ccqZ2XVC.s 			page 20


 547              	.LVL66:
 176:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationEpSize  = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].w
 548              		.loc 1 176 0
 549 003e 0137     		adds	r7, r7, #1
 550              	.LVL67:
 551 0040 3220     		movs	r0, #50
 552 0042 00FB06F6 		mul	r6, r0, r6
 553 0046 06EBC707 		add	r7, r6, r7, lsl #3
 554 004a 2744     		add	r7, r7, r4
 555 004c 97F84013 		ldrb	r1, [r7, #832]	@ zero_extendqisi2
 556 0050 41F6315A 		movw	r10, #7473
 557 0054 05F80A10 		strb	r1, [r5, r10]
 177:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationPipe = USBH_AllocPipe(phost, MTP_Handle->NotificationEp);
 558              		.loc 1 177 0
 559 0058 B7F84233 		ldrh	r3, [r7, #834]
 560 005c 41F63659 		movw	r9, #7478
 561 0060 25F80930 		strh	r3, [r5, r9]	@ movhi
 178:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->events.poll = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bInterval
 562              		.loc 1 178 0
 563 0064 2046     		mov	r0, r4
 564 0066 FFF7FEFF 		bl	USBH_AllocPipe
 565              	.LVL68:
 566 006a 0146     		mov	r1, r0
 567 006c 41F62E58 		movw	r8, #7470
 568 0070 05F80800 		strb	r0, [r5, r8]
 179:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 569              		.loc 1 179 0
 570 0074 97F84423 		ldrb	r2, [r7, #836]	@ zero_extendqisi2
 571 0078 41F64453 		movw	r3, #7492
 572 007c EA52     		strh	r2, [r5, r3]	@ movhi
 182:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->NotificationPipe,
 573              		.loc 1 182 0
 574 007e 94F81C33 		ldrb	r3, [r4, #796]	@ zero_extendqisi2
 575 0082 15F80A20 		ldrb	r2, [r5, r10]	@ zero_extendqisi2
 576 0086 35F80900 		ldrh	r0, [r5, r9]
 577 008a 0290     		str	r0, [sp, #8]
 578 008c 0320     		movs	r0, #3
 579 008e 0190     		str	r0, [sp, #4]
 580 0090 94F81D03 		ldrb	r0, [r4, #797]	@ zero_extendqisi2
 581 0094 0090     		str	r0, [sp]
 582 0096 2046     		mov	r0, r4
 583 0098 FFF7FEFF 		bl	USBH_OpenPipe
 584              	.LVL69:
 190:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 585              		.loc 1 190 0
 586 009c 0022     		movs	r2, #0
 587 009e 15F80810 		ldrb	r1, [r5, r8]	@ zero_extendqisi2
 588 00a2 2046     		mov	r0, r4
 589 00a4 FFF7FEFF 		bl	USBH_LL_SetToggle
 590              	.LVL70:
 193:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 591              		.loc 1 193 0
 592 00a8 2046     		mov	r0, r4
 593 00aa FFF7FEFF 		bl	MTP_FindDataInEndpoint
 594              	.LVL71:
 196:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInEpSize  = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPac
 595              		.loc 1 196 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 21


 596 00ae 0130     		adds	r0, r0, #1
 597              	.LVL72:
 598 00b0 06EBC000 		add	r0, r6, r0, lsl #3
 599 00b4 2044     		add	r0, r0, r4
 600 00b6 90F84013 		ldrb	r1, [r0, #832]	@ zero_extendqisi2
 601 00ba 41F63059 		movw	r9, #7472
 602 00be 05F80910 		strb	r1, [r5, r9]
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInPipe = USBH_AllocPipe(phost, MTP_Handle->DataInEp);
 603              		.loc 1 197 0
 604 00c2 B0F84233 		ldrh	r3, [r0, #834]
 605 00c6 41F63457 		movw	r7, #7476
 606 00ca EB53     		strh	r3, [r5, r7]	@ movhi
 198:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 607              		.loc 1 198 0
 608 00cc 2046     		mov	r0, r4
 609 00ce FFF7FEFF 		bl	USBH_AllocPipe
 610              	.LVL73:
 611 00d2 0146     		mov	r1, r0
 612 00d4 41F62C58 		movw	r8, #7468
 613 00d8 05F80800 		strb	r0, [r5, r8]
 201:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataInPipe,
 614              		.loc 1 201 0
 615 00dc 94F81C33 		ldrb	r3, [r4, #796]	@ zero_extendqisi2
 616 00e0 15F80920 		ldrb	r2, [r5, r9]	@ zero_extendqisi2
 617 00e4 E85B     		ldrh	r0, [r5, r7]
 618 00e6 0290     		str	r0, [sp, #8]
 619 00e8 0227     		movs	r7, #2
 620 00ea 0197     		str	r7, [sp, #4]
 621 00ec 94F81D03 		ldrb	r0, [r4, #797]	@ zero_extendqisi2
 622 00f0 0090     		str	r0, [sp]
 623 00f2 2046     		mov	r0, r4
 624 00f4 FFF7FEFF 		bl	USBH_OpenPipe
 625              	.LVL74:
 209:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 626              		.loc 1 209 0
 627 00f8 0022     		movs	r2, #0
 628 00fa 15F80810 		ldrb	r1, [r5, r8]	@ zero_extendqisi2
 629 00fe 2046     		mov	r0, r4
 630 0100 FFF7FEFF 		bl	USBH_LL_SetToggle
 631              	.LVL75:
 211:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 632              		.loc 1 211 0
 633 0104 2046     		mov	r0, r4
 634 0106 FFF7FEFF 		bl	MTP_FindDataOutEndpoint
 635              	.LVL76:
 214:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutEpSize  = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPa
 636              		.loc 1 214 0
 637 010a 0130     		adds	r0, r0, #1
 638              	.LVL77:
 639 010c 06EBC006 		add	r6, r6, r0, lsl #3
 640 0110 2644     		add	r6, r6, r4
 641 0112 96F84013 		ldrb	r1, [r6, #832]	@ zero_extendqisi2
 642 0116 41F62F59 		movw	r9, #7471
 643 011a 05F80910 		strb	r1, [r5, r9]
 215:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutPipe = USBH_AllocPipe(phost, MTP_Handle->DataOutEp);
 644              		.loc 1 215 0
 645 011e B6F84233 		ldrh	r3, [r6, #834]
ARM GAS  /tmp/ccqZ2XVC.s 			page 22


 646 0122 41F63258 		movw	r8, #7474
 647 0126 25F80830 		strh	r3, [r5, r8]	@ movhi
 216:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 648              		.loc 1 216 0
 649 012a 2046     		mov	r0, r4
 650 012c FFF7FEFF 		bl	USBH_AllocPipe
 651              	.LVL78:
 652 0130 0146     		mov	r1, r0
 653 0132 41F62D56 		movw	r6, #7469
 654 0136 A855     		strb	r0, [r5, r6]
 219:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->DataOutPipe,
 655              		.loc 1 219 0
 656 0138 94F81C33 		ldrb	r3, [r4, #796]	@ zero_extendqisi2
 657 013c 15F80920 		ldrb	r2, [r5, r9]	@ zero_extendqisi2
 658 0140 35F80800 		ldrh	r0, [r5, r8]
 659 0144 0290     		str	r0, [sp, #8]
 660 0146 0197     		str	r7, [sp, #4]
 661 0148 94F81D03 		ldrb	r0, [r4, #797]	@ zero_extendqisi2
 662 014c 0090     		str	r0, [sp]
 663 014e 2046     		mov	r0, r4
 664 0150 FFF7FEFF 		bl	USBH_OpenPipe
 665              	.LVL79:
 227:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 666              		.loc 1 227 0
 667 0154 0022     		movs	r2, #0
 668 0156 A95D     		ldrb	r1, [r5, r6]	@ zero_extendqisi2
 669 0158 2046     		mov	r0, r4
 670 015a FFF7FEFF 		bl	USBH_LL_SetToggle
 671              	.LVL80:
 230:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->is_ready = 0;
 672              		.loc 1 230 0
 673 015e 41F63853 		movw	r3, #7480
 674 0162 EF54     		strb	r7, [r5, r3]
 231:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->events.state = MTP_EVENTS_INIT;
 675              		.loc 1 231 0
 676 0164 0023     		movs	r3, #0
 677 0166 42F2CC12 		movw	r2, #8652
 678 016a AB50     		str	r3, [r5, r2]
 232:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_PTP_Init(phost);
 679              		.loc 1 232 0
 680 016c 41F63C52 		movw	r2, #7484
 681 0170 AB54     		strb	r3, [r5, r2]
 233:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 682              		.loc 1 233 0
 683 0172 2046     		mov	r0, r4
 684 0174 FFF7FEFF 		bl	USBH_PTP_Init
 685              	.LVL81:
 686 0178 00E0     		b	.L43
 687              	.LVL82:
 688              	.L44:
 236:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 689              		.loc 1 236 0
 690 017a 0220     		movs	r0, #2
 691              	.LVL83:
 692              	.L43:
 237:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 693              		.loc 1 237 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 23


 694 017c 04B0     		add	sp, sp, #16
 695              	.LCFI9:
 696              		.cfi_def_cfa_offset 32
 697              		@ sp needed
 698 017e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 699              		.cfi_endproc
 700              	.LFE124:
 702 0182 00BF     		.section	.text.USBH_MTP_IsReady,"ax",%progbits
 703              		.align	2
 704              		.global	USBH_MTP_IsReady
 705              		.thumb
 706              		.thumb_func
 708              	USBH_MTP_IsReady:
 709              	.LFB132:
 505:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 506:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 507:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_IsReady 
 508:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Select the storage Unit to be used
 509:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 510:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 511:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 512:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** uint8_t USBH_MTP_IsReady (USBH_HandleTypeDef *phost)
 513:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 710              		.loc 1 513 0
 711              		.cfi_startproc
 712              		@ args = 0, pretend = 0, frame = 0
 713              		@ frame_needed = 0, uses_anonymous_args = 0
 714              		@ link register save eliminated.
 715              	.LVL84:
 514:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 716              		.loc 1 514 0
 717 0000 D0F84435 		ldr	r3, [r0, #1348]
 718 0004 DA69     		ldr	r2, [r3, #28]
 719              	.LVL85:
 515:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 516:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return (MTP_Handle->is_ready);
 517:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 720              		.loc 1 517 0
 721 0006 42F2CC13 		movw	r3, #8652
 722 000a D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 723              	.LVL86:
 724 000c 7047     		bx	lr
 725              		.cfi_endproc
 726              	.LFE132:
 728 000e 00BF     		.section	.text.USBH_MTP_GetNumStorage,"ax",%progbits
 729              		.align	2
 730              		.global	USBH_MTP_GetNumStorage
 731              		.thumb
 732              		.thumb_func
 734              	USBH_MTP_GetNumStorage:
 735              	.LFB133:
 518:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 519:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 520:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetNumStorage 
 521:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Select the storage Unit to be used
 522:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 523:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
ARM GAS  /tmp/ccqZ2XVC.s 			page 24


 524:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 525:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetNumStorage (USBH_HandleTypeDef *phost, uint8_t *storage_num)
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 736              		.loc 1 526 0
 737              		.cfi_startproc
 738              		@ args = 0, pretend = 0, frame = 0
 739              		@ frame_needed = 0, uses_anonymous_args = 0
 740              		@ link register save eliminated.
 741              	.LVL87:
 527:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 528:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 742              		.loc 1 528 0
 743 0000 D0F84435 		ldr	r3, [r0, #1348]
 744 0004 DB69     		ldr	r3, [r3, #28]
 745              	.LVL88:
 529:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 530:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready > 0)
 746              		.loc 1 530 0
 747 0006 42F2CC12 		movw	r2, #8652
 748 000a 9A58     		ldr	r2, [r3, r2]
 749 000c 22B1     		cbz	r2, .L49
 531:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 532:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     *storage_num = MTP_Handle->info.storids.n;
 750              		.loc 1 532 0
 751 000e D3F80439 		ldr	r3, [r3, #2308]
 752              	.LVL89:
 753 0012 0B70     		strb	r3, [r1]
 754              	.LVL90:
 533:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status  = USBH_OK;
 755              		.loc 1 533 0
 756 0014 0020     		movs	r0, #0
 757              	.LVL91:
 758 0016 7047     		bx	lr
 759              	.LVL92:
 760              	.L49:
 527:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 761              		.loc 1 527 0
 762 0018 0220     		movs	r0, #2
 763              	.LVL93:
 534:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 535:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 536:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 537:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 764              		.loc 1 537 0
 765 001a 7047     		bx	lr
 766              		.cfi_endproc
 767              	.LFE133:
 769              		.section	.text.USBH_MTP_SelectStorage,"ax",%progbits
 770              		.align	2
 771              		.global	USBH_MTP_SelectStorage
 772              		.thumb
 773              		.thumb_func
 775              	USBH_MTP_SelectStorage:
 776              	.LFB134:
 538:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 539:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 540:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_SelectStorage 
ARM GAS  /tmp/ccqZ2XVC.s 			page 25


 541:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Select the storage Unit to be used
 542:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 543:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 544:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 545:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_SelectStorage (USBH_HandleTypeDef *phost, uint8_t storage_idx)
 546:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 777              		.loc 1 546 0
 778              		.cfi_startproc
 779              		@ args = 0, pretend = 0, frame = 0
 780              		@ frame_needed = 0, uses_anonymous_args = 0
 781              		@ link register save eliminated.
 782              	.LVL94:
 547:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 548:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 783              		.loc 1 548 0
 784 0000 D0F84435 		ldr	r3, [r0, #1348]
 785 0004 DB69     		ldr	r3, [r3, #28]
 786              	.LVL95:
 549:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 550:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 787              		.loc 1 550 0
 788 0006 D3F80429 		ldr	r2, [r3, #2308]
 789 000a 9142     		cmp	r1, r2
 790 000c 0DD2     		bcs	.L52
 791              		.loc 1 550 0 is_stmt 0 discriminator 1
 792 000e 42F2CC12 		movw	r2, #8652
 793 0012 9A58     		ldr	r2, [r3, r2]
 794 0014 5AB1     		cbz	r2, .L53
 551:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 552:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_Handle->params.CurrentStorageId = MTP_Handle->info.storids.Storage[storage_idx];
 795              		.loc 1 552 0 is_stmt 1
 796 0016 01F51071 		add	r1, r1, #576
 797              	.LVL96:
 798 001a 03EB8101 		add	r1, r3, r1, lsl #2
 799 001e 8968     		ldr	r1, [r1, #8]
 800 0020 41F61852 		movw	r2, #7448
 801 0024 9950     		str	r1, [r3, r2]
 802              	.LVL97:
 553:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       status  = USBH_OK;
 803              		.loc 1 553 0
 804 0026 0020     		movs	r0, #0
 805              	.LVL98:
 806 0028 7047     		bx	lr
 807              	.LVL99:
 808              	.L52:
 547:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 809              		.loc 1 547 0
 810 002a 0220     		movs	r0, #2
 811              	.LVL100:
 812 002c 7047     		bx	lr
 813              	.LVL101:
 814              	.L53:
 815 002e 0220     		movs	r0, #2
 816              	.LVL102:
 554:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 555:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 556:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
ARM GAS  /tmp/ccqZ2XVC.s 			page 26


 557:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 817              		.loc 1 557 0
 818 0030 7047     		bx	lr
 819              		.cfi_endproc
 820              	.LFE134:
 822 0032 00BF     		.section	.text.USBH_MTP_GetStorageInfo,"ax",%progbits
 823              		.align	2
 824              		.global	USBH_MTP_GetStorageInfo
 825              		.thumb
 826              		.thumb_func
 828              	USBH_MTP_GetStorageInfo:
 829              	.LFB135:
 558:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 559:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 560:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetStorageInfo 
 561:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Get the storage Unit info
 562:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 564:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 565:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetStorageInfo (USBH_HandleTypeDef *phost, uint8_t storage_idx, MTP_Sto
 566:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 830              		.loc 1 566 0
 831              		.cfi_startproc
 832              		@ args = 0, pretend = 0, frame = 0
 833              		@ frame_needed = 0, uses_anonymous_args = 0
 834              	.LVL103:
 835 0000 10B5     		push	{r4, lr}
 836              	.LCFI10:
 837              		.cfi_def_cfa_offset 8
 838              		.cfi_offset 4, -8
 839              		.cfi_offset 14, -4
 840              	.LVL104:
 567:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 568:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 841              		.loc 1 568 0
 842 0002 D0F84435 		ldr	r3, [r0, #1348]
 843 0006 DB69     		ldr	r3, [r3, #28]
 844              	.LVL105:
 569:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 570:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 845              		.loc 1 570 0
 846 0008 D3F80449 		ldr	r4, [r3, #2308]
 847 000c A142     		cmp	r1, r4
 848 000e 10D2     		bcs	.L56
 849              		.loc 1 570 0 is_stmt 0 discriminator 1
 850 0010 42F2CC10 		movw	r0, #8652
 851              	.LVL106:
 852 0014 1858     		ldr	r0, [r3, r0]
 853 0016 70B1     		cbz	r0, .L57
 854 0018 1046     		mov	r0, r2
 571:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 572:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     *info = MTP_Handle->info.storinfo[storage_idx];
 855              		.loc 1 572 0 is_stmt 1
 856 001a 01EB0111 		add	r1, r1, r1, lsl #4
 857              	.LVL107:
 858 001e 4A01     		lsls	r2, r1, #5
 859              	.LVL108:
ARM GAS  /tmp/ccqZ2XVC.s 			page 27


 860 0020 9918     		adds	r1, r3, r2
 861 0022 4FF40872 		mov	r2, #544
 862 0026 01F51261 		add	r1, r1, #2336
 863 002a FFF7FEFF 		bl	memcpy
 864              	.LVL109:
 573:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status  = USBH_OK;
 865              		.loc 1 573 0
 866 002e 0020     		movs	r0, #0
 867 0030 10BD     		pop	{r4, pc}
 868              	.LVL110:
 869              	.L56:
 567:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 870              		.loc 1 567 0
 871 0032 0220     		movs	r0, #2
 872              	.LVL111:
 873 0034 10BD     		pop	{r4, pc}
 874              	.L57:
 875 0036 0220     		movs	r0, #2
 876              	.LVL112:
 574:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 575:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 576:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 877              		.loc 1 576 0
 878 0038 10BD     		pop	{r4, pc}
 879              		.cfi_endproc
 880              	.LFE135:
 882 003a 00BF     		.section	.text.USBH_MTP_GetNumObjects,"ax",%progbits
 883              		.align	2
 884              		.global	USBH_MTP_GetNumObjects
 885              		.thumb
 886              		.thumb_func
 888              	USBH_MTP_GetNumObjects:
 889              	.LFB136:
 577:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 578:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 579:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetStorageInfo 
 580:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Get the storage Unit info
 581:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 582:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 583:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 584:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetNumObjects (USBH_HandleTypeDef *phost, 
 585:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t storage_idx, 
 586:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t objectformatcode, 
 587:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t associationOH,
 588:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t* numobs)
 589:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 890              		.loc 1 589 0
 891              		.cfi_startproc
 892              		@ args = 4, pretend = 0, frame = 0
 893              		@ frame_needed = 0, uses_anonymous_args = 0
 894              	.LVL113:
 895 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 896              	.LCFI11:
 897              		.cfi_def_cfa_offset 32
 898              		.cfi_offset 4, -32
 899              		.cfi_offset 5, -28
 900              		.cfi_offset 6, -24
ARM GAS  /tmp/ccqZ2XVC.s 			page 28


 901              		.cfi_offset 7, -20
 902              		.cfi_offset 8, -16
 903              		.cfi_offset 9, -12
 904              		.cfi_offset 10, -8
 905              		.cfi_offset 14, -4
 906 0004 82B0     		sub	sp, sp, #8
 907              	.LCFI12:
 908              		.cfi_def_cfa_offset 40
 909 0006 0A9E     		ldr	r6, [sp, #40]
 910              	.LVL114:
 590:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 591:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 911              		.loc 1 591 0
 912 0008 D0F84445 		ldr	r4, [r0, #1348]
 913 000c E769     		ldr	r7, [r4, #28]
 914              	.LVL115:
 592:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 915              		.loc 1 592 0
 916 000e D0F888A5 		ldr	r10, [r0, #1416]
 917              	.LVL116:
 593:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 918              		.loc 1 593 0
 919 0012 D7F80449 		ldr	r4, [r7, #2308]
 920 0016 8C42     		cmp	r4, r1
 921 0018 24D9     		bls	.L63
 922 001a 9946     		mov	r9, r3
 923 001c 9046     		mov	r8, r2
 924 001e 0D46     		mov	r5, r1
 925 0020 0446     		mov	r4, r0
 926              		.loc 1 593 0 is_stmt 0 discriminator 1
 927 0022 42F2CC13 		movw	r3, #8652
 928              	.LVL117:
 929 0026 FB58     		ldr	r3, [r7, r3]
 930 0028 73B9     		cbnz	r3, .L61
 590:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 931              		.loc 1 590 0 is_stmt 1
 932 002a 0220     		movs	r0, #2
 933              	.LVL118:
 934 002c 1FE0     		b	.L60
 935              	.LVL119:
 936              	.L62:
 594:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 595:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetNumObjects (phost, 
 596:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              MTP_Handle->info.storids.Storage[storage_idx], 
 597:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              objectformatcode, 
 598:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              associationOH,
 599:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              numobs)) == USBH_BUSY)
 600:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 601:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >   5000) || (phost->device.is_connected == 0)) 
 937              		.loc 1 601 0
 938 002e D4F88835 		ldr	r3, [r4, #1416]
 939 0032 CAEB0303 		rsb	r3, r10, r3
 940 0036 41F28832 		movw	r2, #5000
 941 003a 9342     		cmp	r3, r2
 942 003c 14D8     		bhi	.L64
 943              		.loc 1 601 0 is_stmt 0 discriminator 1
 944 003e 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
ARM GAS  /tmp/ccqZ2XVC.s 			page 29


 945 0042 13F0FF0F 		tst	r3, #255
 946 0046 11D0     		beq	.L65
 947              	.LVL120:
 948              	.L61:
 595:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              MTP_Handle->info.storids.Storage[storage_idx], 
 949              		.loc 1 595 0 is_stmt 1
 950 0048 05F51070 		add	r0, r5, #576
 951 004c 07EB8000 		add	r0, r7, r0, lsl #2
 952 0050 8168     		ldr	r1, [r0, #8]
 953 0052 0096     		str	r6, [sp]
 954 0054 4B46     		mov	r3, r9
 955 0056 4246     		mov	r2, r8
 956 0058 2046     		mov	r0, r4
 957 005a FFF7FEFF 		bl	USBH_PTP_GetNumObjects
 958              	.LVL121:
 959 005e 0128     		cmp	r0, #1
 960 0060 E5D0     		beq	.L62
 961 0062 04E0     		b	.L60
 962              	.LVL122:
 963              	.L63:
 590:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 964              		.loc 1 590 0
 965 0064 0220     		movs	r0, #2
 966              	.LVL123:
 967 0066 02E0     		b	.L60
 968              	.LVL124:
 969              	.L64:
 602:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 603:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 970              		.loc 1 603 0
 971 0068 0220     		movs	r0, #2
 972              	.LVL125:
 973 006a 00E0     		b	.L60
 974              	.LVL126:
 975              	.L65:
 976 006c 0220     		movs	r0, #2
 977              	.LVL127:
 978              	.L60:
 604:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 605:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 606:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 607:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 608:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 979              		.loc 1 608 0
 980 006e 02B0     		add	sp, sp, #8
 981              	.LCFI13:
 982              		.cfi_def_cfa_offset 32
 983              		@ sp needed
 984 0070 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 985              		.cfi_endproc
 986              	.LFE136:
 988              		.section	.text.USBH_MTP_GetObjectHandles,"ax",%progbits
 989              		.align	2
 990              		.global	USBH_MTP_GetObjectHandles
 991              		.thumb
 992              		.thumb_func
 994              	USBH_MTP_GetObjectHandles:
ARM GAS  /tmp/ccqZ2XVC.s 			page 30


 995              	.LFB137:
 609:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 610:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 611:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 612:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetStorageInfo 
 613:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Get the storage Unit info
 614:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 615:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 616:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 617:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectHandles (USBH_HandleTypeDef *phost, 
 618:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t storage_idx, 
 619:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t objectformatcode, 
 620:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t associationOH,
 621:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            PTP_ObjectHandlesTypedef* objecthandles)
 622:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 996              		.loc 1 622 0
 997              		.cfi_startproc
 998              		@ args = 4, pretend = 0, frame = 0
 999              		@ frame_needed = 0, uses_anonymous_args = 0
 1000              	.LVL128:
 1001 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1002              	.LCFI14:
 1003              		.cfi_def_cfa_offset 32
 1004              		.cfi_offset 4, -32
 1005              		.cfi_offset 5, -28
 1006              		.cfi_offset 6, -24
 1007              		.cfi_offset 7, -20
 1008              		.cfi_offset 8, -16
 1009              		.cfi_offset 9, -12
 1010              		.cfi_offset 10, -8
 1011              		.cfi_offset 14, -4
 1012 0004 82B0     		sub	sp, sp, #8
 1013              	.LCFI15:
 1014              		.cfi_def_cfa_offset 40
 1015 0006 0A9E     		ldr	r6, [sp, #40]
 1016              	.LVL129:
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 624:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1017              		.loc 1 624 0
 1018 0008 D0F84445 		ldr	r4, [r0, #1348]
 1019 000c E769     		ldr	r7, [r4, #28]
 1020              	.LVL130:
 625:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1021              		.loc 1 625 0
 1022 000e D0F888A5 		ldr	r10, [r0, #1416]
 1023              	.LVL131:
 626:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 627:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 1024              		.loc 1 627 0
 1025 0012 D7F80449 		ldr	r4, [r7, #2308]
 1026 0016 8C42     		cmp	r4, r1
 1027 0018 24D9     		bls	.L71
 1028 001a 9946     		mov	r9, r3
 1029 001c 9046     		mov	r8, r2
 1030 001e 0D46     		mov	r5, r1
 1031 0020 0446     		mov	r4, r0
 1032              		.loc 1 627 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccqZ2XVC.s 			page 31


 1033 0022 42F2CC13 		movw	r3, #8652
 1034              	.LVL132:
 1035 0026 FB58     		ldr	r3, [r7, r3]
 1036 0028 73B9     		cbnz	r3, .L69
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1037              		.loc 1 623 0 is_stmt 1
 1038 002a 0220     		movs	r0, #2
 1039              	.LVL133:
 1040 002c 1FE0     		b	.L68
 1041              	.LVL134:
 1042              	.L70:
 628:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {  
 629:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectHandles (phost, 
 630:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 MTP_Handle->info.storids.Storage[storage_idx], 
 631:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 objectformatcode, 
 632:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 associationOH,
 633:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 objecthandles)) == USBH_BUSY)
 634:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 635:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0)) 
 1043              		.loc 1 635 0
 1044 002e D4F88835 		ldr	r3, [r4, #1416]
 1045 0032 CAEB0303 		rsb	r3, r10, r3
 1046 0036 41F28832 		movw	r2, #5000
 1047 003a 9342     		cmp	r3, r2
 1048 003c 14D8     		bhi	.L72
 1049              		.loc 1 635 0 is_stmt 0 discriminator 1
 1050 003e 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1051 0042 13F0FF0F 		tst	r3, #255
 1052 0046 11D0     		beq	.L73
 1053              	.LVL135:
 1054              	.L69:
 629:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 MTP_Handle->info.storids.Storage[storage_idx], 
 1055              		.loc 1 629 0 is_stmt 1
 1056 0048 05F51070 		add	r0, r5, #576
 1057 004c 07EB8000 		add	r0, r7, r0, lsl #2
 1058 0050 8168     		ldr	r1, [r0, #8]
 1059 0052 0096     		str	r6, [sp]
 1060 0054 4B46     		mov	r3, r9
 1061 0056 4246     		mov	r2, r8
 1062 0058 2046     		mov	r0, r4
 1063 005a FFF7FEFF 		bl	USBH_PTP_GetObjectHandles
 1064              	.LVL136:
 1065 005e 0128     		cmp	r0, #1
 1066 0060 E5D0     		beq	.L70
 1067 0062 04E0     		b	.L68
 1068              	.LVL137:
 1069              	.L71:
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1070              		.loc 1 623 0
 1071 0064 0220     		movs	r0, #2
 1072              	.LVL138:
 1073 0066 02E0     		b	.L68
 1074              	.LVL139:
 1075              	.L72:
 636:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 637:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1076              		.loc 1 637 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 32


 1077 0068 0220     		movs	r0, #2
 1078              	.LVL140:
 1079 006a 00E0     		b	.L68
 1080              	.LVL141:
 1081              	.L73:
 1082 006c 0220     		movs	r0, #2
 1083              	.LVL142:
 1084              	.L68:
 638:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 639:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 640:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 641:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 642:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1085              		.loc 1 642 0
 1086 006e 02B0     		add	sp, sp, #8
 1087              	.LCFI16:
 1088              		.cfi_def_cfa_offset 32
 1089              		@ sp needed
 1090 0070 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1091              		.cfi_endproc
 1092              	.LFE137:
 1094              		.section	.text.USBH_MTP_GetObjectInfo,"ax",%progbits
 1095              		.align	2
 1096              		.global	USBH_MTP_GetObjectInfo
 1097              		.thumb
 1098              		.thumb_func
 1100              	USBH_MTP_GetObjectInfo:
 1101              	.LFB138:
 643:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 644:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 645:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_PTP_GetObjectInfo
 646:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets objert info
 647:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 648:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 649:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 650:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 651:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectInfo (USBH_HandleTypeDef *phost, 
 652:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t handle, 
 653:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            PTP_ObjectInfoTypedef* objectinfo)
 654:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1102              		.loc 1 654 0
 1103              		.cfi_startproc
 1104              		@ args = 0, pretend = 0, frame = 0
 1105              		@ frame_needed = 0, uses_anonymous_args = 0
 1106              	.LVL143:
 1107 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1108              	.LCFI17:
 1109              		.cfi_def_cfa_offset 24
 1110              		.cfi_offset 3, -24
 1111              		.cfi_offset 4, -20
 1112              		.cfi_offset 5, -16
 1113              		.cfi_offset 6, -12
 1114              		.cfi_offset 7, -8
 1115              		.cfi_offset 14, -4
 1116 0002 0446     		mov	r4, r0
 1117 0004 0E46     		mov	r6, r1
 1118 0006 1546     		mov	r5, r2
ARM GAS  /tmp/ccqZ2XVC.s 			page 33


 1119              	.LVL144:
 655:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 656:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1120              		.loc 1 656 0
 1121 0008 D0F84435 		ldr	r3, [r0, #1348]
 1122 000c DA69     		ldr	r2, [r3, #28]
 1123              	.LVL145:
 657:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1124              		.loc 1 657 0
 1125 000e D0F88875 		ldr	r7, [r0, #1416]
 1126              	.LVL146:
 658:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 659:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1127              		.loc 1 659 0
 1128 0012 42F2CC13 		movw	r3, #8652
 1129 0016 D358     		ldr	r3, [r2, r3]
 1130 0018 6BB9     		cbnz	r3, .L76
 655:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1131              		.loc 1 655 0
 1132 001a 0220     		movs	r0, #2
 1133              	.LVL147:
 1134 001c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1135              	.LVL148:
 1136              	.L78:
 660:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 661:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectInfo (phost, handle, objectinfo)) == USBH_BUSY)
 662:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 663:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0)) 
 1137              		.loc 1 663 0
 1138 001e D4F88835 		ldr	r3, [r4, #1416]
 1139 0022 DB1B     		subs	r3, r3, r7
 1140 0024 41F28832 		movw	r2, #5000
 1141 0028 9342     		cmp	r3, r2
 1142 002a 0CD8     		bhi	.L79
 1143              		.loc 1 663 0 is_stmt 0 discriminator 1
 1144 002c 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1145 0030 13F0FF0F 		tst	r3, #255
 1146 0034 09D0     		beq	.L80
 1147              	.LVL149:
 1148              	.L76:
 661:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1149              		.loc 1 661 0 is_stmt 1
 1150 0036 2A46     		mov	r2, r5
 1151 0038 3146     		mov	r1, r6
 1152 003a 2046     		mov	r0, r4
 1153 003c FFF7FEFF 		bl	USBH_PTP_GetObjectInfo
 1154              	.LVL150:
 1155 0040 0128     		cmp	r0, #1
 1156 0042 ECD0     		beq	.L78
 1157 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1158              	.LVL151:
 1159              	.L79:
 664:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 665:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1160              		.loc 1 665 0
 1161 0046 0220     		movs	r0, #2
 1162              	.LVL152:
ARM GAS  /tmp/ccqZ2XVC.s 			page 34


 1163 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1164              	.LVL153:
 1165              	.L80:
 1166 004a 0220     		movs	r0, #2
 1167              	.LVL154:
 666:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 667:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 668:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 669:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 670:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1168              		.loc 1 670 0
 1169 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1170              		.cfi_endproc
 1171              	.LFE138:
 1173 004e 00BF     		.section	.text.USBH_MTP_DeleteObject,"ax",%progbits
 1174              		.align	2
 1175              		.global	USBH_MTP_DeleteObject
 1176              		.thumb
 1177              		.thumb_func
 1179              	USBH_MTP_DeleteObject:
 1180              	.LFB139:
 671:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 672:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_DeleteObject
 673:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Delete an object.
 674:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 675:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  handle : Object Handle
 676:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 677:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 678:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_DeleteObject (USBH_HandleTypeDef *phost,
 679:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           uint32_t handle,
 680:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           uint32_t objectformatcode)
 681:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1181              		.loc 1 681 0
 1182              		.cfi_startproc
 1183              		@ args = 0, pretend = 0, frame = 0
 1184              		@ frame_needed = 0, uses_anonymous_args = 0
 1185              	.LVL155:
 1186 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1187              	.LCFI18:
 1188              		.cfi_def_cfa_offset 24
 1189              		.cfi_offset 3, -24
 1190              		.cfi_offset 4, -20
 1191              		.cfi_offset 5, -16
 1192              		.cfi_offset 6, -12
 1193              		.cfi_offset 7, -8
 1194              		.cfi_offset 14, -4
 1195 0002 0446     		mov	r4, r0
 1196 0004 0E46     		mov	r6, r1
 1197 0006 1546     		mov	r5, r2
 1198              	.LVL156:
 682:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 683:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1199              		.loc 1 683 0
 1200 0008 D0F84435 		ldr	r3, [r0, #1348]
 1201 000c DA69     		ldr	r2, [r3, #28]
 1202              	.LVL157:
 684:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
ARM GAS  /tmp/ccqZ2XVC.s 			page 35


 1203              		.loc 1 684 0
 1204 000e D0F88875 		ldr	r7, [r0, #1416]
 1205              	.LVL158:
 685:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 686:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1206              		.loc 1 686 0
 1207 0012 42F2CC13 		movw	r3, #8652
 1208 0016 D358     		ldr	r3, [r2, r3]
 1209 0018 6BB9     		cbnz	r3, .L83
 682:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1210              		.loc 1 682 0
 1211 001a 0220     		movs	r0, #2
 1212              	.LVL159:
 1213 001c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1214              	.LVL160:
 1215              	.L85:
 687:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 688:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_DeleteObject (phost, handle, objectformatcode)) == USBH_BUSY)
 689:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 690:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0)) 
 1216              		.loc 1 690 0
 1217 001e D4F88835 		ldr	r3, [r4, #1416]
 1218 0022 DB1B     		subs	r3, r3, r7
 1219 0024 41F28832 		movw	r2, #5000
 1220 0028 9342     		cmp	r3, r2
 1221 002a 0CD8     		bhi	.L86
 1222              		.loc 1 690 0 is_stmt 0 discriminator 1
 1223 002c 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1224 0030 13F0FF0F 		tst	r3, #255
 1225 0034 09D0     		beq	.L87
 1226              	.LVL161:
 1227              	.L83:
 688:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1228              		.loc 1 688 0 is_stmt 1
 1229 0036 2A46     		mov	r2, r5
 1230 0038 3146     		mov	r1, r6
 1231 003a 2046     		mov	r0, r4
 1232 003c FFF7FEFF 		bl	USBH_PTP_DeleteObject
 1233              	.LVL162:
 1234 0040 0128     		cmp	r0, #1
 1235 0042 ECD0     		beq	.L85
 1236 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1237              	.LVL163:
 1238              	.L86:
 691:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 692:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1239              		.loc 1 692 0
 1240 0046 0220     		movs	r0, #2
 1241              	.LVL164:
 1242 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1243              	.LVL165:
 1244              	.L87:
 1245 004a 0220     		movs	r0, #2
 1246              	.LVL166:
 693:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 694:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 695:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
ARM GAS  /tmp/ccqZ2XVC.s 			page 36


 696:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 697:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1247              		.loc 1 697 0
 1248 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1249              		.cfi_endproc
 1250              	.LFE139:
 1252 004e 00BF     		.section	.text.USBH_MTP_GetObject,"ax",%progbits
 1253              		.align	2
 1254              		.global	USBH_MTP_GetObject
 1255              		.thumb
 1256              		.thumb_func
 1258              	USBH_MTP_GetObject:
 1259              	.LFB140:
 698:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 699:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 700:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObject
 701:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object
 702:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 703:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 704:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 705:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 706:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObject (USBH_HandleTypeDef *phost, 
 707:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t handle, 
 708:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint8_t *object)
 709:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1260              		.loc 1 709 0
 1261              		.cfi_startproc
 1262              		@ args = 0, pretend = 0, frame = 0
 1263              		@ frame_needed = 0, uses_anonymous_args = 0
 1264              	.LVL167:
 1265 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1266              	.LCFI19:
 1267              		.cfi_def_cfa_offset 24
 1268              		.cfi_offset 3, -24
 1269              		.cfi_offset 4, -20
 1270              		.cfi_offset 5, -16
 1271              		.cfi_offset 6, -12
 1272              		.cfi_offset 7, -8
 1273              		.cfi_offset 14, -4
 1274 0002 0446     		mov	r4, r0
 1275 0004 0E46     		mov	r6, r1
 1276 0006 1546     		mov	r5, r2
 1277              	.LVL168:
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 711:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1278              		.loc 1 711 0
 1279 0008 D0F84435 		ldr	r3, [r0, #1348]
 1280 000c DA69     		ldr	r2, [r3, #28]
 1281              	.LVL169:
 712:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1282              		.loc 1 712 0
 1283 000e D0F88875 		ldr	r7, [r0, #1416]
 1284              	.LVL170:
 713:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 714:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1285              		.loc 1 714 0
 1286 0012 42F2CC13 		movw	r3, #8652
ARM GAS  /tmp/ccqZ2XVC.s 			page 37


 1287 0016 D358     		ldr	r3, [r2, r3]
 1288 0018 6BB9     		cbnz	r3, .L90
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1289              		.loc 1 710 0
 1290 001a 0220     		movs	r0, #2
 1291              	.LVL171:
 1292 001c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1293              	.LVL172:
 1294              	.L92:
 715:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 716:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObject (phost, handle, object)) == USBH_BUSY)
 717:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 718:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0)) 
 1295              		.loc 1 718 0
 1296 001e D4F88835 		ldr	r3, [r4, #1416]
 1297 0022 DB1B     		subs	r3, r3, r7
 1298 0024 41F28832 		movw	r2, #5000
 1299 0028 9342     		cmp	r3, r2
 1300 002a 0CD8     		bhi	.L93
 1301              		.loc 1 718 0 is_stmt 0 discriminator 1
 1302 002c 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1303 0030 13F0FF0F 		tst	r3, #255
 1304 0034 09D0     		beq	.L94
 1305              	.LVL173:
 1306              	.L90:
 716:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1307              		.loc 1 716 0 is_stmt 1
 1308 0036 2A46     		mov	r2, r5
 1309 0038 3146     		mov	r1, r6
 1310 003a 2046     		mov	r0, r4
 1311 003c FFF7FEFF 		bl	USBH_PTP_GetObject
 1312              	.LVL174:
 1313 0040 0128     		cmp	r0, #1
 1314 0042 ECD0     		beq	.L92
 1315 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1316              	.LVL175:
 1317              	.L93:
 719:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 720:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1318              		.loc 1 720 0
 1319 0046 0220     		movs	r0, #2
 1320              	.LVL176:
 1321 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1322              	.LVL177:
 1323              	.L94:
 1324 004a 0220     		movs	r0, #2
 1325              	.LVL178:
 721:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 722:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 723:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 724:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 725:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1326              		.loc 1 725 0
 1327 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1328              		.cfi_endproc
 1329              	.LFE140:
 1331 004e 00BF     		.section	.text.USBH_MTP_GetPartialObject,"ax",%progbits
ARM GAS  /tmp/ccqZ2XVC.s 			page 38


 1332              		.align	2
 1333              		.global	USBH_MTP_GetPartialObject
 1334              		.thumb
 1335              		.thumb_func
 1337              	USBH_MTP_GetPartialObject:
 1338              	.LFB141:
 726:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 727:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 728:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetPartialObject
 729:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object
 730:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 731:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 732:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 733:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 734:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetPartialObject(USBH_HandleTypeDef *phost, 
 735:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t handle, 
 736:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t offset,
 737:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t maxbytes, 
 738:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint8_t *object,
 739:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t *len)
 740:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1339              		.loc 1 740 0
 1340              		.cfi_startproc
 1341              		@ args = 8, pretend = 0, frame = 0
 1342              		@ frame_needed = 0, uses_anonymous_args = 0
 1343              	.LVL179:
 1344 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1345              	.LCFI20:
 1346              		.cfi_def_cfa_offset 32
 1347              		.cfi_offset 4, -32
 1348              		.cfi_offset 5, -28
 1349              		.cfi_offset 6, -24
 1350              		.cfi_offset 7, -20
 1351              		.cfi_offset 8, -16
 1352              		.cfi_offset 9, -12
 1353              		.cfi_offset 10, -8
 1354              		.cfi_offset 14, -4
 1355 0004 82B0     		sub	sp, sp, #8
 1356              	.LCFI21:
 1357              		.cfi_def_cfa_offset 40
 1358 0006 0446     		mov	r4, r0
 1359 0008 8946     		mov	r9, r1
 1360 000a 9046     		mov	r8, r2
 1361 000c 1F46     		mov	r7, r3
 1362 000e 0A9E     		ldr	r6, [sp, #40]
 1363 0010 0B9D     		ldr	r5, [sp, #44]
 1364              	.LVL180:
 741:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 742:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1365              		.loc 1 742 0
 1366 0012 D0F84435 		ldr	r3, [r0, #1348]
 1367              	.LVL181:
 1368 0016 DA69     		ldr	r2, [r3, #28]
 1369              	.LVL182:
 743:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1370              		.loc 1 743 0
 1371 0018 D0F888A5 		ldr	r10, [r0, #1416]
ARM GAS  /tmp/ccqZ2XVC.s 			page 39


 1372              	.LVL183:
 744:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 745:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1373              		.loc 1 745 0
 1374 001c 42F2CC13 		movw	r3, #8652
 1375 0020 D358     		ldr	r3, [r2, r3]
 1376 0022 73B9     		cbnz	r3, .L97
 741:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1377              		.loc 1 741 0
 1378 0024 0220     		movs	r0, #2
 1379              	.LVL184:
 1380 0026 1AE0     		b	.L98
 1381              	.LVL185:
 1382              	.L99:
 746:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 747:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetPartialObject(phost, 
 748:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            handle, 
 749:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            offset,
 750:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            maxbytes, 
 751:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            object,
 752:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            len)) == USBH_BUSY)
 753:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 754:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0))  
 1383              		.loc 1 754 0
 1384 0028 D4F88835 		ldr	r3, [r4, #1416]
 1385 002c CAEB0303 		rsb	r3, r10, r3
 1386 0030 41F28832 		movw	r2, #5000
 1387 0034 9342     		cmp	r3, r2
 1388 0036 0FD8     		bhi	.L100
 1389              		.loc 1 754 0 is_stmt 0 discriminator 1
 1390 0038 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1391 003c 13F0FF0F 		tst	r3, #255
 1392 0040 0CD0     		beq	.L101
 1393              	.LVL186:
 1394              	.L97:
 747:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            handle, 
 1395              		.loc 1 747 0 is_stmt 1
 1396 0042 0195     		str	r5, [sp, #4]
 1397 0044 0096     		str	r6, [sp]
 1398 0046 3B46     		mov	r3, r7
 1399 0048 4246     		mov	r2, r8
 1400 004a 4946     		mov	r1, r9
 1401 004c 2046     		mov	r0, r4
 1402 004e FFF7FEFF 		bl	USBH_PTP_GetPartialObject
 1403              	.LVL187:
 1404 0052 0128     		cmp	r0, #1
 1405 0054 E8D0     		beq	.L99
 1406 0056 02E0     		b	.L98
 1407              	.L100:
 755:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 756:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1408              		.loc 1 756 0
 1409 0058 0220     		movs	r0, #2
 1410              	.LVL188:
 1411 005a 00E0     		b	.L98
 1412              	.LVL189:
 1413              	.L101:
ARM GAS  /tmp/ccqZ2XVC.s 			page 40


 1414 005c 0220     		movs	r0, #2
 1415              	.LVL190:
 1416              	.L98:
 757:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 758:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 759:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 760:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 761:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1417              		.loc 1 761 0
 1418 005e 02B0     		add	sp, sp, #8
 1419              	.LCFI22:
 1420              		.cfi_def_cfa_offset 32
 1421              		@ sp needed
 1422 0060 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1423              		.cfi_endproc
 1424              	.LFE141:
 1426              		.section	.text.USBH_MTP_GetObjectPropsSupported,"ax",%progbits
 1427              		.align	2
 1428              		.global	USBH_MTP_GetObjectPropsSupported
 1429              		.thumb
 1430              		.thumb_func
 1432              	USBH_MTP_GetObjectPropsSupported:
 1433              	.LFB142:
 762:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 763:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 764:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObjectPropsSupported
 765:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
 766:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 767:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 768:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 769:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 770:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectPropsSupported (USBH_HandleTypeDef *phost,
 771:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                      uint16_t ofc,
 772:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                      uint32_t *propnum, 
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                      uint16_t *props)
 774:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1434              		.loc 1 774 0
 1435              		.cfi_startproc
 1436              		@ args = 0, pretend = 0, frame = 0
 1437              		@ frame_needed = 0, uses_anonymous_args = 0
 1438              	.LVL191:
 1439 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1440              	.LCFI23:
 1441              		.cfi_def_cfa_offset 24
 1442              		.cfi_offset 4, -24
 1443              		.cfi_offset 5, -20
 1444              		.cfi_offset 6, -16
 1445              		.cfi_offset 7, -12
 1446              		.cfi_offset 8, -8
 1447              		.cfi_offset 14, -4
 1448 0004 0446     		mov	r4, r0
 1449 0006 0F46     		mov	r7, r1
 1450 0008 1646     		mov	r6, r2
 1451 000a 1D46     		mov	r5, r3
 1452              	.LVL192:
 775:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 776:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
ARM GAS  /tmp/ccqZ2XVC.s 			page 41


 1453              		.loc 1 776 0
 1454 000c D0F84435 		ldr	r3, [r0, #1348]
 1455              	.LVL193:
 1456 0010 DA69     		ldr	r2, [r3, #28]
 1457              	.LVL194:
 777:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1458              		.loc 1 777 0
 1459 0012 D0F88885 		ldr	r8, [r0, #1416]
 1460              	.LVL195:
 778:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 779:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1461              		.loc 1 779 0
 1462 0016 42F2CC13 		movw	r3, #8652
 1463 001a D358     		ldr	r3, [r2, r3]
 1464 001c 7BB9     		cbnz	r3, .L104
 775:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1465              		.loc 1 775 0
 1466 001e 0220     		movs	r0, #2
 1467              	.LVL196:
 1468 0020 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1469              	.LVL197:
 1470              	.L106:
 780:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 781:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectPropsSupported (phost,
 782:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                      ofc,
 783:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                      propnum, 
 784:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                      props)) == USBH_BUSY)
 785:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 786:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0)) 
 1471              		.loc 1 786 0
 1472 0024 D4F88835 		ldr	r3, [r4, #1416]
 1473 0028 C8EB0303 		rsb	r3, r8, r3
 1474 002c 41F28832 		movw	r2, #5000
 1475 0030 9342     		cmp	r3, r2
 1476 0032 0ED8     		bhi	.L107
 1477              		.loc 1 786 0 is_stmt 0 discriminator 1
 1478 0034 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1479 0038 13F0FF0F 		tst	r3, #255
 1480 003c 0CD0     		beq	.L108
 1481              	.LVL198:
 1482              	.L104:
 781:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                      ofc,
 1483              		.loc 1 781 0 is_stmt 1
 1484 003e 2B46     		mov	r3, r5
 1485 0040 3246     		mov	r2, r6
 1486 0042 3946     		mov	r1, r7
 1487 0044 2046     		mov	r0, r4
 1488 0046 FFF7FEFF 		bl	USBH_PTP_GetObjectPropsSupported
 1489              	.LVL199:
 1490 004a 0128     		cmp	r0, #1
 1491 004c EAD0     		beq	.L106
 1492 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1493              	.LVL200:
 1494              	.L107:
 787:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 788:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1495              		.loc 1 788 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 42


 1496 0052 0220     		movs	r0, #2
 1497              	.LVL201:
 1498 0054 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1499              	.LVL202:
 1500              	.L108:
 1501 0058 0220     		movs	r0, #2
 1502              	.LVL203:
 789:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 790:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 791:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 792:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 793:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1503              		.loc 1 793 0
 1504 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1505              		.cfi_endproc
 1506              	.LFE142:
 1508 005e 00BF     		.section	.text.USBH_MTP_GetObjectPropDesc,"ax",%progbits
 1509              		.align	2
 1510              		.global	USBH_MTP_GetObjectPropDesc
 1511              		.thumb
 1512              		.thumb_func
 1514              	USBH_MTP_GetObjectPropDesc:
 1515              	.LFB143:
 794:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 795:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 796:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObjectPropDesc
 797:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
 798:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 799:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 800:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 801:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 802:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectPropDesc (USBH_HandleTypeDef *phost,
 803:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 uint16_t opc, 
 804:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 uint16_t ofc, 
 805:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 PTP_ObjectPropDescTypeDef *opd)
 806:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1516              		.loc 1 806 0
 1517              		.cfi_startproc
 1518              		@ args = 0, pretend = 0, frame = 0
 1519              		@ frame_needed = 0, uses_anonymous_args = 0
 1520              	.LVL204:
 1521 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1522              	.LCFI24:
 1523              		.cfi_def_cfa_offset 24
 1524              		.cfi_offset 4, -24
 1525              		.cfi_offset 5, -20
 1526              		.cfi_offset 6, -16
 1527              		.cfi_offset 7, -12
 1528              		.cfi_offset 8, -8
 1529              		.cfi_offset 14, -4
 1530 0004 0446     		mov	r4, r0
 1531 0006 0F46     		mov	r7, r1
 1532 0008 1646     		mov	r6, r2
 1533 000a 1D46     		mov	r5, r3
 1534              	.LVL205:
 807:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 808:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
ARM GAS  /tmp/ccqZ2XVC.s 			page 43


 1535              		.loc 1 808 0
 1536 000c D0F84435 		ldr	r3, [r0, #1348]
 1537              	.LVL206:
 1538 0010 DA69     		ldr	r2, [r3, #28]
 1539              	.LVL207:
 809:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1540              		.loc 1 809 0
 1541 0012 D0F88885 		ldr	r8, [r0, #1416]
 1542              	.LVL208:
 810:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 811:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1543              		.loc 1 811 0
 1544 0016 42F2CC13 		movw	r3, #8652
 1545 001a D358     		ldr	r3, [r2, r3]
 1546 001c 7BB9     		cbnz	r3, .L111
 807:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1547              		.loc 1 807 0
 1548 001e 0220     		movs	r0, #2
 1549              	.LVL209:
 1550 0020 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1551              	.LVL210:
 1552              	.L113:
 812:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 813:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectPropDesc (phost,
 814:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 opc, 
 815:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 ofc, 
 816:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 opd)) == USBH_BUSY)
 817:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 818:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0))  
 1553              		.loc 1 818 0
 1554 0024 D4F88835 		ldr	r3, [r4, #1416]
 1555 0028 C8EB0303 		rsb	r3, r8, r3
 1556 002c 41F28832 		movw	r2, #5000
 1557 0030 9342     		cmp	r3, r2
 1558 0032 0ED8     		bhi	.L114
 1559              		.loc 1 818 0 is_stmt 0 discriminator 1
 1560 0034 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1561 0038 13F0FF0F 		tst	r3, #255
 1562 003c 0CD0     		beq	.L115
 1563              	.LVL211:
 1564              	.L111:
 813:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 opc, 
 1565              		.loc 1 813 0 is_stmt 1
 1566 003e 2B46     		mov	r3, r5
 1567 0040 3246     		mov	r2, r6
 1568 0042 3946     		mov	r1, r7
 1569 0044 2046     		mov	r0, r4
 1570 0046 FFF7FEFF 		bl	USBH_PTP_GetObjectPropDesc
 1571              	.LVL212:
 1572 004a 0128     		cmp	r0, #1
 1573 004c EAD0     		beq	.L113
 1574 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1575              	.LVL213:
 1576              	.L114:
 819:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 820:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1577              		.loc 1 820 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 44


 1578 0052 0220     		movs	r0, #2
 1579              	.LVL214:
 1580 0054 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1581              	.LVL215:
 1582              	.L115:
 1583 0058 0220     		movs	r0, #2
 1584              	.LVL216:
 821:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 822:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 823:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 824:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status; 
 825:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1585              		.loc 1 825 0
 1586 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1587              		.cfi_endproc
 1588              	.LFE143:
 1590 005e 00BF     		.section	.text.USBH_MTP_GetObjectPropList,"ax",%progbits
 1591              		.align	2
 1592              		.global	USBH_MTP_GetObjectPropList
 1593              		.thumb
 1594              		.thumb_func
 1596              	USBH_MTP_GetObjectPropList:
 1597              	.LFB144:
 826:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 827:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 828:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObjectPropList
 829:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
 830:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 831:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 832:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 833:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 834:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectPropList (USBH_HandleTypeDef *phost,
 835:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 uint32_t handle, 
 836:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 MTP_PropertiesTypedef *pprops, 
 837:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 uint32_t *nrofprops)
 838:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1598              		.loc 1 838 0
 1599              		.cfi_startproc
 1600              		@ args = 0, pretend = 0, frame = 0
 1601              		@ frame_needed = 0, uses_anonymous_args = 0
 1602              	.LVL217:
 1603 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1604              	.LCFI25:
 1605              		.cfi_def_cfa_offset 24
 1606              		.cfi_offset 4, -24
 1607              		.cfi_offset 5, -20
 1608              		.cfi_offset 6, -16
 1609              		.cfi_offset 7, -12
 1610              		.cfi_offset 8, -8
 1611              		.cfi_offset 14, -4
 1612 0004 0446     		mov	r4, r0
 1613 0006 0F46     		mov	r7, r1
 1614 0008 1646     		mov	r6, r2
 1615 000a 1D46     		mov	r5, r3
 1616              	.LVL218:
 839:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 840:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
ARM GAS  /tmp/ccqZ2XVC.s 			page 45


 1617              		.loc 1 840 0
 1618 000c D0F84435 		ldr	r3, [r0, #1348]
 1619              	.LVL219:
 1620 0010 DA69     		ldr	r2, [r3, #28]
 1621              	.LVL220:
 841:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1622              		.loc 1 841 0
 1623 0012 D0F88885 		ldr	r8, [r0, #1416]
 1624              	.LVL221:
 842:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 843:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1625              		.loc 1 843 0
 1626 0016 42F2CC13 		movw	r3, #8652
 1627 001a D358     		ldr	r3, [r2, r3]
 1628 001c 7BB9     		cbnz	r3, .L118
 839:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1629              		.loc 1 839 0
 1630 001e 0220     		movs	r0, #2
 1631              	.LVL222:
 1632 0020 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1633              	.LVL223:
 1634              	.L120:
 844:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 845:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectPropList (phost,
 846:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 handle, 
 847:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 pprops, 
 848:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 nrofprops)) == USBH_BUSY)
 849:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 850:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0))  
 1635              		.loc 1 850 0
 1636 0024 D4F88835 		ldr	r3, [r4, #1416]
 1637 0028 C8EB0303 		rsb	r3, r8, r3
 1638 002c 41F28832 		movw	r2, #5000
 1639 0030 9342     		cmp	r3, r2
 1640 0032 0ED8     		bhi	.L121
 1641              		.loc 1 850 0 is_stmt 0 discriminator 1
 1642 0034 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1643 0038 13F0FF0F 		tst	r3, #255
 1644 003c 0CD0     		beq	.L122
 1645              	.LVL224:
 1646              	.L118:
 845:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 handle, 
 1647              		.loc 1 845 0 is_stmt 1
 1648 003e 2B46     		mov	r3, r5
 1649 0040 3246     		mov	r2, r6
 1650 0042 3946     		mov	r1, r7
 1651 0044 2046     		mov	r0, r4
 1652 0046 FFF7FEFF 		bl	USBH_PTP_GetObjectPropList
 1653              	.LVL225:
 1654 004a 0128     		cmp	r0, #1
 1655 004c EAD0     		beq	.L120
 1656 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1657              	.LVL226:
 1658              	.L121:
 851:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 852:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1659              		.loc 1 852 0
ARM GAS  /tmp/ccqZ2XVC.s 			page 46


 1660 0052 0220     		movs	r0, #2
 1661              	.LVL227:
 1662 0054 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1663              	.LVL228:
 1664              	.L122:
 1665 0058 0220     		movs	r0, #2
 1666              	.LVL229:
 853:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 854:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 855:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 856:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status; 
 857:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1667              		.loc 1 857 0
 1668 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1669              		.cfi_endproc
 1670              	.LFE144:
 1672 005e 00BF     		.section	.text.USBH_MTP_SendObject,"ax",%progbits
 1673              		.align	2
 1674              		.global	USBH_MTP_SendObject
 1675              		.thumb
 1676              		.thumb_func
 1678              	USBH_MTP_SendObject:
 1679              	.LFB145:
 858:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 859:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 860:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_SendObject
 861:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Send an object
 862:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 863:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 864:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 865:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 866:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_SendObject (USBH_HandleTypeDef *phost, 
 867:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t handle, 
 868:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint8_t *object,
 869:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                            uint32_t size)
 870:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1680              		.loc 1 870 0
 1681              		.cfi_startproc
 1682              		@ args = 0, pretend = 0, frame = 0
 1683              		@ frame_needed = 0, uses_anonymous_args = 0
 1684              	.LVL230:
 1685 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1686              	.LCFI26:
 1687              		.cfi_def_cfa_offset 24
 1688              		.cfi_offset 4, -24
 1689              		.cfi_offset 5, -20
 1690              		.cfi_offset 6, -16
 1691              		.cfi_offset 7, -12
 1692              		.cfi_offset 8, -8
 1693              		.cfi_offset 14, -4
 1694 0004 0446     		mov	r4, r0
 1695 0006 0F46     		mov	r7, r1
 1696 0008 1646     		mov	r6, r2
 1697 000a 1D46     		mov	r5, r3
 1698              	.LVL231:
 871:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 872:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
ARM GAS  /tmp/ccqZ2XVC.s 			page 47


 1699              		.loc 1 872 0
 1700 000c D0F84435 		ldr	r3, [r0, #1348]
 1701              	.LVL232:
 1702 0010 DA69     		ldr	r2, [r3, #28]
 1703              	.LVL233:
 873:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1704              		.loc 1 873 0
 1705 0012 D0F88885 		ldr	r8, [r0, #1416]
 1706              	.LVL234:
 874:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 875:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1707              		.loc 1 875 0
 1708 0016 42F2CC13 		movw	r3, #8652
 1709 001a D358     		ldr	r3, [r2, r3]
 1710 001c 7BB9     		cbnz	r3, .L125
 871:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1711              		.loc 1 871 0
 1712 001e 0220     		movs	r0, #2
 1713              	.LVL235:
 1714 0020 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1715              	.LVL236:
 1716              	.L127:
 876:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
 877:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_SendObject (phost, handle, object, size)) == USBH_BUSY)
 878:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 879:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0)) 
 1717              		.loc 1 879 0
 1718 0024 D4F88835 		ldr	r3, [r4, #1416]
 1719 0028 C8EB0303 		rsb	r3, r8, r3
 1720 002c 41F28832 		movw	r2, #5000
 1721 0030 9342     		cmp	r3, r2
 1722 0032 0ED8     		bhi	.L128
 1723              		.loc 1 879 0 is_stmt 0 discriminator 1
 1724 0034 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1725 0038 13F0FF0F 		tst	r3, #255
 1726 003c 0CD0     		beq	.L129
 1727              	.LVL237:
 1728              	.L125:
 877:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1729              		.loc 1 877 0 is_stmt 1
 1730 003e 2B46     		mov	r3, r5
 1731 0040 3246     		mov	r2, r6
 1732 0042 3946     		mov	r1, r7
 1733 0044 2046     		mov	r0, r4
 1734 0046 FFF7FEFF 		bl	USBH_PTP_SendObject
 1735              	.LVL238:
 1736 004a 0128     		cmp	r0, #1
 1737 004c EAD0     		beq	.L127
 1738 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1739              	.LVL239:
 1740              	.L128:
 880:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 881:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1741              		.loc 1 881 0
 1742 0052 0220     		movs	r0, #2
 1743              	.LVL240:
 1744 0054 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
ARM GAS  /tmp/ccqZ2XVC.s 			page 48


 1745              	.LVL241:
 1746              	.L129:
 1747 0058 0220     		movs	r0, #2
 1748              	.LVL242:
 882:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 883:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 884:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 885:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 886:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1749              		.loc 1 886 0
 1750 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1751              		.cfi_endproc
 1752              	.LFE145:
 1754 005e 00BF     		.section	.text.USBH_MTP_GetDevicePropDesc,"ax",%progbits
 1755              		.align	2
 1756              		.global	USBH_MTP_GetDevicePropDesc
 1757              		.thumb
 1758              		.thumb_func
 1760              	USBH_MTP_GetDevicePropDesc:
 1761              	.LFB148:
 887:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 888:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  /**
 889:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  Handle HID Control process
 890:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 891:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 892:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 893:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Events (USBH_HandleTypeDef *phost)
 894:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 895:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_BUSY ;
 896:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 897:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  
 898:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 899:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   switch(MTP_Handle->events.state)
 900:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 901:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   case MTP_EVENTS_INIT:
 902:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if((phost->Timer & 1) == 0)
 903:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 904:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_Handle->events.timer = phost->Timer;
 905:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_InterruptReceiveData(phost, 
 906:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 (uint8_t *)&(MTP_Handle->events.container),
 907:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 MTP_Handle->NotificationEpSize,
 908:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 MTP_Handle->NotificationPipe);
 909:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 910:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 911:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****      MTP_Handle->events.state = MTP_EVENTS_GETDATA ;
 912:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 913:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 914:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   case MTP_EVENTS_GETDATA:
 915:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(USBH_LL_GetURBState(phost , MTP_Handle->NotificationPipe) == USBH_URB_DONE)
 916:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 917:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_DecodeEvent(phost);
 918:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 919:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 920:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if(( phost->Timer - MTP_Handle->events.timer) >= MTP_Handle->events.poll)
 921:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 922:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****      MTP_Handle->events.timer = phost->Timer;
 923:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
ARM GAS  /tmp/ccqZ2XVC.s 			page 49


 924:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_InterruptReceiveData(phost, 
 925:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 (uint8_t *)&(MTP_Handle->events.container),
 926:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 MTP_Handle->NotificationEpSize,
 927:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 MTP_Handle->NotificationPipe);     
 928:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 929:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 930:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 931:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 932:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   default:  
 933:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break; 
 934:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 935:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 936:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;  
 937:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 938:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 939:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 940:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  MTP_DecodeEvent
 941:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Decode device event sent by responder
 942:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 943:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval None
 944:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 945:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static void MTP_DecodeEvent (USBH_HandleTypeDef *phost) 
 946:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 947:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 948:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 949:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint16_t code;
 950:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t param1;
 951:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 952:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Process the event */
 953:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   code = MTP_Handle->events.container.code;
 954:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   param1 = MTP_Handle->events.container.param1;
 955:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 956:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  switch(code) 
 957:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  {
 958:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_Undefined:
 959:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_Undefined in session %u", MTP_Handle->ptp.session_id);
 960:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 961:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_CancelTransaction:
 962:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_CancelTransaction in session %u", MTP_Handle->ptp.session_id);
 963:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 964:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_ObjectAdded:
 965:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_ObjectAdded in session %u", MTP_Handle->ptp.session_id);
 966:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 967:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 968:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_ObjectRemoved:
 969:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_ObjectRemoved in session %u", MTP_Handle->ptp.session_id);
 970:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 971:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 972:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StoreAdded:
 973:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_StoreAdded in session %u", MTP_Handle->ptp.session_id);
 974:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 975:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 976:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StoreRemoved:
 977:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_StoreRemoved in session %u", MTP_Handle->ptp.session_id);
 978:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 979:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 980:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_DevicePropChanged:
ARM GAS  /tmp/ccqZ2XVC.s 			page 50


 981:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_DevicePropChanged in session %u", MTP_Handle->ptp.session_id);
 982:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 983:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 984:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_ObjectInfoChanged:
 985:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_ObjectInfoChanged in session %u", MTP_Handle->ptp.session_id);
 986:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 987:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 988:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_DeviceInfoChanged:
 989:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_DeviceInfoChanged in session %u", MTP_Handle->ptp.session_id);
 990:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 991:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 992:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_RequestObjectTransfer:
 993:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_RequestObjectTransfer in session %u", MTP_Handle->ptp.session_id);
 994:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 995:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 996:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StoreFull:
 997:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_StoreFull in session %u", MTP_Handle->ptp.session_id);
 998:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 999:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
1000:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_DeviceReset:
1001:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_DeviceReset in session %u", MTP_Handle->ptp.session_id);
1002:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1003:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
1004:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StorageInfoChanged :
1005:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog( "EVT: PTP_EC_StorageInfoChanged in session %u", MTP_Handle->ptp.session_id);
1006:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1007:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
1008:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_CaptureComplete :
1009:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog( "EVT: PTP_EC_CaptureComplete in session %u", MTP_Handle->ptp.session_id);
1010:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1011:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
1012:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_UnreportedStatus :
1013:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog( "EVT: PTP_EC_UnreportedStatus in session %u", MTP_Handle->ptp.session_id);
1014:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1015:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
1016:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     default :
1017:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog( "Received unknown event in session %u", MTP_Handle->ptp.session_id);
1018:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1019:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
1020:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  
1021:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  USBH_MTP_EventsCallback(phost, code, param1);
1022:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
1023:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1024:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
1025:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetDevicePropDesc
1026:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
1027:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
1028:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
1029:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
1030:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
1031:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetDevicePropDesc (USBH_HandleTypeDef *phost,
1032:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 uint16_t propcode, 
1033:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 			                        PTP_DevicePropDescTypdef* devicepropertydesc)
1034:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1035:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1762              		.loc 1 1035 0
 1763              		.cfi_startproc
ARM GAS  /tmp/ccqZ2XVC.s 			page 51


 1764              		@ args = 0, pretend = 0, frame = 0
 1765              		@ frame_needed = 0, uses_anonymous_args = 0
 1766              	.LVL243:
 1767 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1768              	.LCFI27:
 1769              		.cfi_def_cfa_offset 24
 1770              		.cfi_offset 3, -24
 1771              		.cfi_offset 4, -20
 1772              		.cfi_offset 5, -16
 1773              		.cfi_offset 6, -12
 1774              		.cfi_offset 7, -8
 1775              		.cfi_offset 14, -4
 1776 0002 0446     		mov	r4, r0
 1777 0004 0E46     		mov	r6, r1
 1778 0006 1546     		mov	r5, r2
 1779              	.LVL244:
1036:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
1037:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1780              		.loc 1 1037 0
 1781 0008 D0F84435 		ldr	r3, [r0, #1348]
 1782 000c DA69     		ldr	r2, [r3, #28]
 1783              	.LVL245:
1038:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1784              		.loc 1 1038 0
 1785 000e D0F88875 		ldr	r7, [r0, #1416]
 1786              	.LVL246:
1039:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
1040:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if(MTP_Handle->is_ready)
 1787              		.loc 1 1040 0
 1788 0012 42F2CC13 		movw	r3, #8652
 1789 0016 D358     		ldr	r3, [r2, r3]
 1790 0018 6BB9     		cbnz	r3, .L132
1036:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1791              		.loc 1 1036 0
 1792 001a 0220     		movs	r0, #2
 1793              	.LVL247:
 1794 001c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1795              	.LVL248:
 1796              	.L134:
1041:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {   
1042:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetDevicePropDesc (phost, propcode, devicepropertydesc)) == USBH_BUSY
1043:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
1044:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if(((phost->Timer - timeout) >  5000) || (phost->device.is_connected == 0))  
 1797              		.loc 1 1044 0
 1798 001e D4F88835 		ldr	r3, [r4, #1416]
 1799 0022 DB1B     		subs	r3, r3, r7
 1800 0024 41F28832 		movw	r2, #5000
 1801 0028 9342     		cmp	r3, r2
 1802 002a 0CD8     		bhi	.L135
 1803              		.loc 1 1044 0 is_stmt 0 discriminator 1
 1804 002c 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1805 0030 13F0FF0F 		tst	r3, #255
 1806 0034 09D0     		beq	.L136
 1807              	.LVL249:
 1808              	.L132:
1042:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1809              		.loc 1 1042 0 is_stmt 1
ARM GAS  /tmp/ccqZ2XVC.s 			page 52


 1810 0036 2A46     		mov	r2, r5
 1811 0038 3146     		mov	r1, r6
 1812 003a 2046     		mov	r0, r4
 1813 003c FFF7FEFF 		bl	USBH_PTP_GetDevicePropDesc
 1814              	.LVL250:
 1815 0040 0128     		cmp	r0, #1
 1816 0042 ECD0     		beq	.L134
 1817 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1818              	.LVL251:
 1819              	.L135:
1045:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
1046:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1820              		.loc 1 1046 0
 1821 0046 0220     		movs	r0, #2
 1822              	.LVL252:
 1823 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1824              	.LVL253:
 1825              	.L136:
 1826 004a 0220     		movs	r0, #2
 1827              	.LVL254:
1047:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
1048:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
1049:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
1050:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
1051:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1828              		.loc 1 1051 0
 1829 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1830              		.cfi_endproc
 1831              	.LFE148:
 1833 004e 00BF     		.section	.text.USBH_MTP_EventsCallback,"ax",%progbits
 1834              		.align	2
 1835              		.weak	USBH_MTP_EventsCallback
 1836              		.thumb
 1837              		.thumb_func
 1839              	USBH_MTP_EventsCallback:
 1840              	.LFB149:
1052:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
1053:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  The function informs that host has received an event
1054:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *  @param  pdev: Selected device
1055:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval None
1056:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
1057:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** __weak void USBH_MTP_EventsCallback(USBH_HandleTypeDef *phost, uint32_t event, uint32_t param)
1058:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1841              		.loc 1 1058 0
 1842              		.cfi_startproc
 1843              		@ args = 0, pretend = 0, frame = 0
 1844              		@ frame_needed = 0, uses_anonymous_args = 0
 1845              		@ link register save eliminated.
 1846              	.LVL255:
 1847 0000 7047     		bx	lr
 1848              		.cfi_endproc
 1849              	.LFE149:
 1851 0002 00BF     		.section	.text.MTP_DecodeEvent,"ax",%progbits
 1852              		.align	2
 1853              		.thumb
 1854              		.thumb_func
 1856              	MTP_DecodeEvent:
ARM GAS  /tmp/ccqZ2XVC.s 			page 53


 1857              	.LFB147:
 946:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 1858              		.loc 1 946 0
 1859              		.cfi_startproc
 1860              		@ args = 0, pretend = 0, frame = 0
 1861              		@ frame_needed = 0, uses_anonymous_args = 0
 1862              	.LVL256:
 946:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 1863              		.loc 1 946 0
 1864 0000 08B5     		push	{r3, lr}
 1865              	.LCFI28:
 1866              		.cfi_def_cfa_offset 8
 1867              		.cfi_offset 3, -8
 1868              		.cfi_offset 14, -4
 947:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   
 1869              		.loc 1 947 0
 1870 0002 D0F84435 		ldr	r3, [r0, #1348]
 1871 0006 DB69     		ldr	r3, [r3, #28]
 1872              	.LVL257:
1021:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1873              		.loc 1 1021 0
 1874 0008 41F65452 		movw	r2, #7508
 1875 000c 9A58     		ldr	r2, [r3, r2]
 1876 000e 41F64E51 		movw	r1, #7502
 1877 0012 595A     		ldrh	r1, [r3, r1]
 1878 0014 FFF7FEFF 		bl	USBH_MTP_EventsCallback
 1879              	.LVL258:
 1880 0018 08BD     		pop	{r3, pc}
 1881              		.cfi_endproc
 1882              	.LFE147:
 1884 001a 00BF     		.section	.text.USBH_MTP_Events,"ax",%progbits
 1885              		.align	2
 1886              		.thumb
 1887              		.thumb_func
 1889              	USBH_MTP_Events:
 1890              	.LFB146:
 894:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_BUSY ;
 1891              		.loc 1 894 0
 1892              		.cfi_startproc
 1893              		@ args = 0, pretend = 0, frame = 0
 1894              		@ frame_needed = 0, uses_anonymous_args = 0
 1895              	.LVL259:
 1896 0000 38B5     		push	{r3, r4, r5, lr}
 1897              	.LCFI29:
 1898              		.cfi_def_cfa_offset 16
 1899              		.cfi_offset 3, -16
 1900              		.cfi_offset 4, -12
 1901              		.cfi_offset 5, -8
 1902              		.cfi_offset 14, -4
 1903 0002 0546     		mov	r5, r0
 1904              	.LVL260:
 896:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  
 1905              		.loc 1 896 0
 1906 0004 D0F84435 		ldr	r3, [r0, #1348]
 1907 0008 DC69     		ldr	r4, [r3, #28]
 1908              	.LVL261:
 899:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
ARM GAS  /tmp/ccqZ2XVC.s 			page 54


 1909              		.loc 1 899 0
 1910 000a 41F63C53 		movw	r3, #7484
 1911 000e E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1912 0010 13B1     		cbz	r3, .L143
 1913 0012 012B     		cmp	r3, #1
 1914 0014 1AD0     		beq	.L144
 1915 0016 3FE0     		b	.L142
 1916              	.L143:
 902:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1917              		.loc 1 902 0
 1918 0018 D0F88835 		ldr	r3, [r0, #1416]
 1919 001c 13F0010F 		tst	r3, #1
 1920 0020 3AD1     		bne	.L142
 904:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_InterruptReceiveData(phost, 
 1921              		.loc 1 904 0
 1922 0022 D0F88825 		ldr	r2, [r0, #1416]
 1923 0026 04F5EA53 		add	r3, r4, #7488
 1924 002a 1A60     		str	r2, [r3]
 905:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 (uint8_t *)&(MTP_Handle->events.container),
 1925              		.loc 1 905 0
 1926 002c 41F62E53 		movw	r3, #7470
 1927 0030 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1928 0032 41F63652 		movw	r2, #7478
 1929 0036 A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 1930 0038 04F5EA51 		add	r1, r4, #7488
 1931 003c 0831     		adds	r1, r1, #8
 1932 003e FFF7FEFF 		bl	USBH_InterruptReceiveData
 1933              	.LVL262:
 911:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 1934              		.loc 1 911 0
 1935 0042 0122     		movs	r2, #1
 1936 0044 41F63C53 		movw	r3, #7484
 1937 0048 E254     		strb	r2, [r4, r3]
 1938 004a 25E0     		b	.L142
 1939              	.LVL263:
 1940              	.L144:
 915:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1941              		.loc 1 915 0
 1942 004c 41F62E53 		movw	r3, #7470
 1943 0050 E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 1944 0052 FFF7FEFF 		bl	USBH_LL_GetURBState
 1945              	.LVL264:
 1946 0056 0128     		cmp	r0, #1
 1947 0058 02D1     		bne	.L145
 917:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 1948              		.loc 1 917 0
 1949 005a 2846     		mov	r0, r5
 1950 005c FFF7FEFF 		bl	MTP_DecodeEvent
 1951              	.LVL265:
 1952              	.L145:
 920:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 1953              		.loc 1 920 0
 1954 0060 D5F88835 		ldr	r3, [r5, #1416]
 1955 0064 04F5EA52 		add	r2, r4, #7488
 1956 0068 1268     		ldr	r2, [r2]
 1957 006a 9B1A     		subs	r3, r3, r2
 1958 006c 41F64452 		movw	r2, #7492
ARM GAS  /tmp/ccqZ2XVC.s 			page 55


 1959 0070 A25A     		ldrh	r2, [r4, r2]
 1960 0072 9342     		cmp	r3, r2
 1961 0074 10D3     		bcc	.L142
 922:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       
 1962              		.loc 1 922 0
 1963 0076 D5F88825 		ldr	r2, [r5, #1416]
 1964 007a 04F5EA53 		add	r3, r4, #7488
 1965 007e 1A60     		str	r2, [r3]
 924:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                 (uint8_t *)&(MTP_Handle->events.container),
 1966              		.loc 1 924 0
 1967 0080 41F62E53 		movw	r3, #7470
 1968 0084 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1969 0086 41F63652 		movw	r2, #7478
 1970 008a A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 1971 008c 04F5EA51 		add	r1, r4, #7488
 1972 0090 0831     		adds	r1, r1, #8
 1973 0092 2846     		mov	r0, r5
 1974 0094 FFF7FEFF 		bl	USBH_InterruptReceiveData
 1975              	.LVL266:
 1976              	.L142:
 937:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 1977              		.loc 1 937 0
 1978 0098 0120     		movs	r0, #1
 1979 009a 38BD     		pop	{r3, r4, r5, pc}
 1980              		.cfi_endproc
 1981              	.LFE146:
 1983              		.section	.text.USBH_MTP_Process,"ax",%progbits
 1984              		.align	2
 1985              		.thumb
 1986              		.thumb_func
 1988              	USBH_MTP_Process:
 1989              	.LFB130:
 389:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 1990              		.loc 1 389 0
 1991              		.cfi_startproc
 1992              		@ args = 0, pretend = 0, frame = 0
 1993              		@ frame_needed = 0, uses_anonymous_args = 0
 1994              	.LVL267:
 1995 0000 70B5     		push	{r4, r5, r6, lr}
 1996              	.LCFI30:
 1997              		.cfi_def_cfa_offset 16
 1998              		.cfi_offset 4, -16
 1999              		.cfi_offset 5, -12
 2000              		.cfi_offset 6, -8
 2001              		.cfi_offset 14, -4
 2002 0002 0546     		mov	r5, r0
 2003              	.LVL268:
 391:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t idx = 0;
 2004              		.loc 1 391 0
 2005 0004 D0F84435 		ldr	r3, [r0, #1348]
 2006 0008 DC69     		ldr	r4, [r3, #28]
 2007              	.LVL269:
 394:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 2008              		.loc 1 394 0
 2009 000a 41F63853 		movw	r3, #7480
 2010 000e E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2011 0010 052B     		cmp	r3, #5
ARM GAS  /tmp/ccqZ2XVC.s 			page 56


 2012 0012 66D8     		bhi	.L157
 2013 0014 DFE803F0 		tbb	[pc, r3]
 2014              	.L150:
 2015 0018 61       		.byte	(.L149-.L150)/2
 2016 0019 0E       		.byte	(.L151-.L150)/2
 2017 001a 03       		.byte	(.L152-.L150)/2
 2018 001b 65       		.byte	(.L157-.L150)/2
 2019 001c 19       		.byte	(.L153-.L150)/2
 2020 001d 30       		.byte	(.L154-.L150)/2
 2021              		.p2align 1
 2022              	.L152:
 398:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 2023              		.loc 1 398 0
 2024 001e 0121     		movs	r1, #1
 2025 0020 FFF7FEFF 		bl	USBH_PTP_OpenSession
 2026              	.LVL270:
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2027              		.loc 1 400 0
 2028 0024 0646     		mov	r6, r0
 2029 0026 0028     		cmp	r0, #0
 2030 0028 5CD1     		bne	.L148
 403:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 2031              		.loc 1 403 0
 2032 002a 0122     		movs	r2, #1
 2033 002c 41F63853 		movw	r3, #7480
 2034 0030 E254     		strb	r2, [r4, r3]
 2035 0032 57E0     		b	.L148
 2036              	.LVL271:
 2037              	.L151:
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 2038              		.loc 1 411 0
 2039 0034 2146     		mov	r1, r4
 2040 0036 FFF7FEFF 		bl	USBH_PTP_GetDeviceInfo
 2041              	.LVL272:
 413:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2042              		.loc 1 413 0
 2043 003a 0646     		mov	r6, r0
 2044 003c 0028     		cmp	r0, #0
 2045 003e 51D1     		bne	.L148
 427:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 2046              		.loc 1 427 0
 2047 0040 0422     		movs	r2, #4
 2048 0042 41F63853 		movw	r3, #7480
 2049 0046 E254     		strb	r2, [r4, r3]
 2050 0048 4CE0     		b	.L148
 2051              	.LVL273:
 2052              	.L153:
 435:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     
 2053              		.loc 1 435 0
 2054 004a 04F60411 		addw	r1, r4, #2308
 2055 004e FFF7FEFF 		bl	USBH_PTP_GetStorageIds
 2056              	.LVL274:
 437:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2057              		.loc 1 437 0
 2058 0052 0646     		mov	r6, r0
 2059 0054 10B1     		cbz	r0, .L158
 2060 0056 45E0     		b	.L148
ARM GAS  /tmp/ccqZ2XVC.s 			page 57


 2061              	.LVL275:
 2062              	.L156:
 440:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 2063              		.loc 1 440 0 discriminator 3
 2064 0058 0133     		adds	r3, r3, #1
 2065              	.LVL276:
 2066 005a 00E0     		b	.L155
 2067              	.LVL277:
 2068              	.L158:
 2069 005c 0023     		movs	r3, #0
 2070              	.LVL278:
 2071              	.L155:
 440:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 2072              		.loc 1 440 0 is_stmt 0 discriminator 1
 2073 005e D4F80429 		ldr	r2, [r4, #2308]
 2074 0062 9342     		cmp	r3, r2
 2075 0064 F8D3     		bcc	.L156
 445:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       MTP_Handle->state = MTP_GETSTORAGEINFO;
 2076              		.loc 1 445 0 is_stmt 1
 2077 0066 0022     		movs	r2, #0
 2078 0068 42F2C813 		movw	r3, #8648
 2079              	.LVL279:
 2080 006c E250     		str	r2, [r4, r3]
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 2081              		.loc 1 446 0
 2082 006e 0522     		movs	r2, #5
 2083 0070 41F63853 		movw	r3, #7480
 2084 0074 E254     		strb	r2, [r4, r3]
 2085 0076 35E0     		b	.L148
 2086              	.LVL280:
 2087              	.L154:
 455:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                       &((MTP_Handle->info.storinfo)[MTP_Handle->current_storage_uni
 2088              		.loc 1 455 0
 2089 0078 42F2C813 		movw	r3, #8648
 2090 007c E358     		ldr	r3, [r4, r3]
 454:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                       MTP_Handle->info.storids.Storage[MTP_Handle->current_storage_
 2091              		.loc 1 454 0
 2092 007e 03F51071 		add	r1, r3, #576
 2093 0082 04EB8101 		add	r1, r4, r1, lsl #2
 2094 0086 03EB0313 		add	r3, r3, r3, lsl #4
 2095 008a 5A01     		lsls	r2, r3, #5
 2096 008c 02F51262 		add	r2, r2, #2336
 2097 0090 2244     		add	r2, r2, r4
 2098 0092 8968     		ldr	r1, [r1, #8]
 2099 0094 FFF7FEFF 		bl	USBH_PTP_GetStorageInfo
 2100              	.LVL281:
 458:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2101              		.loc 1 458 0
 2102 0098 0646     		mov	r6, r0
 2103 009a 18BB     		cbnz	r0, .L148
 463:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 2104              		.loc 1 463 0
 2105 009c 42F2C812 		movw	r2, #8648
 2106 00a0 A358     		ldr	r3, [r4, r2]
 2107 00a2 0133     		adds	r3, r3, #1
 2108 00a4 A350     		str	r3, [r4, r2]
 2109 00a6 D4F80429 		ldr	r2, [r4, #2308]
ARM GAS  /tmp/ccqZ2XVC.s 			page 58


 2110 00aa 9342     		cmp	r3, r2
 2111 00ac 1AD3     		bcc	.L148
 465:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->is_ready = 1;
 2112              		.loc 1 465 0
 2113 00ae 0023     		movs	r3, #0
 2114 00b0 41F63852 		movw	r2, #7480
 2115 00b4 A354     		strb	r3, [r4, r2]
 466:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->current_storage_unit = 0;
 2116              		.loc 1 466 0
 2117 00b6 0121     		movs	r1, #1
 2118 00b8 42F2CC12 		movw	r2, #8652
 2119 00bc A150     		str	r1, [r4, r2]
 467:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->params.CurrentStorageId = MTP_Handle->info.storids.Storage[0];
 2120              		.loc 1 467 0
 2121 00be 42F2C812 		movw	r2, #8648
 2122 00c2 A350     		str	r3, [r4, r2]
 468:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         
 2123              		.loc 1 468 0
 2124 00c4 D4F80829 		ldr	r2, [r4, #2312]
 2125 00c8 41F61853 		movw	r3, #7448
 2126 00cc E250     		str	r2, [r4, r3]
 472:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 2127              		.loc 1 472 0
 2128 00ce D5F89435 		ldr	r3, [r5, #1428]
 2129 00d2 0221     		movs	r1, #2
 2130 00d4 2846     		mov	r0, r5
 2131              	.LVL282:
 2132 00d6 9847     		blx	r3
 2133              	.LVL283:
 2134 00d8 04E0     		b	.L148
 2135              	.LVL284:
 2136              	.L149:
 481:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1)
 2137              		.loc 1 481 0
 2138 00da FFF7FEFF 		bl	USBH_MTP_Events
 2139              	.LVL285:
 487:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     break;
 2140              		.loc 1 487 0
 2141 00de 0026     		movs	r6, #0
 2142 00e0 00E0     		b	.L148
 2143              	.LVL286:
 2144              	.L157:
 2145 00e2 0026     		movs	r6, #0
 2146              	.LVL287:
 2147              	.L148:
 491:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 2148              		.loc 1 491 0
 2149 00e4 3046     		mov	r0, r6
 2150 00e6 70BD     		pop	{r4, r5, r6, pc}
 2151              		.cfi_endproc
 2152              	.LFE130:
 2154              		.global	MTP_Class
 2155              		.section	.rodata.str1.4,"aMS",%progbits,1
 2156              		.align	2
 2157              	.LC0:
 2158 0000 4D545000 		.ascii	"MTP\000"
 2159              		.section	.data.MTP_Class,"aw",%progbits
ARM GAS  /tmp/ccqZ2XVC.s 			page 59


 2160              		.align	2
 2163              	MTP_Class:
 2164 0000 00000000 		.word	.LC0
 2165 0004 06       		.byte	6
 2166 0005 000000   		.space	3
 2167 0008 00000000 		.word	USBH_MTP_InterfaceInit
 2168 000c 00000000 		.word	USBH_MTP_InterfaceDeInit
 2169 0010 00000000 		.word	USBH_MTP_ClassRequest
 2170 0014 00000000 		.word	USBH_MTP_Process
 2171 0018 00000000 		.word	USBH_MTP_SOFProcess
 2172 001c 00000000 		.word	0
 2173              		.text
 2174              	.Letext0:
 2175              		.file 2 "/home/ada/Downloads/gcc-arm-none-eabi-5_4-2016q3/arm-none-eabi/include/machine/_default_t
 2176              		.file 3 "/home/ada/Downloads/gcc-arm-none-eabi-5_4-2016q3/arm-none-eabi/include/sys/_stdint.h"
 2177              		.file 4 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 2178              		.file 5 "Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Inc/usbh_mtp_ptp.h"
 2179              		.file 6 "Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Inc/usbh_mtp.h"
 2180              		.file 7 "Drivers/CMSIS/Include/core_cm4.h"
 2181              		.file 8 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_pipes.h"
 2182              		.file 9 "/home/ada/Downloads/gcc-arm-none-eabi-5_4-2016q3/arm-none-eabi/include/stdlib.h"
 2183              		.file 10 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_core.h"
 2184              		.file 11 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_ioreq.h"
ARM GAS  /tmp/ccqZ2XVC.s 			page 60


DEFINED SYMBOLS
                            *ABS*:00000000 usbh_mtp.c
     /tmp/ccqZ2XVC.s:22     .text.MTP_FindCtlEndpoint:00000000 $t
     /tmp/ccqZ2XVC.s:26     .text.MTP_FindCtlEndpoint:00000000 MTP_FindCtlEndpoint
     /tmp/ccqZ2XVC.s:134    .text.MTP_FindDataOutEndpoint:00000000 $t
     /tmp/ccqZ2XVC.s:138    .text.MTP_FindDataOutEndpoint:00000000 MTP_FindDataOutEndpoint
     /tmp/ccqZ2XVC.s:244    .text.MTP_FindDataInEndpoint:00000000 $t
     /tmp/ccqZ2XVC.s:248    .text.MTP_FindDataInEndpoint:00000000 MTP_FindDataInEndpoint
     /tmp/ccqZ2XVC.s:354    .text.USBH_MTP_ClassRequest:00000000 $t
     /tmp/ccqZ2XVC.s:358    .text.USBH_MTP_ClassRequest:00000000 USBH_MTP_ClassRequest
     /tmp/ccqZ2XVC.s:374    .text.USBH_MTP_SOFProcess:00000000 $t
     /tmp/ccqZ2XVC.s:378    .text.USBH_MTP_SOFProcess:00000000 USBH_MTP_SOFProcess
     /tmp/ccqZ2XVC.s:394    .text.USBH_MTP_InterfaceDeInit:00000000 $t
     /tmp/ccqZ2XVC.s:398    .text.USBH_MTP_InterfaceDeInit:00000000 USBH_MTP_InterfaceDeInit
     /tmp/ccqZ2XVC.s:489    .text.USBH_MTP_InterfaceInit:00000000 $t
     /tmp/ccqZ2XVC.s:493    .text.USBH_MTP_InterfaceInit:00000000 USBH_MTP_InterfaceInit
     /tmp/ccqZ2XVC.s:703    .text.USBH_MTP_IsReady:00000000 $t
     /tmp/ccqZ2XVC.s:708    .text.USBH_MTP_IsReady:00000000 USBH_MTP_IsReady
     /tmp/ccqZ2XVC.s:729    .text.USBH_MTP_GetNumStorage:00000000 $t
     /tmp/ccqZ2XVC.s:734    .text.USBH_MTP_GetNumStorage:00000000 USBH_MTP_GetNumStorage
     /tmp/ccqZ2XVC.s:770    .text.USBH_MTP_SelectStorage:00000000 $t
     /tmp/ccqZ2XVC.s:775    .text.USBH_MTP_SelectStorage:00000000 USBH_MTP_SelectStorage
     /tmp/ccqZ2XVC.s:823    .text.USBH_MTP_GetStorageInfo:00000000 $t
     /tmp/ccqZ2XVC.s:828    .text.USBH_MTP_GetStorageInfo:00000000 USBH_MTP_GetStorageInfo
     /tmp/ccqZ2XVC.s:883    .text.USBH_MTP_GetNumObjects:00000000 $t
     /tmp/ccqZ2XVC.s:888    .text.USBH_MTP_GetNumObjects:00000000 USBH_MTP_GetNumObjects
     /tmp/ccqZ2XVC.s:989    .text.USBH_MTP_GetObjectHandles:00000000 $t
     /tmp/ccqZ2XVC.s:994    .text.USBH_MTP_GetObjectHandles:00000000 USBH_MTP_GetObjectHandles
     /tmp/ccqZ2XVC.s:1095   .text.USBH_MTP_GetObjectInfo:00000000 $t
     /tmp/ccqZ2XVC.s:1100   .text.USBH_MTP_GetObjectInfo:00000000 USBH_MTP_GetObjectInfo
     /tmp/ccqZ2XVC.s:1174   .text.USBH_MTP_DeleteObject:00000000 $t
     /tmp/ccqZ2XVC.s:1179   .text.USBH_MTP_DeleteObject:00000000 USBH_MTP_DeleteObject
     /tmp/ccqZ2XVC.s:1253   .text.USBH_MTP_GetObject:00000000 $t
     /tmp/ccqZ2XVC.s:1258   .text.USBH_MTP_GetObject:00000000 USBH_MTP_GetObject
     /tmp/ccqZ2XVC.s:1332   .text.USBH_MTP_GetPartialObject:00000000 $t
     /tmp/ccqZ2XVC.s:1337   .text.USBH_MTP_GetPartialObject:00000000 USBH_MTP_GetPartialObject
     /tmp/ccqZ2XVC.s:1427   .text.USBH_MTP_GetObjectPropsSupported:00000000 $t
     /tmp/ccqZ2XVC.s:1432   .text.USBH_MTP_GetObjectPropsSupported:00000000 USBH_MTP_GetObjectPropsSupported
     /tmp/ccqZ2XVC.s:1509   .text.USBH_MTP_GetObjectPropDesc:00000000 $t
     /tmp/ccqZ2XVC.s:1514   .text.USBH_MTP_GetObjectPropDesc:00000000 USBH_MTP_GetObjectPropDesc
     /tmp/ccqZ2XVC.s:1591   .text.USBH_MTP_GetObjectPropList:00000000 $t
     /tmp/ccqZ2XVC.s:1596   .text.USBH_MTP_GetObjectPropList:00000000 USBH_MTP_GetObjectPropList
     /tmp/ccqZ2XVC.s:1673   .text.USBH_MTP_SendObject:00000000 $t
     /tmp/ccqZ2XVC.s:1678   .text.USBH_MTP_SendObject:00000000 USBH_MTP_SendObject
     /tmp/ccqZ2XVC.s:1755   .text.USBH_MTP_GetDevicePropDesc:00000000 $t
     /tmp/ccqZ2XVC.s:1760   .text.USBH_MTP_GetDevicePropDesc:00000000 USBH_MTP_GetDevicePropDesc
     /tmp/ccqZ2XVC.s:1834   .text.USBH_MTP_EventsCallback:00000000 $t
     /tmp/ccqZ2XVC.s:1839   .text.USBH_MTP_EventsCallback:00000000 USBH_MTP_EventsCallback
     /tmp/ccqZ2XVC.s:1852   .text.MTP_DecodeEvent:00000000 $t
     /tmp/ccqZ2XVC.s:1856   .text.MTP_DecodeEvent:00000000 MTP_DecodeEvent
     /tmp/ccqZ2XVC.s:1885   .text.USBH_MTP_Events:00000000 $t
     /tmp/ccqZ2XVC.s:1889   .text.USBH_MTP_Events:00000000 USBH_MTP_Events
     /tmp/ccqZ2XVC.s:1984   .text.USBH_MTP_Process:00000000 $t
     /tmp/ccqZ2XVC.s:1988   .text.USBH_MTP_Process:00000000 USBH_MTP_Process
     /tmp/ccqZ2XVC.s:2015   .text.USBH_MTP_Process:00000018 $d
     /tmp/ccqZ2XVC.s:2021   .text.USBH_MTP_Process:0000001e $t
     /tmp/ccqZ2XVC.s:2163   .data.MTP_Class:00000000 MTP_Class
ARM GAS  /tmp/ccqZ2XVC.s 			page 61


     /tmp/ccqZ2XVC.s:2156   .rodata.str1.4:00000000 $d
     /tmp/ccqZ2XVC.s:2160   .data.MTP_Class:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
USBH_ClosePipe
USBH_FreePipe
free
USBH_FindInterface
USBH_SelectInterface
malloc
USBH_AllocPipe
USBH_OpenPipe
USBH_LL_SetToggle
USBH_PTP_Init
memcpy
USBH_PTP_GetNumObjects
USBH_PTP_GetObjectHandles
USBH_PTP_GetObjectInfo
USBH_PTP_DeleteObject
USBH_PTP_GetObject
USBH_PTP_GetPartialObject
USBH_PTP_GetObjectPropsSupported
USBH_PTP_GetObjectPropDesc
USBH_PTP_GetObjectPropList
USBH_PTP_SendObject
USBH_PTP_GetDevicePropDesc
USBH_InterruptReceiveData
USBH_LL_GetURBState
USBH_PTP_OpenSession
USBH_PTP_GetDeviceInfo
USBH_PTP_GetStorageIds
USBH_PTP_GetStorageInfo
