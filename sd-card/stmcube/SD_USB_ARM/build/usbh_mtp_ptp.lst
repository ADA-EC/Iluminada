ARM GAS  /tmp/ccSoqm0V.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"usbh_mtp_ptp.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.PTP_GetString,"ax",%progbits
  22              		.align	2
  23              		.thumb
  24              		.thumb_func
  26              	PTP_GetString:
  27              	.LFB136:
  28              		.file 1 "Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c"
   1:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
   2:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   ******************************************************************************
   3:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @file    usbh_mtp_ptp.c 
   4:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @author  MCD Application Team
   5:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @version V3.2.2
   6:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @date    07-July-2015
   7:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief   This file includes the PTP operations layer
   8:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   ******************************************************************************
   9:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @attention
  10:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *
  11:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * <h2><center>&copy; COPYRIGHT 2015 STMicroelectronics</center></h2>
  12:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *
  13:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  14:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * You may not use this file except in compliance with the License.
  15:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * You may obtain a copy of the License at:
  16:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *
  17:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *        http://www.st.com/software_license_agreement_liberty_v2
  18:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *
  19:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * Unless required by applicable law or agreed to in writing, software 
  20:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * distributed under the License is distributed on an "AS IS" BASIS, 
  21:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  22:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * See the License for the specific language governing permissions and
  23:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * limitations under the License.
  24:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *
  25:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   ******************************************************************************
  26:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */ 
  27:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  28:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /* Includes ------------------------------------------------------------------*/
  29:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #include "usbh_mtp_ptp.h"
  30:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #include "usbh_mtp.h"
ARM GAS  /tmp/ccSoqm0V.s 			page 2


  31:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @addtogroup USBH_LIB
  32:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  33:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */
  34:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  35:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @addtogroup USBH_CLASS
  36:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  37:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */
  38:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  39:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @addtogroup USBH_MTP_CLASS
  40:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  41:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */
  42:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  43:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP
  44:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @brief    This file includes the mass storage related functions
  45:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  46:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  47:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  48:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  49:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP_Private_TypesDefinitions
  50:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  51:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  52:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
  53:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @}
  54:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  55:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  56:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP_Private_Defines
  57:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  58:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  59:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
  60:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @}
  61:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  62:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  63:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP_Private_Macros
  64:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  65:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  66:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
  67:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @}
  68:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  69:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  70:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  71:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP_Private_Variables
  72:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  73:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  74:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  75:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
  76:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @}
  77:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  78:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  79:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  80:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP_Private_FunctionPrototypes
  81:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
  82:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
  83:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_DecodeDeviceInfo (USBH_HandleTypeDef *phost, PTP_DeviceInfoTypedef *dev_info);
  84:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetStorageIDs (USBH_HandleTypeDef *phost, PTP_StorageIDsTypedef *stor_ids);
  85:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetStorageInfo (USBH_HandleTypeDef *phost, uint32_t storage_id, PTP_StorageInfoType
  86:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetObjectPropDesc (USBH_HandleTypeDef *phost, PTP_ObjectPropDescTypeDef *opd, uint3
  87:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_DecodeDeviceInfo (USBH_HandleTypeDef *phost, PTP_DeviceInfoTypedef *dev_info);
ARM GAS  /tmp/ccSoqm0V.s 			page 3


  88:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetDevicePropValue(USBH_HandleTypeDef *phost, 
  89:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    uint32_t *offset, 
  90:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    uint32_t total, 
  91:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    PTP_PropertyValueTypedef* value, 
  92:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    uint16_t datatype);
  93:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  94:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static uint32_t PTP_GetObjectPropList (USBH_HandleTypeDef *phost, 
  95:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                        MTP_PropertiesTypedef *props, 
  96:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                        uint32_t len);
  97:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  98:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
  99:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_BufferFullCallback(USBH_HandleTypeDef *phost);
 100:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetString(uint8_t *str, uint8_t* data, uint16_t *len);
 101:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static uint32_t PTP_GetArray16 (uint16_t *array, uint8_t *data, uint32_t offset);
 102:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static uint32_t PTP_GetArray32 (uint32_t *array, uint8_t *data, uint32_t offset);
 103:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 104:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @}
 105:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
 106:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 107:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 108:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP_Exported_Variables
 109:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
 110:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
 111:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 112:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @}
 113:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
 114:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 115:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 116:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /** @defgroup USBH_MTP_PTP_Private_Functions
 117:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** * @{
 118:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** */ 
 119:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 120:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_Init 
 121:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         The function Initializes the BOT protocol.
 122:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 123:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
 124:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 125:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_Init(USBH_HandleTypeDef *phost)
 126:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 127:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 128:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 129:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   /* Set state to idle to be ready for operations */
 130:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.state = PTP_IDLE;
 131:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.req_state = PTP_REQ_SEND;
 132:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 133:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return USBH_OK;
 134:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 135:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 136:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 137:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_Process 
 138:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         The function handle the BOT protocol.
 139:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 140:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  lun: Logical Unit Number
 141:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
 142:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 143:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_Process (USBH_HandleTypeDef *phost)
 144:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
ARM GAS  /tmp/ccSoqm0V.s 			page 4


 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY;
 146:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 147:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 148:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;  
 149:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t  len;
 150:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 151:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch (MTP_Handle->ptp.state)
 152:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 153:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_IDLE:
 154:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /*Do Nothing */
 155:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 156:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 157:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OP_REQUEST_STATE:  
 158:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_BulkSendData (phost,
 159:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        (uint8_t*)&(MTP_Handle->ptp.op_container),
 160:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        MTP_Handle->ptp.op_container.length, 
 161:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        MTP_Handle->DataOutPipe,
 162:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        1);
 163:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_WAIT_STATE;
 164:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 165:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 166:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OP_REQUEST_WAIT_STATE:
 167:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     URB_Status = USBH_LL_GetURBState(phost, MTP_Handle->DataOutPipe);
 168:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 169:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(URB_Status == USBH_URB_DONE)
 170:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 171:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        if(MTP_Handle->ptp.flags == PTP_DP_NODATA)
 172:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 173:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****          MTP_Handle->ptp.state = PTP_RESPONSE_STATE;
 174:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 175:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        else  if(MTP_Handle->ptp.flags == PTP_DP_SENDDATA)
 176:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 177:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****          MTP_Handle->ptp.state = PTP_DATA_OUT_PHASE_STATE;
 178:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 179:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        else  if(MTP_Handle->ptp.flags == PTP_DP_GETDATA)
 180:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 181:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****          MTP_Handle->ptp.state = PTP_DATA_IN_PHASE_STATE;
 182:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 183:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 184:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 185:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif  
 186:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 187:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     else if(URB_Status == USBH_URB_NOTREADY)
 188:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 189:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       /* Resend Request */
 190:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 191:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 192:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 193:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif       
 194:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }     
 195:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     else if(URB_Status == USBH_URB_STALL)
 196:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       MTP_Handle->ptp.state  = PTP_ERROR;
 198:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 199:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****      osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 200:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif 
 201:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
ARM GAS  /tmp/ccSoqm0V.s 			page 5


 202:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 203:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 204:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DATA_OUT_PHASE_STATE:
 205:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 206:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_BulkSendData (phost,
 207:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        MTP_Handle->ptp.data_ptr,
 208:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        MTP_Handle->DataOutEpSize , 
 209:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        MTP_Handle->DataOutPipe,
 210:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        1);
 211:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 212:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 213:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state  = PTP_DATA_OUT_PHASE_WAIT_STATE;    
 214:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 215:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 216:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DATA_OUT_PHASE_WAIT_STATE:
 217:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     URB_Status = USBH_LL_GetURBState(phost, MTP_Handle->DataOutPipe);     
 218:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 219:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(URB_Status == USBH_URB_DONE)
 220:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 221:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       /* Adjust Data pointer and data length */
 222:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       if(MTP_Handle->ptp.data_length > MTP_Handle->DataOutEpSize)
 223:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 224:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_ptr += MTP_Handle->DataOutEpSize;
 225:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_length -= MTP_Handle->DataOutEpSize; 
 226:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_packet += MTP_Handle->DataOutEpSize;
 227:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
 228:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         if(MTP_Handle->ptp.data_packet >= PTP_USB_BULK_PAYLOAD_LEN_READ)
 229:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         {
 230:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           PTP_BufferFullCallback (phost);
 231:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.data_packet = 0;
 232:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.iteration++;            
 233:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         }
 234:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
 235:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }
 236:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       else
 237:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 238:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_length = 0;
 239:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       } 
 240:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 241:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       /* More Data To be Sent */
 242:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       if(MTP_Handle->ptp.data_length > 0)
 243:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 244:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         USBH_BulkSendData (phost,
 245:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                            MTP_Handle->ptp.data_ptr,
 246:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                            MTP_Handle->DataOutEpSize , 
 247:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                            MTP_Handle->DataOutPipe,
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                            1);
 249:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }
 250:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       else
 251:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 252:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         /* If value was 0, and successful transfer, then change the state */
 253:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.state  = PTP_RESPONSE_STATE;
 254:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }  
 255:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 256:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 257:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif       
 258:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
ARM GAS  /tmp/ccSoqm0V.s 			page 6


 259:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 260:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     else if(URB_Status == USBH_URB_NOTREADY)
 261:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 262:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       /* Resend same data */      
 263:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       MTP_Handle->ptp.state = PTP_DATA_OUT_PHASE_STATE;
 264:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 265:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 266:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif       
 267:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 268:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 269:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     else if(URB_Status == USBH_URB_STALL)
 270:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 271:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       MTP_Handle->ptp.state  = PTP_ERROR;    
 272:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 273:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 274:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif       
 275:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 276:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 277:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 278:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DATA_IN_PHASE_STATE:
 279:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Send first packet */        
 280:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_BulkReceiveData (phost,
 281:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           MTP_Handle->ptp.data_ptr, 
 282:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           MTP_Handle->DataInEpSize, 
 283:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           MTP_Handle->DataInPipe);
 284:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 285:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state  = PTP_DATA_IN_PHASE_WAIT_STATE;    
 286:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 287:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 288:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DATA_IN_PHASE_WAIT_STATE:
 289:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     URB_Status = USBH_LL_GetURBState(phost, MTP_Handle->DataInPipe);
 290:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 291:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(URB_Status == USBH_URB_DONE)
 292:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 293:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       len = USBH_LL_GetLastXferSize (phost, MTP_Handle->DataInPipe);
 294:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 295:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       if( MTP_Handle->ptp.data_packet_counter++ == 0)
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 297:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         /* This is the first packet; so retrieve exact data length from payload */ 
 298:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_length = *(uint32_t*)(MTP_Handle->ptp.data_ptr);
 299:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.iteration = 0;
 300:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }
 301:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 302:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       if((len >=  MTP_Handle->DataInEpSize) && (MTP_Handle->ptp.data_length > 0))
 303:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 304:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_ptr += len;
 305:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_length -= len;
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_packet += len;
 307:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 308:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         if(MTP_Handle->ptp.data_packet >= PTP_USB_BULK_PAYLOAD_LEN_READ)
 309:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         {
 310:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           PTP_BufferFullCallback (phost);
 311:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.data_packet = 0;
 312:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.iteration++;            
 313:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         }
 314:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
 315:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         /* Continue receiving data*/        
ARM GAS  /tmp/ccSoqm0V.s 			page 7


 316:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         USBH_BulkReceiveData (phost,
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                               MTP_Handle->ptp.data_ptr, 
 318:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                               MTP_Handle->DataInEpSize, 
 319:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                               MTP_Handle->DataInPipe);
 320:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }
 321:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       else
 322:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 323:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_length -= len;
 324:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.state = PTP_RESPONSE_STATE;
 325:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 326:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 327:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif          
 328:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }
 329:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 330:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     else if(URB_Status == USBH_URB_STALL)     
 331:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 332:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       MTP_Handle->ptp.state  = PTP_ERROR;
 333:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 334:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 335:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif       
 336:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 337:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 338:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 339:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_RESPONSE_STATE:
 340:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_BulkReceiveData (phost,
 342:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           (uint8_t*)&(MTP_Handle->ptp.resp_container), 
 343:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           PTP_USB_BULK_REQ_RESP_MAX_LEN , 
 344:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           MTP_Handle->DataInPipe);
 345:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 346:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state  = PTP_RESPONSE_WAIT_STATE;
 347:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 348:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 349:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_RESPONSE_WAIT_STATE:
 350:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     URB_Status = USBH_LL_GetURBState(phost, MTP_Handle->DataInPipe);
 351:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(URB_Status == USBH_URB_DONE)
 353:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 354:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        USBH_PTP_GetResponse (phost, &ptp_container);
 355:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        
 356:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        if(ptp_container.Code == PTP_RC_OK)
 357:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 358:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****          status = USBH_OK;
 359:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 360:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        else
 361:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 362:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****          status = USBH_FAIL;
 363:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 364:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        MTP_Handle->ptp.req_state = PTP_REQ_SEND;
 365:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 366:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     else if(URB_Status == USBH_URB_STALL)     
 367:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 368:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       MTP_Handle->ptp.state  = PTP_ERROR;
 369:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 370:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_URB_EVENT, 0);
 371:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif       
 372:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
ARM GAS  /tmp/ccSoqm0V.s 			page 8


 373:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 374:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 375:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_ERROR:
 376:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       MTP_Handle->ptp.req_state = PTP_REQ_SEND;
 377:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       break;
 378:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 379:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
 380:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 381:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 382:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
 383:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 384:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 385:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 386:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_OpenSession
 387:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Open a new session
 388:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 389:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
 390:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 391:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_SendRequest (USBH_HandleTypeDef *phost, PTP_ContainerTypedef  *req)
 392:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 393:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef            status = USBH_OK; 
 394:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef             *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 395:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 396:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   /* Clear PTP Data container*/
 397:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_memset(&(MTP_Handle->ptp.op_container), 0, sizeof(PTP_OpContainerTypedef));
 398:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 399:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   /* build appropriate USB container */
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.length = PTP_USB_BULK_REQ_LEN- (sizeof(uint32_t)*(5-req->Nparam));
 401:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.type = PTP_USB_CONTAINER_COMMAND;
 402:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.code = req->Code;
 403:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.trans_id = req->Transaction_ID;
 404:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param1 = req->Param1;
 405:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param2 = req->Param2;
 406:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param3 = req->Param3;
 407:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param4 = req->Param4;
 408:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param5 = req->Param5;
 409:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 410:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 412:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 413:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 414:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_OpenSession
 415:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Open a new session
 416:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 417:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
 418:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 419:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetResponse (USBH_HandleTypeDef *phost, PTP_ContainerTypedef  *resp)
 420:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 421:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef            status = USBH_OK; 
 422:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef             *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 423:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 424:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   /* build an appropriate PTPContainer */
 425:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Code = MTP_Handle->ptp.resp_container.code;
 426:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->SessionID = MTP_Handle->ptp.session_id;
 427:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Transaction_ID = MTP_Handle->ptp.resp_container.trans_id;
 428:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param1 = MTP_Handle->ptp.resp_container.param1;
 429:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param2 = MTP_Handle->ptp.resp_container.param2;
ARM GAS  /tmp/ccSoqm0V.s 			page 9


 430:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param3 = MTP_Handle->ptp.resp_container.param3;
 431:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param4 = MTP_Handle->ptp.resp_container.param4;
 432:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param5 = MTP_Handle->ptp.resp_container.param5;
 433:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 434:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
 435:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 436:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 437:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 438:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  The function informs user that data buffer is full
 439:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *  @param  phost: host handle
 440:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 441:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 442:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** void PTP_BufferFullCallback(USBH_HandleTypeDef *phost)
 443:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 444:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 445:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch (MTP_Handle->ptp.data_container.code)
 447:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 448:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OC_GetDeviceInfo:
 449:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_DecodeDeviceInfo (phost, &(MTP_Handle->info.devinfo));
 450:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 451:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 452:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OC_GetPartialObject:    
 453:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OC_GetObject:
 454:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 455:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* first packet is in the PTP data payload buffer */
 456:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(MTP_Handle->ptp.iteration == 0)
 457:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 458:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        /* copy it to object */
 459:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        USBH_memcpy(MTP_Handle->ptp.object_ptr, MTP_Handle->ptp.data_container.payload.data, PTP_USB
 460:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        
 461:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        /* next packet should be directly copied to object */
 462:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        MTP_Handle->ptp.data_ptr = (MTP_Handle->ptp.object_ptr + PTP_USB_BULK_PAYLOAD_LEN_READ); 
 463:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 464:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 465:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 466:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OC_SendObject:    
 467:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* first packet is in the PTP data payload buffer */
 468:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(MTP_Handle->ptp.iteration == 0)
 469:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 470:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        /* next packet should be directly copied to object */
 471:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        MTP_Handle->ptp.data_ptr = (MTP_Handle->ptp.object_ptr + PTP_USB_BULK_PAYLOAD_LEN_READ); 
 472:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 473:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;    
 474:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 475:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
 476:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 477:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 478:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 479:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 480:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 481:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 482:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 483:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetDeviceInfo
 484:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets device info dataset and fills deviceinfo structure.
 485:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 486:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
ARM GAS  /tmp/ccSoqm0V.s 			page 10


 487:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 488:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 489:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_DecodeDeviceInfo (USBH_HandleTypeDef *phost, PTP_DeviceInfoTypedef *dev_info)
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 491:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 492:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 493:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t totallen; 
 494:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t len;
 495:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 496:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   /* Max device info is PTP_USB_BULK_HS_MAX_PACKET_LEN_READ */
 497:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_DbgLog (" MTP device info size exceeds internal buffer size.\
 498:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                only available data are decoded.");
 499:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                    
 500:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   if(MTP_Handle->ptp.iteration == 0)
 501:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 502:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->StandardVersion = LE16(&data[PTP_di_StandardVersion]);
 503:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->VendorExtensionID = LE32(&data[PTP_di_VendorExtensionID]);
 504:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->VendorExtensionVersion = LE16(&data[PTP_di_VendorExtensionVersion]);
 505:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->VendorExtensionDesc, &data[PTP_di_VendorExtensionDesc], &len);
 506:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 507:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen=len*2+1;
 508:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->FunctionalMode = LE16(&data[PTP_di_FunctionalMode+totallen]);
 509:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->OperationsSupported_len = PTP_GetArray16 ((uint16_t *)&dev_info->OperationsSupported,
 510:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 511:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       PTP_di_OperationsSupported+totallen);
 512:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 513:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen=totallen+dev_info->OperationsSupported_len*sizeof(uint16_t)+sizeof(uint32_t);
 514:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->EventsSupported_len = PTP_GetArray16 ((uint16_t *)&dev_info->EventsSupported, 
 515:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 516:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       PTP_di_OperationsSupported+totallen);
 517:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 518:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen=totallen+dev_info->EventsSupported_len*sizeof(uint16_t)+sizeof(uint32_t);
 519:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->DevicePropertiesSupported_len = PTP_GetArray16 ((uint16_t *)&dev_info->DeviceProperti
 520:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 521:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       PTP_di_OperationsSupported+totallen);
 522:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 523:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen=totallen+dev_info->DevicePropertiesSupported_len*sizeof(uint16_t)+sizeof(uint32_t);
 524:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 525:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->CaptureFormats_len = PTP_GetArray16 ((uint16_t *)&dev_info->CaptureFormats, 
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 527:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       PTP_di_OperationsSupported+totallen);
 528:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 529:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen=totallen+dev_info->CaptureFormats_len*sizeof(uint16_t)+sizeof(uint32_t);
 530:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->ImageFormats_len =  PTP_GetArray16 ((uint16_t *)&dev_info->ImageFormats, 
 531:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 532:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       PTP_di_OperationsSupported+totallen);
 533:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 534:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen=totallen+dev_info->ImageFormats_len*sizeof(uint16_t)+sizeof(uint32_t); 
 535:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->Manufacturer, &data[PTP_di_OperationsSupported+totallen], &len);
 536:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 537:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen+=len*2+1;
 538:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->Model, &data[PTP_di_OperationsSupported+totallen], &len);
 539:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 540:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen+=len*2+1;
 541:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->DeviceVersion, &data[PTP_di_OperationsSupported+totallen], &len);
 542:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 543:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     totallen+=len*2+1;
ARM GAS  /tmp/ccSoqm0V.s 			page 11


 544:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->SerialNumber, &data[PTP_di_OperationsSupported+totallen], &len);
 545:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 546:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 547:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 548:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 549:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetStorageIDs
 550:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets Storage Ids and fills stor_ids structure.
 551:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 552:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  stor_ids: Storage IDsstructure
 553:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 554:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 555:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetStorageIDs (USBH_HandleTypeDef *phost, PTP_StorageIDsTypedef *stor_ids)
 556:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 557:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 558:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 559:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 560:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_ids->n = PTP_GetArray32 (stor_ids->Storage, data, 0); 
 561:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 562:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                   
 564:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 565:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetStorageInfo
 566:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets Storage Info and fills stor_info structure.
 567:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 568:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  stor_ids: Storage IDsstructure
 569:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 570:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 571:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetStorageInfo (USBH_HandleTypeDef *phost, uint32_t storage_id, PTP_StorageInfoType
 572:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 573:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 574:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 575:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 576:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t len;
 577:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 578:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->StorageType=LE16(&data[PTP_si_StorageType]);
 579:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->FilesystemType=LE16(&data[PTP_si_FilesystemType]);
 580:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->AccessCapability=LE16(&data[PTP_si_AccessCapability]);
 581:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->MaxCapability=LE64(&data[PTP_si_MaxCapability]);
 582:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->FreeSpaceInBytes=LE64(&data[PTP_si_FreeSpaceInBytes]);
 583:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->FreeSpaceInImages=LE32(&data[PTP_si_FreeSpaceInImages]);
 584:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 585:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_GetString(stor_info->StorageDescription, &data[PTP_si_StorageDescription], &len);
 586:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_GetString(stor_info->VolumeLabel, &data[PTP_si_StorageDescription+len*2+1], &len);   
 587:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 588:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 589:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 590:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetObjectInfo
 591:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets objectInfo and fills object_info structure.
 592:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 593:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  object_info: object info structure
 594:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 595:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 596:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetObjectInfo (USBH_HandleTypeDef *phost, PTP_ObjectInfoTypedef *object_info)
 597:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 598:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 599:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 600:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t filenamelen;
ARM GAS  /tmp/ccSoqm0V.s 			page 12


 601:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 602:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->StorageID=LE32(&data[PTP_oi_StorageID]);
 603:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ObjectFormat=LE16(&data[PTP_oi_ObjectFormat]);
 604:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ProtectionStatus=LE16(&data[PTP_oi_ProtectionStatus]);
 605:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ObjectCompressedSize=LE32(&data[PTP_oi_ObjectCompressedSize]);
 606:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 607:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   /* For Samsung Galaxy */
 608:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   if ((data[PTP_oi_filenamelen] == 0) && (data[PTP_oi_filenamelen+4] != 0)) 
 609:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 610:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     data += 4;
 611:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 612:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ThumbFormat=LE16(&data[PTP_oi_ThumbFormat]);
 613:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ThumbCompressedSize=LE32(&data[PTP_oi_ThumbCompressedSize]);
 614:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ThumbPixWidth=LE32(&data[PTP_oi_ThumbPixWidth]);
 615:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ThumbPixHeight=LE32(&data[PTP_oi_ThumbPixHeight]);
 616:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ImagePixWidth=LE32(&data[PTP_oi_ImagePixWidth]);
 617:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ImagePixHeight=LE32(&data[PTP_oi_ImagePixHeight]);
 618:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ImageBitDepth=LE32(&data[PTP_oi_ImageBitDepth]);
 619:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ParentObject=LE32(&data[PTP_oi_ParentObject]);
 620:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->AssociationType=LE16(&data[PTP_oi_AssociationType]);
 621:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->AssociationDesc=LE32(&data[PTP_oi_AssociationDesc]);
 622:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->SequenceNumber=LE32(&data[PTP_oi_SequenceNumber]);
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_GetString(object_info->Filename, &data[PTP_oi_filenamelen], &filenamelen);
 624:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 625:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 626:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 627:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 628:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetObjectPropDesc
 629:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets objectInfo and fills object_info structure.
 630:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 631:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  opd: object prop descriptor structure
 632:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 633:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 634:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetObjectPropDesc (USBH_HandleTypeDef *phost, PTP_ObjectPropDescTypeDef *opd, uint3
 635:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 636:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 637:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 638:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t offset = 0, i;
 639:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 640:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   opd->ObjectPropertyCode=LE16(&data[PTP_opd_ObjectPropertyCode]);
 641:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   opd->DataType=LE16(&data[PTP_opd_DataType]);
 642:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   opd->GetSet=*(uint8_t *)(&data[PTP_opd_GetSet]);
 643:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 644:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   offset = PTP_opd_FactoryDefaultValue;
 645:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_GetDevicePropValue (phost, &offset, opdlen, &opd->FactoryDefaultValue, opd->DataType);
 646:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 647:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   opd->GroupCode=LE32(&data[offset]);
 648:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   offset+=sizeof(uint32_t);
 649:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 650:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   opd->FormFlag=*(uint8_t *)(&data[offset]);
 651:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   offset+=sizeof(uint8_t);
 652:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 653:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch (opd->FormFlag) 
 654:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 655:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OPFF_Range:
 656:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetDevicePropValue(phost, &offset, opdlen, &opd->FORM.Range.MinimumValue, opd->DataType);
 657:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetDevicePropValue(phost, &offset, opdlen, &opd->FORM.Range.MaximumValue, opd->DataType);
ARM GAS  /tmp/ccSoqm0V.s 			page 13


 658:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetDevicePropValue(phost, &offset, opdlen, &opd->FORM.Range.StepSize, opd->DataType);
 659:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 660:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 661:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_OPFF_Enumeration:
 662:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 663:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     opd->FORM.Enum.NumberOfValues = LE16(&data[offset]);
 664:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     offset+=sizeof(uint16_t);
 665:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 666:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     for (i=0 ; i < opd->FORM.Enum.NumberOfValues ; i++) 
 667:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 668:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       PTP_GetDevicePropValue(phost, &offset, opdlen, &opd->FORM.Enum.SupportedValue[i], opd->DataTy
 669:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 670:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 671:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
 672:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 673:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 674:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 675:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 676:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 677:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetDevicePropValue
 678:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets objectInfo and fills object_info structure.
 679:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 680:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  opd: object prop descriptor structure
 681:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 682:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */             
 683:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetDevicePropValue(USBH_HandleTypeDef *phost, 
 684:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    uint32_t *offset, 
 685:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    uint32_t total, 
 686:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    PTP_PropertyValueTypedef* value, 
 687:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    uint16_t datatype)
 688:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 689:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 690:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 691:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t len;
 692:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch (datatype) 
 693:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 694:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT8:
 695:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->i8 = *(uint8_t *)&(data[*offset]);
 696:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 1;
 697:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 698:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT8:
 699:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->u8 = *(uint8_t *)&(data[*offset]);
 700:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 1;                
 701:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 702:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT16:
 703:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 704:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->i16 = LE16(&(data[*offset]));
 705:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 2;                
 706:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 707:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT16:
 708:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->u16 = LE16(&(data[*offset]));                
 709:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 2;                
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 711:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT32:
 712:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->i32 = LE32(&(data[*offset]));              
 713:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 4;                
 714:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
ARM GAS  /tmp/ccSoqm0V.s 			page 14


 715:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT32:
 716:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->u32 = LE32(&(data[*offset]));             
 717:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 4;                
 718:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 719:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT64:
 720:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->i64 = LE64(&(data[*offset]));            
 721:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 8;                
 722:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 723:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT64:
 724:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     value->u64 = LE64(&(data[*offset]));              
 725:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 8;                
 726:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 727:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 728:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT128:
 729:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 16;
 730:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 731:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT128:
 732:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 16;
 733:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 734:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  
 735:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_STR:
 736:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 737:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString((uint8_t *)value->str, (uint8_t *)&(data[*offset]), &len);
 738:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += len*2+1;
 739:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 740:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
 741:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 742:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 743:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 744:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 745:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 746:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 747:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetDevicePropValue
 748:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets objectInfo and fills object_info structure.
 749:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 750:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  opd: object prop descriptor structure
 751:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 752:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */             
 753:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static uint32_t PTP_GetObjectPropList (USBH_HandleTypeDef *phost, 
 754:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    MTP_PropertiesTypedef *props, 
 755:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                    uint32_t len)
 756:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** { 
 757:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 758:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 759:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t prop_count;
 760:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t offset = 0, i;
 761:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 762:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  prop_count = LE32(data);
 763:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 764:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  
 765:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  if (prop_count == 0) 
 766:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  {
 767:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    return 0;
 768:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  }
 769:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 770:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  data += sizeof(uint32_t);
 771:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  len -= sizeof(uint32_t);
ARM GAS  /tmp/ccSoqm0V.s 			page 15


 772:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  for (i = 0; i < prop_count; i++) 
 774:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  {
 775:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    if (len <= 0) 
 776:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    {
 777:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****      return 0;
 778:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    }
 779:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 780:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    props[i].ObjectHandle = LE32(data);
 781:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    data += sizeof(uint32_t);
 782:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    len -= sizeof(uint32_t);
 783:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 784:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    props[i].property = LE16(data);
 785:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    data += sizeof(uint16_t);
 786:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    len -= sizeof(uint16_t);
 787:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 788:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    props[i].datatype = LE16(data);
 789:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    data += sizeof(uint16_t);
 790:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    len -= sizeof(uint16_t);
 791:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 792:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    offset = 0;
 793:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 794:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    PTP_GetDevicePropValue(phost, &offset, len, &props[i].propval, props[i].datatype);
 795:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 796:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    data += offset;
 797:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    len -= offset;
 798:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  }
 799:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  
 800:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  return prop_count;
 801:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 802:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 803:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 804:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetString
 805:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets SCII String from.
 806:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  str: ascii string
 807:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  data: Device info structure
 808:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 809:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 810:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static void PTP_GetString (uint8_t *str, uint8_t* data, uint16_t *len)
 811:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
  29              		.loc 1 811 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              	.LVL0:
  35 0000 10B4     		push	{r4}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 4
  38              		.cfi_offset 4, -4
 812:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t strlength;
 813:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t idx;
 814:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 815:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *len = data[0];
  39              		.loc 1 815 0
  40 0002 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
  41 0004 1380     		strh	r3, [r2]	@ movhi
ARM GAS  /tmp/ccSoqm0V.s 			page 16


 816:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   strlength = 2 * data[0]; 
  42              		.loc 1 816 0
  43 0006 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
  44 0008 6400     		lsls	r4, r4, #1
  45              	.LVL1:
 817:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   data ++; /* Adjust the offset ignoring the String Len */
 818:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 819:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   for (idx = 0; idx < strlength; idx+=2 )
  46              		.loc 1 819 0
  47 000a 0023     		movs	r3, #0
  48 000c 05E0     		b	.L2
  49              	.LVL2:
  50              	.L3:
 820:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 821:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Copy Only the string and ignore the UNICODE ID, hence add the src */
 822:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *str =  data[idx];
  51              		.loc 1 822 0 discriminator 3
  52 000e CA18     		adds	r2, r1, r3
  53 0010 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
  54 0012 00F8012B 		strb	r2, [r0], #1
  55              	.LVL3:
 819:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
  56              		.loc 1 819 0 discriminator 3
  57 0016 0233     		adds	r3, r3, #2
  58              	.LVL4:
  59 0018 9BB2     		uxth	r3, r3
  60              	.LVL5:
  61              	.L2:
 819:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
  62              		.loc 1 819 0 is_stmt 0 discriminator 1
  63 001a A342     		cmp	r3, r4
  64 001c F7D3     		bcc	.L3
 823:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     str++;
 824:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }  
 825:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *str = 0; /* mark end of string */  
  65              		.loc 1 825 0 is_stmt 1
  66 001e 0023     		movs	r3, #0
  67              	.LVL6:
  68 0020 0370     		strb	r3, [r0]
 826:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
  69              		.loc 1 826 0
  70 0022 5DF8044B 		ldr	r4, [sp], #4
  71              	.LCFI1:
  72              		.cfi_restore 4
  73              		.cfi_def_cfa_offset 0
  74              	.LVL7:
  75 0026 7047     		bx	lr
  76              		.cfi_endproc
  77              	.LFE136:
  79              		.section	.text.PTP_GetStorageInfo,"ax",%progbits
  80              		.align	2
  81              		.thumb
  82              		.thumb_func
  84              	PTP_GetStorageInfo:
  85              	.LFB131:
 572:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
  86              		.loc 1 572 0
ARM GAS  /tmp/ccSoqm0V.s 			page 17


  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 8
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              	.LVL8:
  91 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
  92              	.LCFI2:
  93              		.cfi_def_cfa_offset 28
  94              		.cfi_offset 4, -28
  95              		.cfi_offset 5, -24
  96              		.cfi_offset 6, -20
  97              		.cfi_offset 7, -16
  98              		.cfi_offset 8, -12
  99              		.cfi_offset 9, -8
 100              		.cfi_offset 14, -4
 101 0004 83B0     		sub	sp, sp, #12
 102              	.LCFI3:
 103              		.cfi_def_cfa_offset 40
 104 0006 1446     		mov	r4, r2
 573:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 105              		.loc 1 573 0
 106 0008 D0F84435 		ldr	r3, [r0, #1348]
 107 000c D3F81CE0 		ldr	lr, [r3, #28]
 108              	.LVL9:
 574:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 109              		.loc 1 574 0
 110 0010 41F69053 		movw	r3, #7568
 111 0014 0EEB0305 		add	r5, lr, r3
 112              	.LVL10:
 578:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->FilesystemType=LE16(&data[PTP_si_FilesystemType]);
 113              		.loc 1 578 0
 114 0018 1EF80330 		ldrb	r3, [lr, r3]	@ zero_extendqisi2
 115 001c 41F69152 		movw	r2, #7569
 116              	.LVL11:
 117 0020 1EF80220 		ldrb	r2, [lr, r2]	@ zero_extendqisi2
 118 0024 03EB0223 		add	r3, r3, r2, lsl #8
 119 0028 2380     		strh	r3, [r4]	@ movhi
 579:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->AccessCapability=LE16(&data[PTP_si_AccessCapability]);
 120              		.loc 1 579 0
 121 002a 41F69253 		movw	r3, #7570
 122 002e 1EF80330 		ldrb	r3, [lr, r3]	@ zero_extendqisi2
 123 0032 41F69352 		movw	r2, #7571
 124 0036 1EF80220 		ldrb	r2, [lr, r2]	@ zero_extendqisi2
 125 003a 03EB0223 		add	r3, r3, r2, lsl #8
 126 003e 6380     		strh	r3, [r4, #2]	@ movhi
 580:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->MaxCapability=LE64(&data[PTP_si_MaxCapability]);
 127              		.loc 1 580 0
 128 0040 41F69453 		movw	r3, #7572
 129 0044 1EF80330 		ldrb	r3, [lr, r3]	@ zero_extendqisi2
 130 0048 41F69552 		movw	r2, #7573
 131 004c 1EF80220 		ldrb	r2, [lr, r2]	@ zero_extendqisi2
 132 0050 03EB0223 		add	r3, r3, r2, lsl #8
 133 0054 A380     		strh	r3, [r4, #4]	@ movhi
 581:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->FreeSpaceInBytes=LE64(&data[PTP_si_FreeSpaceInBytes]);
 134              		.loc 1 581 0
 135 0056 41F69653 		movw	r3, #7574
 136 005a 1EF80300 		ldrb	r0, [lr, r3]	@ zero_extendqisi2
 137              	.LVL12:
ARM GAS  /tmp/ccSoqm0V.s 			page 18


 138 005e 0021     		movs	r1, #0
 139              	.LVL13:
 140 0060 41F69753 		movw	r3, #7575
 141 0064 1EF80360 		ldrb	r6, [lr, r3]	@ zero_extendqisi2
 142 0068 0023     		movs	r3, #0
 143 006a 3202     		lsls	r2, r6, #8
 144 006c 8018     		adds	r0, r0, r2
 145 006e 5941     		adcs	r1, r1, r3
 146 0070 41F69853 		movw	r3, #7576
 147 0074 1EF80360 		ldrb	r6, [lr, r3]	@ zero_extendqisi2
 148 0078 0023     		movs	r3, #0
 149 007a 3204     		lsls	r2, r6, #16
 150 007c 8018     		adds	r0, r0, r2
 151 007e 5941     		adcs	r1, r1, r3
 152 0080 41F69953 		movw	r3, #7577
 153 0084 1EF80360 		ldrb	r6, [lr, r3]	@ zero_extendqisi2
 154 0088 0023     		movs	r3, #0
 155 008a 3206     		lsls	r2, r6, #24
 156 008c 8018     		adds	r0, r0, r2
 157 008e 5941     		adcs	r1, r1, r3
 158 0090 0022     		movs	r2, #0
 159 0092 41F69A56 		movw	r6, #7578
 160 0096 1EF80630 		ldrb	r3, [lr, r6]	@ zero_extendqisi2
 161 009a 8018     		adds	r0, r0, r2
 162 009c 5941     		adcs	r1, r1, r3
 163 009e 41F69B53 		movw	r3, #7579
 164 00a2 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 165 00a6 4FEA0827 		lsl	r7, r8, #8
 166 00aa 8018     		adds	r0, r0, r2
 167 00ac 7941     		adcs	r1, r1, r7
 168 00ae 41F69C53 		movw	r3, #7580
 169 00b2 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 170 00b6 4FEA0847 		lsl	r7, r8, #16
 171 00ba 8018     		adds	r0, r0, r2
 172 00bc 7941     		adcs	r1, r1, r7
 173 00be 41F69D53 		movw	r3, #7581
 174 00c2 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 175 00c6 4FEA0867 		lsl	r7, r8, #24
 176 00ca 1618     		adds	r6, r2, r0
 177 00cc 4F41     		adcs	r7, r7, r1
 178 00ce C4E90267 		strd	r6, [r4, #8]
 582:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   stor_info->FreeSpaceInImages=LE32(&data[PTP_si_FreeSpaceInImages]);
 179              		.loc 1 582 0
 180 00d2 41F69E53 		movw	r3, #7582
 181 00d6 1EF80360 		ldrb	r6, [lr, r3]	@ zero_extendqisi2
 182 00da 0027     		movs	r7, #0
 183 00dc 41F69F53 		movw	r3, #7583
 184 00e0 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 185 00e4 0021     		movs	r1, #0
 186 00e6 4FEA0820 		lsl	r0, r8, #8
 187 00ea 3618     		adds	r6, r6, r0
 188 00ec 4F41     		adcs	r7, r7, r1
 189 00ee 0EF5ED53 		add	r3, lr, #7584
 190 00f2 93F80080 		ldrb	r8, [r3]	@ zero_extendqisi2
 191 00f6 0021     		movs	r1, #0
 192 00f8 4FEA0840 		lsl	r0, r8, #16
 193 00fc 3618     		adds	r6, r6, r0
ARM GAS  /tmp/ccSoqm0V.s 			page 19


 194 00fe 4F41     		adcs	r7, r7, r1
 195 0100 41F6A153 		movw	r3, #7585
 196 0104 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 197 0108 0021     		movs	r1, #0
 198 010a 4FEA0860 		lsl	r0, r8, #24
 199 010e 8019     		adds	r0, r0, r6
 200 0110 7941     		adcs	r1, r1, r7
 201 0112 41F6A253 		movw	r3, #7586
 202 0116 1EF80390 		ldrb	r9, [lr, r3]	@ zero_extendqisi2
 203 011a 8018     		adds	r0, r0, r2
 204 011c 41EB0901 		adc	r1, r1, r9
 205 0120 41F6A353 		movw	r3, #7587
 206 0124 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 207 0128 4FEA0827 		lsl	r7, r8, #8
 208 012c 8018     		adds	r0, r0, r2
 209 012e 7941     		adcs	r1, r1, r7
 210 0130 41F6A453 		movw	r3, #7588
 211 0134 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 212 0138 4FEA0847 		lsl	r7, r8, #16
 213 013c 1618     		adds	r6, r2, r0
 214 013e 4F41     		adcs	r7, r7, r1
 215 0140 41F6A553 		movw	r3, #7589
 216 0144 1EF80380 		ldrb	r8, [lr, r3]	@ zero_extendqisi2
 217 0148 4FEA0861 		lsl	r1, r8, #24
 218 014c B618     		adds	r6, r6, r2
 219 014e 4F41     		adcs	r7, r7, r1
 220 0150 C4E90467 		strd	r6, [r4, #16]
 583:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 221              		.loc 1 583 0
 222 0154 41F6A653 		movw	r3, #7590
 223 0158 1EF80330 		ldrb	r3, [lr, r3]	@ zero_extendqisi2
 224 015c 41F6A752 		movw	r2, #7591
 225 0160 1EF80220 		ldrb	r2, [lr, r2]	@ zero_extendqisi2
 226 0164 03EB0223 		add	r3, r3, r2, lsl #8
 227 0168 41F6A852 		movw	r2, #7592
 228 016c 1EF80220 		ldrb	r2, [lr, r2]	@ zero_extendqisi2
 229 0170 03EB0243 		add	r3, r3, r2, lsl #16
 230 0174 41F6A952 		movw	r2, #7593
 231 0178 1EF80220 		ldrb	r2, [lr, r2]	@ zero_extendqisi2
 232 017c 03EB0263 		add	r3, r3, r2, lsl #24
 233 0180 A361     		str	r3, [r4, #24]
 585:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_GetString(stor_info->VolumeLabel, &data[PTP_si_StorageDescription+len*2+1], &len);   
 234              		.loc 1 585 0
 235 0182 0DF10602 		add	r2, sp, #6
 236 0186 0EF5ED51 		add	r1, lr, #7584
 237 018a 0A31     		adds	r1, r1, #10
 238 018c 04F11C00 		add	r0, r4, #28
 239 0190 FFF7FEFF 		bl	PTP_GetString
 240              	.LVL14:
 586:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 241              		.loc 1 586 0
 242 0194 BDF80610 		ldrh	r1, [sp, #6]
 243 0198 4900     		lsls	r1, r1, #1
 244 019a 1B31     		adds	r1, r1, #27
 245 019c 0DF10602 		add	r2, sp, #6
 246 01a0 2944     		add	r1, r1, r5
 247 01a2 04F21B10 		addw	r0, r4, #283
ARM GAS  /tmp/ccSoqm0V.s 			page 20


 248 01a6 FFF7FEFF 		bl	PTP_GetString
 249              	.LVL15:
 587:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 250              		.loc 1 587 0
 251 01aa 03B0     		add	sp, sp, #12
 252              	.LCFI4:
 253              		.cfi_def_cfa_offset 28
 254              		@ sp needed
 255 01ac BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 256              		.cfi_endproc
 257              	.LFE131:
 259              		.section	.text.PTP_GetObjectInfo,"ax",%progbits
 260              		.align	2
 261              		.thumb
 262              		.thumb_func
 264              	PTP_GetObjectInfo:
 265              	.LFB132:
 597:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 266              		.loc 1 597 0
 267              		.cfi_startproc
 268              		@ args = 0, pretend = 0, frame = 8
 269              		@ frame_needed = 0, uses_anonymous_args = 0
 270              	.LVL16:
 271 0000 10B5     		push	{r4, lr}
 272              	.LCFI5:
 273              		.cfi_def_cfa_offset 8
 274              		.cfi_offset 4, -8
 275              		.cfi_offset 14, -4
 276 0002 82B0     		sub	sp, sp, #8
 277              	.LCFI6:
 278              		.cfi_def_cfa_offset 16
 279 0004 0B46     		mov	r3, r1
 598:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 280              		.loc 1 598 0
 281 0006 D0F84425 		ldr	r2, [r0, #1348]
 282 000a D269     		ldr	r2, [r2, #28]
 283              	.LVL17:
 599:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t filenamelen;
 284              		.loc 1 599 0
 285 000c 41F69050 		movw	r0, #7568
 286              	.LVL18:
 287 0010 1118     		adds	r1, r2, r0
 288              	.LVL19:
 602:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ObjectFormat=LE16(&data[PTP_oi_ObjectFormat]);
 289              		.loc 1 602 0
 290 0012 105C     		ldrb	r0, [r2, r0]	@ zero_extendqisi2
 291 0014 41F69154 		movw	r4, #7569
 292 0018 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 293 001a 00EB0420 		add	r0, r0, r4, lsl #8
 294 001e 41F69254 		movw	r4, #7570
 295 0022 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 296 0024 00EB0440 		add	r0, r0, r4, lsl #16
 297 0028 41F69354 		movw	r4, #7571
 298 002c 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 299 002e 00EB0460 		add	r0, r0, r4, lsl #24
 300 0032 1860     		str	r0, [r3]
 603:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ProtectionStatus=LE16(&data[PTP_oi_ProtectionStatus]);
ARM GAS  /tmp/ccSoqm0V.s 			page 21


 301              		.loc 1 603 0
 302 0034 41F69450 		movw	r0, #7572
 303 0038 105C     		ldrb	r0, [r2, r0]	@ zero_extendqisi2
 304 003a 41F69554 		movw	r4, #7573
 305 003e 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 306 0040 00EB0420 		add	r0, r0, r4, lsl #8
 307 0044 9880     		strh	r0, [r3, #4]	@ movhi
 604:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ObjectCompressedSize=LE32(&data[PTP_oi_ObjectCompressedSize]);
 308              		.loc 1 604 0
 309 0046 41F69650 		movw	r0, #7574
 310 004a 105C     		ldrb	r0, [r2, r0]	@ zero_extendqisi2
 311 004c 41F69754 		movw	r4, #7575
 312 0050 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 313 0052 00EB0420 		add	r0, r0, r4, lsl #8
 314 0056 D880     		strh	r0, [r3, #6]	@ movhi
 605:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 315              		.loc 1 605 0
 316 0058 41F69850 		movw	r0, #7576
 317 005c 105C     		ldrb	r0, [r2, r0]	@ zero_extendqisi2
 318 005e 41F69954 		movw	r4, #7577
 319 0062 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 320 0064 00EB0420 		add	r0, r0, r4, lsl #8
 321 0068 41F69A54 		movw	r4, #7578
 322 006c 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 323 006e 00EB0440 		add	r0, r0, r4, lsl #16
 324 0072 41F69B54 		movw	r4, #7579
 325 0076 145D     		ldrb	r4, [r2, r4]	@ zero_extendqisi2
 326 0078 00EB0460 		add	r0, r0, r4, lsl #24
 327 007c 9860     		str	r0, [r3, #8]
 328 007e 0020     		movs	r0, #0
 329 0080 D860     		str	r0, [r3, #12]
 608:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 330              		.loc 1 608 0
 331 0082 41F6C450 		movw	r0, #7620
 332 0086 105C     		ldrb	r0, [r2, r0]	@ zero_extendqisi2
 333 0088 30B9     		cbnz	r0, .L8
 608:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 334              		.loc 1 608 0 is_stmt 0 discriminator 1
 335 008a 41F6C850 		movw	r0, #7624
 336 008e 105C     		ldrb	r0, [r2, r0]	@ zero_extendqisi2
 337 0090 10B1     		cbz	r0, .L8
 610:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 338              		.loc 1 610 0 is_stmt 1
 339 0092 02F5EC51 		add	r1, r2, #7552
 340              	.LVL20:
 341 0096 1431     		adds	r1, r1, #20
 342              	.LVL21:
 343              	.L8:
 612:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ThumbCompressedSize=LE32(&data[PTP_oi_ThumbCompressedSize]);
 344              		.loc 1 612 0
 345 0098 0A7B     		ldrb	r2, [r1, #12]	@ zero_extendqisi2
 346              	.LVL22:
 347 009a 487B     		ldrb	r0, [r1, #13]	@ zero_extendqisi2
 348 009c 02EB0022 		add	r2, r2, r0, lsl #8
 349 00a0 1A82     		strh	r2, [r3, #16]	@ movhi
 613:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ThumbPixWidth=LE32(&data[PTP_oi_ThumbPixWidth]);
 350              		.loc 1 613 0
ARM GAS  /tmp/ccSoqm0V.s 			page 22


 351 00a2 8A7B     		ldrb	r2, [r1, #14]	@ zero_extendqisi2
 352 00a4 C87B     		ldrb	r0, [r1, #15]	@ zero_extendqisi2
 353 00a6 02EB0022 		add	r2, r2, r0, lsl #8
 354 00aa 087C     		ldrb	r0, [r1, #16]	@ zero_extendqisi2
 355 00ac 02EB0042 		add	r2, r2, r0, lsl #16
 356 00b0 487C     		ldrb	r0, [r1, #17]	@ zero_extendqisi2
 357 00b2 02EB0062 		add	r2, r2, r0, lsl #24
 358 00b6 5A61     		str	r2, [r3, #20]
 614:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ThumbPixHeight=LE32(&data[PTP_oi_ThumbPixHeight]);
 359              		.loc 1 614 0
 360 00b8 8A7C     		ldrb	r2, [r1, #18]	@ zero_extendqisi2
 361 00ba C87C     		ldrb	r0, [r1, #19]	@ zero_extendqisi2
 362 00bc 02EB0022 		add	r2, r2, r0, lsl #8
 363 00c0 087D     		ldrb	r0, [r1, #20]	@ zero_extendqisi2
 364 00c2 02EB0042 		add	r2, r2, r0, lsl #16
 365 00c6 487D     		ldrb	r0, [r1, #21]	@ zero_extendqisi2
 366 00c8 02EB0062 		add	r2, r2, r0, lsl #24
 367 00cc 9A61     		str	r2, [r3, #24]
 615:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ImagePixWidth=LE32(&data[PTP_oi_ImagePixWidth]);
 368              		.loc 1 615 0
 369 00ce 8A7D     		ldrb	r2, [r1, #22]	@ zero_extendqisi2
 370 00d0 C87D     		ldrb	r0, [r1, #23]	@ zero_extendqisi2
 371 00d2 02EB0022 		add	r2, r2, r0, lsl #8
 372 00d6 087E     		ldrb	r0, [r1, #24]	@ zero_extendqisi2
 373 00d8 02EB0042 		add	r2, r2, r0, lsl #16
 374 00dc 487E     		ldrb	r0, [r1, #25]	@ zero_extendqisi2
 375 00de 02EB0062 		add	r2, r2, r0, lsl #24
 376 00e2 DA61     		str	r2, [r3, #28]
 616:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ImagePixHeight=LE32(&data[PTP_oi_ImagePixHeight]);
 377              		.loc 1 616 0
 378 00e4 8A7E     		ldrb	r2, [r1, #26]	@ zero_extendqisi2
 379 00e6 C87E     		ldrb	r0, [r1, #27]	@ zero_extendqisi2
 380 00e8 02EB0022 		add	r2, r2, r0, lsl #8
 381 00ec 087F     		ldrb	r0, [r1, #28]	@ zero_extendqisi2
 382 00ee 02EB0042 		add	r2, r2, r0, lsl #16
 383 00f2 487F     		ldrb	r0, [r1, #29]	@ zero_extendqisi2
 384 00f4 02EB0062 		add	r2, r2, r0, lsl #24
 385 00f8 1A62     		str	r2, [r3, #32]
 617:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ImageBitDepth=LE32(&data[PTP_oi_ImageBitDepth]);
 386              		.loc 1 617 0
 387 00fa 8A7F     		ldrb	r2, [r1, #30]	@ zero_extendqisi2
 388 00fc C87F     		ldrb	r0, [r1, #31]	@ zero_extendqisi2
 389 00fe 02EB0022 		add	r2, r2, r0, lsl #8
 390 0102 91F82000 		ldrb	r0, [r1, #32]	@ zero_extendqisi2
 391 0106 02EB0042 		add	r2, r2, r0, lsl #16
 392 010a 91F82100 		ldrb	r0, [r1, #33]	@ zero_extendqisi2
 393 010e 02EB0062 		add	r2, r2, r0, lsl #24
 394 0112 5A62     		str	r2, [r3, #36]
 618:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->ParentObject=LE32(&data[PTP_oi_ParentObject]);
 395              		.loc 1 618 0
 396 0114 91F82220 		ldrb	r2, [r1, #34]	@ zero_extendqisi2
 397 0118 91F82300 		ldrb	r0, [r1, #35]	@ zero_extendqisi2
 398 011c 02EB0022 		add	r2, r2, r0, lsl #8
 399 0120 91F82400 		ldrb	r0, [r1, #36]	@ zero_extendqisi2
 400 0124 02EB0042 		add	r2, r2, r0, lsl #16
 401 0128 91F82500 		ldrb	r0, [r1, #37]	@ zero_extendqisi2
 402 012c 02EB0062 		add	r2, r2, r0, lsl #24
ARM GAS  /tmp/ccSoqm0V.s 			page 23


 403 0130 9A62     		str	r2, [r3, #40]
 619:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->AssociationType=LE16(&data[PTP_oi_AssociationType]);
 404              		.loc 1 619 0
 405 0132 91F82620 		ldrb	r2, [r1, #38]	@ zero_extendqisi2
 406 0136 91F82700 		ldrb	r0, [r1, #39]	@ zero_extendqisi2
 407 013a 02EB0022 		add	r2, r2, r0, lsl #8
 408 013e 91F82800 		ldrb	r0, [r1, #40]	@ zero_extendqisi2
 409 0142 02EB0042 		add	r2, r2, r0, lsl #16
 410 0146 91F82900 		ldrb	r0, [r1, #41]	@ zero_extendqisi2
 411 014a 02EB0062 		add	r2, r2, r0, lsl #24
 412 014e DA62     		str	r2, [r3, #44]
 620:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->AssociationDesc=LE32(&data[PTP_oi_AssociationDesc]);
 413              		.loc 1 620 0
 414 0150 91F82A20 		ldrb	r2, [r1, #42]	@ zero_extendqisi2
 415 0154 91F82B00 		ldrb	r0, [r1, #43]	@ zero_extendqisi2
 416 0158 02EB0022 		add	r2, r2, r0, lsl #8
 417 015c 1A86     		strh	r2, [r3, #48]	@ movhi
 621:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   object_info->SequenceNumber=LE32(&data[PTP_oi_SequenceNumber]);
 418              		.loc 1 621 0
 419 015e 91F82C20 		ldrb	r2, [r1, #44]	@ zero_extendqisi2
 420 0162 91F82D00 		ldrb	r0, [r1, #45]	@ zero_extendqisi2
 421 0166 02EB0022 		add	r2, r2, r0, lsl #8
 422 016a 91F82E00 		ldrb	r0, [r1, #46]	@ zero_extendqisi2
 423 016e 02EB0042 		add	r2, r2, r0, lsl #16
 424 0172 91F82F00 		ldrb	r0, [r1, #47]	@ zero_extendqisi2
 425 0176 02EB0062 		add	r2, r2, r0, lsl #24
 426 017a 5A63     		str	r2, [r3, #52]
 622:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_GetString(object_info->Filename, &data[PTP_oi_filenamelen], &filenamelen);
 427              		.loc 1 622 0
 428 017c 91F83020 		ldrb	r2, [r1, #48]	@ zero_extendqisi2
 429 0180 91F83100 		ldrb	r0, [r1, #49]	@ zero_extendqisi2
 430 0184 02EB0022 		add	r2, r2, r0, lsl #8
 431 0188 91F83200 		ldrb	r0, [r1, #50]	@ zero_extendqisi2
 432 018c 02EB0042 		add	r2, r2, r0, lsl #16
 433 0190 91F83300 		ldrb	r0, [r1, #51]	@ zero_extendqisi2
 434 0194 02EB0062 		add	r2, r2, r0, lsl #24
 435 0198 9A63     		str	r2, [r3, #56]
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 436              		.loc 1 623 0
 437 019a 0DF10602 		add	r2, sp, #6
 438 019e 3431     		adds	r1, r1, #52
 439              	.LVL23:
 440 01a0 03F13C00 		add	r0, r3, #60
 441 01a4 FFF7FEFF 		bl	PTP_GetString
 442              	.LVL24:
 624:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 443              		.loc 1 624 0
 444 01a8 02B0     		add	sp, sp, #8
 445              	.LCFI7:
 446              		.cfi_def_cfa_offset 8
 447              		@ sp needed
 448 01aa 10BD     		pop	{r4, pc}
 449              		.cfi_endproc
 450              	.LFE132:
 452              		.section	.text.PTP_GetDevicePropValue,"ax",%progbits
 453              		.align	2
 454              		.thumb
ARM GAS  /tmp/ccSoqm0V.s 			page 24


 455              		.thumb_func
 457              	PTP_GetDevicePropValue:
 458              	.LFB134:
 688:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 459              		.loc 1 688 0
 460              		.cfi_startproc
 461              		@ args = 4, pretend = 0, frame = 16
 462              		@ frame_needed = 0, uses_anonymous_args = 0
 463              	.LVL25:
 464 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 465              	.LCFI8:
 466              		.cfi_def_cfa_offset 36
 467              		.cfi_offset 4, -36
 468              		.cfi_offset 5, -32
 469              		.cfi_offset 6, -28
 470              		.cfi_offset 7, -24
 471              		.cfi_offset 8, -20
 472              		.cfi_offset 9, -16
 473              		.cfi_offset 10, -12
 474              		.cfi_offset 11, -8
 475              		.cfi_offset 14, -4
 476 0004 85B0     		sub	sp, sp, #20
 477              	.LCFI9:
 478              		.cfi_def_cfa_offset 56
 479 0006 BDF83820 		ldrh	r2, [sp, #56]
 480              	.LVL26:
 689:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 481              		.loc 1 689 0
 482 000a D0F84405 		ldr	r0, [r0, #1348]
 483              	.LVL27:
 484 000e C469     		ldr	r4, [r0, #28]
 485              	.LVL28:
 690:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint16_t len;
 486              		.loc 1 690 0
 487 0010 04F5EC54 		add	r4, r4, #7552
 488              	.LVL29:
 489 0014 1034     		adds	r4, r4, #16
 490              	.LVL30:
 692:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 491              		.loc 1 692 0
 492 0016 062A     		cmp	r2, #6
 493 0018 57D0     		beq	.L12
 494 001a 0CD8     		bhi	.L13
 495 001c 032A     		cmp	r2, #3
 496 001e 2BD0     		beq	.L14
 497 0020 04D8     		bhi	.L15
 498 0022 012A     		cmp	r2, #1
 499 0024 1AD0     		beq	.L16
 500 0026 022A     		cmp	r2, #2
 501 0028 1FD0     		beq	.L17
 502 002a 24E1     		b	.L10
 503              	.L15:
 504 002c 042A     		cmp	r2, #4
 505 002e 2ED0     		beq	.L18
 506 0030 052A     		cmp	r2, #5
 507 0032 37D0     		beq	.L19
 508 0034 1FE1     		b	.L10
ARM GAS  /tmp/ccSoqm0V.s 			page 25


 509              	.L13:
 510 0036 092A     		cmp	r2, #9
 511 0038 00F00A81 		beq	.L20
 512 003c 05D8     		bhi	.L21
 513 003e 072A     		cmp	r2, #7
 514 0040 56D0     		beq	.L22
 515 0042 082A     		cmp	r2, #8
 516 0044 00F0AA80 		beq	.L23
 517 0048 15E1     		b	.L10
 518              	.L21:
 519 004a 0A2A     		cmp	r2, #10
 520 004c 00F0FC80 		beq	.L24
 521 0050 4FF6FF70 		movw	r0, #65535
 522              	.LVL31:
 523 0054 8242     		cmp	r2, r0
 524 0056 00F0FF80 		beq	.L25
 525 005a 0CE1     		b	.L10
 526              	.L16:
 695:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 1;
 527              		.loc 1 695 0
 528 005c 0A68     		ldr	r2, [r1]
 529 005e A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 530 0060 1A70     		strb	r2, [r3]
 696:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 531              		.loc 1 696 0
 532 0062 0B68     		ldr	r3, [r1]
 533              	.LVL32:
 534 0064 0133     		adds	r3, r3, #1
 535 0066 0B60     		str	r3, [r1]
 697:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT8:
 536              		.loc 1 697 0
 537 0068 05E1     		b	.L10
 538              	.LVL33:
 539              	.L17:
 699:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 1;                
 540              		.loc 1 699 0
 541 006a 0A68     		ldr	r2, [r1]
 542 006c A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 543 006e 1A70     		strb	r2, [r3]
 544              	.LVL34:
 700:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 545              		.loc 1 700 0
 546 0070 0B68     		ldr	r3, [r1]
 547              	.LVL35:
 548 0072 0133     		adds	r3, r3, #1
 549 0074 0B60     		str	r3, [r1]
 701:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT16:
 550              		.loc 1 701 0
 551 0076 FEE0     		b	.L10
 552              	.LVL36:
 553              	.L14:
 704:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 2;                
 554              		.loc 1 704 0
 555 0078 0A68     		ldr	r2, [r1]
 556 007a A05C     		ldrb	r0, [r4, r2]	@ zero_extendqisi2
 557              	.LVL37:
 558 007c 0132     		adds	r2, r2, #1
ARM GAS  /tmp/ccSoqm0V.s 			page 26


 559 007e A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 560 0080 00EB0222 		add	r2, r0, r2, lsl #8
 561 0084 1A80     		strh	r2, [r3]	@ movhi
 705:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 562              		.loc 1 705 0
 563 0086 0B68     		ldr	r3, [r1]
 564              	.LVL38:
 565 0088 0233     		adds	r3, r3, #2
 566 008a 0B60     		str	r3, [r1]
 706:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT16:
 567              		.loc 1 706 0
 568 008c F3E0     		b	.L10
 569              	.LVL39:
 570              	.L18:
 708:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 2;                
 571              		.loc 1 708 0
 572 008e 0A68     		ldr	r2, [r1]
 573 0090 A05C     		ldrb	r0, [r4, r2]	@ zero_extendqisi2
 574              	.LVL40:
 575 0092 0132     		adds	r2, r2, #1
 576 0094 A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 577 0096 00EB0222 		add	r2, r0, r2, lsl #8
 578 009a 1A80     		strh	r2, [r3]	@ movhi
 709:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 579              		.loc 1 709 0
 580 009c 0B68     		ldr	r3, [r1]
 581              	.LVL41:
 582 009e 0233     		adds	r3, r3, #2
 583 00a0 0B60     		str	r3, [r1]
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT32:
 584              		.loc 1 710 0
 585 00a2 E8E0     		b	.L10
 586              	.LVL42:
 587              	.L19:
 712:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 4;                
 588              		.loc 1 712 0
 589 00a4 0868     		ldr	r0, [r1]
 590              	.LVL43:
 591 00a6 225C     		ldrb	r2, [r4, r0]	@ zero_extendqisi2
 592 00a8 451C     		adds	r5, r0, #1
 593 00aa 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 594 00ac 02EB0522 		add	r2, r2, r5, lsl #8
 595 00b0 851C     		adds	r5, r0, #2
 596 00b2 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 597 00b4 02EB0542 		add	r2, r2, r5, lsl #16
 598 00b8 0330     		adds	r0, r0, #3
 599 00ba 205C     		ldrb	r0, [r4, r0]	@ zero_extendqisi2
 600 00bc 02EB0062 		add	r2, r2, r0, lsl #24
 601 00c0 1A60     		str	r2, [r3]
 713:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 602              		.loc 1 713 0
 603 00c2 0B68     		ldr	r3, [r1]
 604              	.LVL44:
 605 00c4 0433     		adds	r3, r3, #4
 606 00c6 0B60     		str	r3, [r1]
 714:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT32:
 607              		.loc 1 714 0
ARM GAS  /tmp/ccSoqm0V.s 			page 27


 608 00c8 D5E0     		b	.L10
 609              	.LVL45:
 610              	.L12:
 716:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 4;                
 611              		.loc 1 716 0
 612 00ca 0868     		ldr	r0, [r1]
 613              	.LVL46:
 614 00cc 225C     		ldrb	r2, [r4, r0]	@ zero_extendqisi2
 615 00ce 451C     		adds	r5, r0, #1
 616 00d0 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 617 00d2 02EB0522 		add	r2, r2, r5, lsl #8
 618 00d6 851C     		adds	r5, r0, #2
 619 00d8 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 620 00da 02EB0542 		add	r2, r2, r5, lsl #16
 621 00de 0330     		adds	r0, r0, #3
 622 00e0 205C     		ldrb	r0, [r4, r0]	@ zero_extendqisi2
 623 00e2 02EB0062 		add	r2, r2, r0, lsl #24
 624 00e6 1A60     		str	r2, [r3]
 717:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 625              		.loc 1 717 0
 626 00e8 0B68     		ldr	r3, [r1]
 627              	.LVL47:
 628 00ea 0433     		adds	r3, r3, #4
 629 00ec 0B60     		str	r3, [r1]
 718:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT64:
 630              		.loc 1 718 0
 631 00ee C2E0     		b	.L10
 632              	.LVL48:
 633              	.L22:
 720:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 8;                
 634              		.loc 1 720 0
 635 00f0 0A68     		ldr	r2, [r1]
 636 00f2 14F80280 		ldrb	r8, [r4, r2]	@ zero_extendqisi2
 637 00f6 4FF00009 		mov	r9, #0
 638 00fa 501C     		adds	r0, r2, #1
 639              	.LVL49:
 640 00fc 14F800A0 		ldrb	r10, [r4, r0]	@ zero_extendqisi2
 641 0100 0027     		movs	r7, #0
 642 0102 4FEA0A26 		lsl	r6, r10, #8
 643 0106 18EB060A 		adds	r10, r8, r6
 644 010a 49EB070B 		adc	fp, r9, r7
 645 010e 901C     		adds	r0, r2, #2
 646 0110 14F80080 		ldrb	r8, [r4, r0]	@ zero_extendqisi2
 647 0114 0027     		movs	r7, #0
 648 0116 4FEA0846 		lsl	r6, r8, #16
 649 011a 1AEB060A 		adds	r10, r10, r6
 650 011e 4BEB070B 		adc	fp, fp, r7
 651 0122 D01C     		adds	r0, r2, #3
 652 0124 14F80080 		ldrb	r8, [r4, r0]	@ zero_extendqisi2
 653 0128 0027     		movs	r7, #0
 654 012a 4FEA0866 		lsl	r6, r8, #24
 655 012e 16EB0A06 		adds	r6, r6, r10
 656 0132 47EB0B07 		adc	r7, r7, fp
 657 0136 101D     		adds	r0, r2, #4
 658 0138 4FF00008 		mov	r8, #0
 659 013c 14F80090 		ldrb	r9, [r4, r0]	@ zero_extendqisi2
 660 0140 16EB080A 		adds	r10, r6, r8
ARM GAS  /tmp/ccSoqm0V.s 			page 28


 661 0144 47EB090B 		adc	fp, r7, r9
 662 0148 CDE900AB 		strd	r10, [sp]
 663 014c 501D     		adds	r0, r2, #5
 664 014e 14F800A0 		ldrb	r10, [r4, r0]	@ zero_extendqisi2
 665 0152 4FEA0A27 		lsl	r7, r10, #8
 666 0156 DDE900AB 		ldrd	r10, [sp]
 667 015a 1AEB080A 		adds	r10, r10, r8
 668 015e 4BEB070B 		adc	fp, fp, r7
 669 0162 CDE900AB 		strd	r10, [sp]
 670 0166 901D     		adds	r0, r2, #6
 671 0168 14F800A0 		ldrb	r10, [r4, r0]	@ zero_extendqisi2
 672 016c 4FEA0A47 		lsl	r7, r10, #16
 673 0170 DDE900AB 		ldrd	r10, [sp]
 674 0174 1AEB080A 		adds	r10, r10, r8
 675 0178 4BEB070B 		adc	fp, fp, r7
 676 017c 5646     		mov	r6, r10
 677 017e 5F46     		mov	r7, fp
 678 0180 0732     		adds	r2, r2, #7
 679 0182 14F802A0 		ldrb	r10, [r4, r2]	@ zero_extendqisi2
 680 0186 4FEA0A65 		lsl	r5, r10, #24
 681 018a 16EB0806 		adds	r6, r6, r8
 682 018e 6F41     		adcs	r7, r7, r5
 683 0190 C3E90067 		strd	r6, [r3]
 721:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 684              		.loc 1 721 0
 685 0194 0B68     		ldr	r3, [r1]
 686              	.LVL50:
 687 0196 0833     		adds	r3, r3, #8
 688 0198 0B60     		str	r3, [r1]
 722:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_UINT64:
 689              		.loc 1 722 0
 690 019a 6CE0     		b	.L10
 691              	.LVL51:
 692              	.L23:
 724:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += 8;                
 693              		.loc 1 724 0
 694 019c 0A68     		ldr	r2, [r1]
 695 019e 14F80280 		ldrb	r8, [r4, r2]	@ zero_extendqisi2
 696 01a2 4FF00009 		mov	r9, #0
 697 01a6 501C     		adds	r0, r2, #1
 698              	.LVL52:
 699 01a8 14F800A0 		ldrb	r10, [r4, r0]	@ zero_extendqisi2
 700 01ac 0027     		movs	r7, #0
 701 01ae 4FEA0A26 		lsl	r6, r10, #8
 702 01b2 18EB060A 		adds	r10, r8, r6
 703 01b6 49EB070B 		adc	fp, r9, r7
 704 01ba 901C     		adds	r0, r2, #2
 705 01bc 14F80080 		ldrb	r8, [r4, r0]	@ zero_extendqisi2
 706 01c0 0027     		movs	r7, #0
 707 01c2 4FEA0846 		lsl	r6, r8, #16
 708 01c6 1AEB060A 		adds	r10, r10, r6
 709 01ca 4BEB070B 		adc	fp, fp, r7
 710 01ce D01C     		adds	r0, r2, #3
 711 01d0 14F80080 		ldrb	r8, [r4, r0]	@ zero_extendqisi2
 712 01d4 0027     		movs	r7, #0
 713 01d6 4FEA0866 		lsl	r6, r8, #24
 714 01da 16EB0A06 		adds	r6, r6, r10
ARM GAS  /tmp/ccSoqm0V.s 			page 29


 715 01de 47EB0B07 		adc	r7, r7, fp
 716 01e2 101D     		adds	r0, r2, #4
 717 01e4 4FF00008 		mov	r8, #0
 718 01e8 14F80090 		ldrb	r9, [r4, r0]	@ zero_extendqisi2
 719 01ec 16EB080A 		adds	r10, r6, r8
 720 01f0 47EB090B 		adc	fp, r7, r9
 721 01f4 CDE900AB 		strd	r10, [sp]
 722 01f8 501D     		adds	r0, r2, #5
 723 01fa 14F800A0 		ldrb	r10, [r4, r0]	@ zero_extendqisi2
 724 01fe 4FEA0A27 		lsl	r7, r10, #8
 725 0202 DDE900AB 		ldrd	r10, [sp]
 726 0206 1AEB080A 		adds	r10, r10, r8
 727 020a 4BEB070B 		adc	fp, fp, r7
 728 020e CDE900AB 		strd	r10, [sp]
 729 0212 901D     		adds	r0, r2, #6
 730 0214 14F800A0 		ldrb	r10, [r4, r0]	@ zero_extendqisi2
 731 0218 4FEA0A47 		lsl	r7, r10, #16
 732 021c DDE900AB 		ldrd	r10, [sp]
 733 0220 1AEB080A 		adds	r10, r10, r8
 734 0224 4BEB070B 		adc	fp, fp, r7
 735 0228 5646     		mov	r6, r10
 736 022a 5F46     		mov	r7, fp
 737 022c 0732     		adds	r2, r2, #7
 738 022e 14F802A0 		ldrb	r10, [r4, r2]	@ zero_extendqisi2
 739 0232 4FEA0A65 		lsl	r5, r10, #24
 740 0236 16EB0806 		adds	r6, r6, r8
 741 023a 6F41     		adcs	r7, r7, r5
 742 023c C3E90067 		strd	r6, [r3]
 725:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 743              		.loc 1 725 0
 744 0240 0B68     		ldr	r3, [r1]
 745              	.LVL53:
 746 0242 0833     		adds	r3, r3, #8
 747 0244 0B60     		str	r3, [r1]
 726:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 748              		.loc 1 726 0
 749 0246 16E0     		b	.L10
 750              	.LVL54:
 751              	.L24:
 729:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 752              		.loc 1 729 0
 753 0248 0B68     		ldr	r3, [r1]
 754              	.LVL55:
 755 024a 1033     		adds	r3, r3, #16
 756 024c 0B60     		str	r3, [r1]
 757              	.LVL56:
 730:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_DTC_INT128:
 758              		.loc 1 730 0
 759 024e 12E0     		b	.L10
 760              	.LVL57:
 761              	.L20:
 732:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 762              		.loc 1 732 0
 763 0250 0B68     		ldr	r3, [r1]
 764              	.LVL58:
 765 0252 1033     		adds	r3, r3, #16
 766 0254 0B60     		str	r3, [r1]
ARM GAS  /tmp/ccSoqm0V.s 			page 30


 767              	.LVL59:
 733:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  
 768              		.loc 1 733 0
 769 0256 0EE0     		b	.L10
 770              	.LVL60:
 771              	.L25:
 772 0258 1846     		mov	r0, r3
 773 025a 0D46     		mov	r5, r1
 737:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     *offset += len*2+1;
 774              		.loc 1 737 0
 775 025c 0968     		ldr	r1, [r1]
 776              	.LVL61:
 777 025e 0DF10E02 		add	r2, sp, #14
 778 0262 2144     		add	r1, r1, r4
 779 0264 FFF7FEFF 		bl	PTP_GetString
 780              	.LVL62:
 738:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 781              		.loc 1 738 0
 782 0268 BDF80E20 		ldrh	r2, [sp, #14]
 783 026c 2B68     		ldr	r3, [r5]
 784 026e 03EB4203 		add	r3, r3, r2, lsl #1
 785 0272 0133     		adds	r3, r3, #1
 786 0274 2B60     		str	r3, [r5]
 787              	.LVL63:
 788              	.L10:
 743:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 789              		.loc 1 743 0
 790 0276 05B0     		add	sp, sp, #20
 791              	.LCFI10:
 792              		.cfi_def_cfa_offset 36
 793              		@ sp needed
 794 0278 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 795              		.cfi_endproc
 796              	.LFE134:
 798              		.section	.text.PTP_GetObjectPropDesc,"ax",%progbits
 799              		.align	2
 800              		.thumb
 801              		.thumb_func
 803              	PTP_GetObjectPropDesc:
 804              	.LFB133:
 635:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 805              		.loc 1 635 0
 806              		.cfi_startproc
 807              		@ args = 0, pretend = 0, frame = 8
 808              		@ frame_needed = 0, uses_anonymous_args = 0
 809              	.LVL64:
 810 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 811              	.LCFI11:
 812              		.cfi_def_cfa_offset 20
 813              		.cfi_offset 4, -20
 814              		.cfi_offset 5, -16
 815              		.cfi_offset 6, -12
 816              		.cfi_offset 7, -8
 817              		.cfi_offset 14, -4
 818 0002 85B0     		sub	sp, sp, #20
 819              	.LCFI12:
 820              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/ccSoqm0V.s 			page 31


 821 0004 0646     		mov	r6, r0
 822 0006 0C46     		mov	r4, r1
 823 0008 1746     		mov	r7, r2
 636:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 824              		.loc 1 636 0
 825 000a D0F84435 		ldr	r3, [r0, #1348]
 826 000e DB69     		ldr	r3, [r3, #28]
 827              	.LVL65:
 637:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t offset = 0, i;
 828              		.loc 1 637 0
 829 0010 41F69051 		movw	r1, #7568
 830              	.LVL66:
 831 0014 5D18     		adds	r5, r3, r1
 832              	.LVL67:
 640:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   opd->DataType=LE16(&data[PTP_opd_DataType]);
 833              		.loc 1 640 0
 834 0016 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
 835 0018 41F6915E 		movw	lr, #7569
 836 001c 13F80EE0 		ldrb	lr, [r3, lr]	@ zero_extendqisi2
 837 0020 01EB0E21 		add	r1, r1, lr, lsl #8
 838 0024 2180     		strh	r1, [r4]	@ movhi
 641:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   opd->GetSet=*(uint8_t *)(&data[PTP_opd_GetSet]);
 839              		.loc 1 641 0
 840 0026 41F69251 		movw	r1, #7570
 841 002a 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
 842 002c 41F6935E 		movw	lr, #7571
 843 0030 13F80EE0 		ldrb	lr, [r3, lr]	@ zero_extendqisi2
 844 0034 01EB0E21 		add	r1, r1, lr, lsl #8
 845 0038 6180     		strh	r1, [r4, #2]	@ movhi
 642:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 846              		.loc 1 642 0
 847 003a 41F69451 		movw	r1, #7572
 848 003e 5B5C     		ldrb	r3, [r3, r1]	@ zero_extendqisi2
 849              	.LVL68:
 850 0040 2371     		strb	r3, [r4, #4]
 644:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_GetDevicePropValue (phost, &offset, opdlen, &opd->FactoryDefaultValue, opd->DataType);
 851              		.loc 1 644 0
 852 0042 04A9     		add	r1, sp, #16
 853 0044 0523     		movs	r3, #5
 854 0046 41F8043D 		str	r3, [r1, #-4]!
 645:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 855              		.loc 1 645 0
 856 004a 6388     		ldrh	r3, [r4, #2]
 857 004c 0093     		str	r3, [sp]
 858 004e 04F10803 		add	r3, r4, #8
 859 0052 FFF7FEFF 		bl	PTP_GetDevicePropValue
 860              	.LVL69:
 647:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   offset+=sizeof(uint32_t);
 861              		.loc 1 647 0
 862 0056 039B     		ldr	r3, [sp, #12]
 863 0058 EA5C     		ldrb	r2, [r5, r3]	@ zero_extendqisi2
 864 005a 591C     		adds	r1, r3, #1
 865 005c 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
 866 005e 02EB0122 		add	r2, r2, r1, lsl #8
 867 0062 991C     		adds	r1, r3, #2
 868 0064 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
 869 0066 02EB0142 		add	r2, r2, r1, lsl #16
ARM GAS  /tmp/ccSoqm0V.s 			page 32


 870 006a D91C     		adds	r1, r3, #3
 871 006c 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
 872 006e 02EB0162 		add	r2, r2, r1, lsl #24
 873 0072 C4F80821 		str	r2, [r4, #264]
 648:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 874              		.loc 1 648 0
 875 0076 1A1D     		adds	r2, r3, #4
 876 0078 0392     		str	r2, [sp, #12]
 650:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   offset+=sizeof(uint8_t);
 877              		.loc 1 650 0
 878 007a AA5C     		ldrb	r2, [r5, r2]	@ zero_extendqisi2
 879 007c 84F80C21 		strb	r2, [r4, #268]
 651:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 880              		.loc 1 651 0
 881 0080 0533     		adds	r3, r3, #5
 882 0082 0393     		str	r3, [sp, #12]
 653:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 883              		.loc 1 653 0
 884 0084 012A     		cmp	r2, #1
 885 0086 02D0     		beq	.L29
 886 0088 022A     		cmp	r2, #2
 887 008a 1CD0     		beq	.L30
 888 008c 36E0     		b	.L27
 889              	.L29:
 656:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetDevicePropValue(phost, &offset, opdlen, &opd->FORM.Range.MaximumValue, opd->DataType);
 890              		.loc 1 656 0
 891 008e 6388     		ldrh	r3, [r4, #2]
 892 0090 0093     		str	r3, [sp]
 893 0092 04F58873 		add	r3, r4, #272
 894 0096 3A46     		mov	r2, r7
 895 0098 03A9     		add	r1, sp, #12
 896 009a 3046     		mov	r0, r6
 897 009c FFF7FEFF 		bl	PTP_GetDevicePropValue
 898              	.LVL70:
 657:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetDevicePropValue(phost, &offset, opdlen, &opd->FORM.Range.StepSize, opd->DataType);
 899              		.loc 1 657 0
 900 00a0 6388     		ldrh	r3, [r4, #2]
 901 00a2 0093     		str	r3, [sp]
 902 00a4 04F50473 		add	r3, r4, #528
 903 00a8 3A46     		mov	r2, r7
 904 00aa 03A9     		add	r1, sp, #12
 905 00ac 3046     		mov	r0, r6
 906 00ae FFF7FEFF 		bl	PTP_GetDevicePropValue
 907              	.LVL71:
 658:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 908              		.loc 1 658 0
 909 00b2 6388     		ldrh	r3, [r4, #2]
 910 00b4 0093     		str	r3, [sp]
 911 00b6 04F54473 		add	r3, r4, #784
 912 00ba 3A46     		mov	r2, r7
 913 00bc 03A9     		add	r1, sp, #12
 914 00be 3046     		mov	r0, r6
 915 00c0 FFF7FEFF 		bl	PTP_GetDevicePropValue
 916              	.LVL72:
 659:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 917              		.loc 1 659 0
 918 00c4 1AE0     		b	.L27
ARM GAS  /tmp/ccSoqm0V.s 			page 33


 919              	.L30:
 663:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     offset+=sizeof(uint16_t);
 920              		.loc 1 663 0
 921 00c6 EA5C     		ldrb	r2, [r5, r3]	@ zero_extendqisi2
 922 00c8 591C     		adds	r1, r3, #1
 923 00ca 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
 924 00cc 02EB0122 		add	r2, r2, r1, lsl #8
 925 00d0 A4F81021 		strh	r2, [r4, #272]	@ movhi
 664:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 926              		.loc 1 664 0
 927 00d4 0233     		adds	r3, r3, #2
 928 00d6 0393     		str	r3, [sp, #12]
 929              	.LVL73:
 666:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 930              		.loc 1 666 0
 931 00d8 0025     		movs	r5, #0
 932              	.LVL74:
 933 00da 0BE0     		b	.L31
 934              	.LVL75:
 935              	.L32:
 668:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 936              		.loc 1 668 0 discriminator 3
 937 00dc 2B02     		lsls	r3, r5, #8
 938 00de 03F58C73 		add	r3, r3, #280
 939 00e2 6288     		ldrh	r2, [r4, #2]
 940 00e4 0092     		str	r2, [sp]
 941 00e6 2344     		add	r3, r3, r4
 942 00e8 3A46     		mov	r2, r7
 943 00ea 03A9     		add	r1, sp, #12
 944 00ec 3046     		mov	r0, r6
 945 00ee FFF7FEFF 		bl	PTP_GetDevicePropValue
 946              	.LVL76:
 666:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 947              		.loc 1 666 0 discriminator 3
 948 00f2 0135     		adds	r5, r5, #1
 949              	.LVL77:
 950              	.L31:
 666:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 951              		.loc 1 666 0 is_stmt 0 discriminator 1
 952 00f4 B4F81031 		ldrh	r3, [r4, #272]
 953 00f8 9D42     		cmp	r5, r3
 954 00fa EFD3     		bcc	.L32
 955              	.LVL78:
 956              	.L27:
 674:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 957              		.loc 1 674 0 is_stmt 1
 958 00fc 05B0     		add	sp, sp, #20
 959              	.LCFI13:
 960              		.cfi_def_cfa_offset 20
 961              		@ sp needed
 962 00fe F0BD     		pop	{r4, r5, r6, r7, pc}
 963              		.cfi_endproc
 964              	.LFE133:
 966              		.section	.text.PTP_GetObjectPropList,"ax",%progbits
 967              		.align	2
 968              		.thumb
 969              		.thumb_func
ARM GAS  /tmp/ccSoqm0V.s 			page 34


 971              	PTP_GetObjectPropList:
 972              	.LFB135:
 756:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 973              		.loc 1 756 0
 974              		.cfi_startproc
 975              		@ args = 0, pretend = 0, frame = 8
 976              		@ frame_needed = 0, uses_anonymous_args = 0
 977              	.LVL79:
 978 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 979              	.LCFI14:
 980              		.cfi_def_cfa_offset 28
 981              		.cfi_offset 4, -28
 982              		.cfi_offset 5, -24
 983              		.cfi_offset 6, -20
 984              		.cfi_offset 7, -16
 985              		.cfi_offset 8, -12
 986              		.cfi_offset 9, -8
 987              		.cfi_offset 14, -4
 988 0004 85B0     		sub	sp, sp, #20
 989              	.LCFI15:
 990              		.cfi_def_cfa_offset 48
 757:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 991              		.loc 1 757 0
 992 0006 D0F84435 		ldr	r3, [r0, #1348]
 993 000a DC69     		ldr	r4, [r3, #28]
 994              	.LVL80:
 760:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 995              		.loc 1 760 0
 996 000c 0023     		movs	r3, #0
 997 000e 0393     		str	r3, [sp, #12]
 762:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 998              		.loc 1 762 0
 999 0010 41F69053 		movw	r3, #7568
 1000 0014 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1001 0016 41F69155 		movw	r5, #7569
 1002 001a 675D     		ldrb	r7, [r4, r5]	@ zero_extendqisi2
 1003 001c 03EB0723 		add	r3, r3, r7, lsl #8
 1004 0020 41F69255 		movw	r5, #7570
 1005 0024 675D     		ldrb	r7, [r4, r5]	@ zero_extendqisi2
 1006 0026 03EB0743 		add	r3, r3, r7, lsl #16
 1007 002a 41F69355 		movw	r5, #7571
 1008 002e 675D     		ldrb	r7, [r4, r5]	@ zero_extendqisi2
 1009              	.LVL81:
 765:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  {
 1010              		.loc 1 765 0
 1011 0030 13EB0767 		adds	r7, r3, r7, lsl #24
 1012              	.LVL82:
 1013 0034 38D0     		beq	.L38
 1014 0036 8846     		mov	r8, r1
 1015 0038 8146     		mov	r9, r0
 770:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  len -= sizeof(uint32_t);
 1016              		.loc 1 770 0
 1017 003a 04F5EC54 		add	r4, r4, #7552
 1018              	.LVL83:
 1019 003e 1434     		adds	r4, r4, #20
 1020              	.LVL84:
 771:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  
ARM GAS  /tmp/ccSoqm0V.s 			page 35


 1021              		.loc 1 771 0
 1022 0040 043A     		subs	r2, r2, #4
 1023              	.LVL85:
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  {
 1024              		.loc 1 773 0
 1025 0042 0026     		movs	r6, #0
 1026 0044 2CE0     		b	.L36
 1027              	.LVL86:
 1028              	.L37:
 775:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    {
 1029              		.loc 1 775 0
 1030 0046 8AB3     		cbz	r2, .L39
 780:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    data += sizeof(uint32_t);
 1031              		.loc 1 780 0 discriminator 2
 1032 0048 06EB4610 		add	r0, r6, r6, lsl #5
 1033 004c 08EBC003 		add	r3, r8, r0, lsl #3
 1034 0050 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 1035 0052 6578     		ldrb	r5, [r4, #1]	@ zero_extendqisi2
 1036 0054 01EB0525 		add	r5, r1, r5, lsl #8
 1037 0058 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1038 005a 05EB0145 		add	r5, r5, r1, lsl #16
 1039 005e E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 1040 0060 05EB0165 		add	r5, r5, r1, lsl #24
 1041 0064 5D60     		str	r5, [r3, #4]
 1042              	.LVL87:
 784:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    data += sizeof(uint16_t);
 1043              		.loc 1 784 0 discriminator 2
 1044 0066 2179     		ldrb	r1, [r4, #4]	@ zero_extendqisi2
 1045 0068 6579     		ldrb	r5, [r4, #5]	@ zero_extendqisi2
 1046 006a 01EB0521 		add	r1, r1, r5, lsl #8
 1047 006e 28F83010 		strh	r1, [r8, r0, lsl #3]	@ movhi
 1048              	.LVL88:
 788:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    data += sizeof(uint16_t);
 1049              		.loc 1 788 0 discriminator 2
 1050 0072 A179     		ldrb	r1, [r4, #6]	@ zero_extendqisi2
 1051 0074 E079     		ldrb	r0, [r4, #7]	@ zero_extendqisi2
 1052 0076 01EB0020 		add	r0, r1, r0, lsl #8
 1053 007a 5880     		strh	r0, [r3, #2]	@ movhi
 789:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    len -= sizeof(uint16_t);
 1054              		.loc 1 789 0 discriminator 2
 1055 007c 0834     		adds	r4, r4, #8
 1056              	.LVL89:
 790:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 1057              		.loc 1 790 0 discriminator 2
 1058 007e A2F10805 		sub	r5, r2, #8
 1059              	.LVL90:
 792:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 1060              		.loc 1 792 0 discriminator 2
 1061 0082 04A9     		add	r1, sp, #16
 1062 0084 0022     		movs	r2, #0
 1063 0086 41F8042D 		str	r2, [r1, #-4]!
 794:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 1064              		.loc 1 794 0 discriminator 2
 1065 008a 80B2     		uxth	r0, r0
 1066 008c 0090     		str	r0, [sp]
 1067 008e 0833     		adds	r3, r3, #8
 1068 0090 2A46     		mov	r2, r5
ARM GAS  /tmp/ccSoqm0V.s 			page 36


 1069 0092 4846     		mov	r0, r9
 1070 0094 FFF7FEFF 		bl	PTP_GetDevicePropValue
 1071              	.LVL91:
 796:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    len -= offset;
 1072              		.loc 1 796 0 discriminator 2
 1073 0098 039A     		ldr	r2, [sp, #12]
 1074 009a 1444     		add	r4, r4, r2
 1075              	.LVL92:
 797:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  }
 1076              		.loc 1 797 0 discriminator 2
 1077 009c AA1A     		subs	r2, r5, r2
 1078              	.LVL93:
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  {
 1079              		.loc 1 773 0 discriminator 2
 1080 009e 0136     		adds	r6, r6, #1
 1081              	.LVL94:
 1082              	.L36:
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  {
 1083              		.loc 1 773 0 is_stmt 0 discriminator 1
 1084 00a0 BE42     		cmp	r6, r7
 1085 00a2 D0D3     		bcc	.L37
 800:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 1086              		.loc 1 800 0 is_stmt 1
 1087 00a4 3846     		mov	r0, r7
 1088 00a6 02E0     		b	.L35
 1089              	.LVL95:
 1090              	.L38:
 767:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****  }
 1091              		.loc 1 767 0
 1092 00a8 0020     		movs	r0, #0
 1093              	.LVL96:
 1094 00aa 00E0     		b	.L35
 1095              	.LVL97:
 1096              	.L39:
 777:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    }
 1097              		.loc 1 777 0
 1098 00ac 0020     		movs	r0, #0
 1099              	.LVL98:
 1100              	.L35:
 801:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 1101              		.loc 1 801 0
 1102 00ae 05B0     		add	sp, sp, #20
 1103              	.LCFI16:
 1104              		.cfi_def_cfa_offset 28
 1105              		@ sp needed
 1106 00b0 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1107              		.cfi_endproc
 1108              	.LFE135:
 1110              		.section	.text.PTP_GetArray16,"ax",%progbits
 1111              		.align	2
 1112              		.thumb
 1113              		.thumb_func
 1115              	PTP_GetArray16:
 1116              	.LFB137:
 827:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 828:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 829:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetString
ARM GAS  /tmp/ccSoqm0V.s 			page 37


 830:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets SCII String from.
 831:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  str: ascii string
 832:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  data: Device info structure
 833:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 834:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */              
 835:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 836:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static uint32_t PTP_GetArray16 (uint16_t *array, uint8_t *data, uint32_t offset)
 837:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 1117              		.loc 1 837 0
 1118              		.cfi_startproc
 1119              		@ args = 0, pretend = 0, frame = 0
 1120              		@ frame_needed = 0, uses_anonymous_args = 0
 1121              		@ link register save eliminated.
 1122              	.LVL99:
 1123 0000 70B4     		push	{r4, r5, r6}
 1124              	.LCFI17:
 1125              		.cfi_def_cfa_offset 12
 1126              		.cfi_offset 4, -12
 1127              		.cfi_offset 5, -8
 1128              		.cfi_offset 6, -4
 1129 0002 0646     		mov	r6, r0
 1130              	.LVL100:
 838:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t size, idx = 0;
 839:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 840:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   size=LE32(&data[offset]);
 1131              		.loc 1 840 0
 1132 0004 8B5C     		ldrb	r3, [r1, r2]	@ zero_extendqisi2
 1133 0006 501C     		adds	r0, r2, #1
 1134              	.LVL101:
 1135 0008 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 1136 000a 03EB0023 		add	r3, r3, r0, lsl #8
 1137 000e 901C     		adds	r0, r2, #2
 1138 0010 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 1139 0012 03EB0043 		add	r3, r3, r0, lsl #16
 1140 0016 D01C     		adds	r0, r2, #3
 1141 0018 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 1142 001a 03EB0060 		add	r0, r3, r0, lsl #24
 1143              	.LVL102:
 838:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t size, idx = 0;
 1144              		.loc 1 838 0
 1145 001e 0024     		movs	r4, #0
 841:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   while (size > idx) 
 1146              		.loc 1 841 0
 1147 0020 0AE0     		b	.L42
 1148              	.LVL103:
 1149              	.L43:
 842:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 843:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     array[idx] = LE16(&data[offset+(sizeof(uint16_t)*(idx+2))]);
 1150              		.loc 1 843 0
 1151 0022 A31C     		adds	r3, r4, #2
 1152 0024 02EB4303 		add	r3, r2, r3, lsl #1
 1153 0028 CD5C     		ldrb	r5, [r1, r3]	@ zero_extendqisi2
 1154 002a 0133     		adds	r3, r3, #1
 1155 002c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 1156 002e 05EB0323 		add	r3, r5, r3, lsl #8
 1157 0032 26F81430 		strh	r3, [r6, r4, lsl #1]	@ movhi
 844:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     idx++;
ARM GAS  /tmp/ccSoqm0V.s 			page 38


 1158              		.loc 1 844 0
 1159 0036 0134     		adds	r4, r4, #1
 1160              	.LVL104:
 1161              	.L42:
 841:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   while (size > idx) 
 1162              		.loc 1 841 0
 1163 0038 8442     		cmp	r4, r0
 1164 003a F2D3     		bcc	.L43
 845:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 846:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return size;
 847:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 1165              		.loc 1 847 0
 1166 003c 70BC     		pop	{r4, r5, r6}
 1167              	.LCFI18:
 1168              		.cfi_restore 6
 1169              		.cfi_restore 5
 1170              		.cfi_restore 4
 1171              		.cfi_def_cfa_offset 0
 1172              	.LVL105:
 1173 003e 7047     		bx	lr
 1174              		.cfi_endproc
 1175              	.LFE137:
 1177              		.section	.text.PTP_DecodeDeviceInfo,"ax",%progbits
 1178              		.align	2
 1179              		.thumb
 1180              		.thumb_func
 1182              	PTP_DecodeDeviceInfo:
 1183              	.LFB129:
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 1184              		.loc 1 490 0
 1185              		.cfi_startproc
 1186              		@ args = 0, pretend = 0, frame = 8
 1187              		@ frame_needed = 0, uses_anonymous_args = 0
 1188              	.LVL106:
 491:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 1189              		.loc 1 491 0
 1190 0000 D0F84435 		ldr	r3, [r0, #1348]
 1191 0004 DB69     		ldr	r3, [r3, #28]
 1192              	.LVL107:
 500:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 1193              		.loc 1 500 0
 1194 0006 42F2BC12 		movw	r2, #8636
 1195 000a 9A58     		ldr	r2, [r3, r2]
 1196 000c 002A     		cmp	r2, #0
 1197 000e 40F0AA80 		bne	.L48
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 1198              		.loc 1 490 0
 1199 0012 70B5     		push	{r4, r5, r6, lr}
 1200              	.LCFI19:
 1201              		.cfi_def_cfa_offset 16
 1202              		.cfi_offset 4, -16
 1203              		.cfi_offset 5, -12
 1204              		.cfi_offset 6, -8
 1205              		.cfi_offset 14, -4
 1206 0014 82B0     		sub	sp, sp, #8
 1207              	.LCFI20:
 1208              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccSoqm0V.s 			page 39


 1209 0016 03F5EC55 		add	r5, r3, #7552
 1210              	.LVL108:
 1211 001a 1035     		adds	r5, r5, #16
 1212              	.LVL109:
 1213 001c 0C46     		mov	r4, r1
 502:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->VendorExtensionID = LE32(&data[PTP_di_VendorExtensionID]);
 1214              		.loc 1 502 0
 1215 001e 41F69052 		movw	r2, #7568
 1216 0022 9A5C     		ldrb	r2, [r3, r2]	@ zero_extendqisi2
 1217 0024 41F69151 		movw	r1, #7569
 1218              	.LVL110:
 1219 0028 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
 1220 002a 02EB0122 		add	r2, r2, r1, lsl #8
 1221 002e 2280     		strh	r2, [r4]	@ movhi
 503:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->VendorExtensionVersion = LE16(&data[PTP_di_VendorExtensionVersion]);
 1222              		.loc 1 503 0
 1223 0030 41F69252 		movw	r2, #7570
 1224 0034 9A5C     		ldrb	r2, [r3, r2]	@ zero_extendqisi2
 1225 0036 41F69351 		movw	r1, #7571
 1226 003a 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
 1227 003c 02EB0122 		add	r2, r2, r1, lsl #8
 1228 0040 41F69451 		movw	r1, #7572
 1229 0044 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
 1230 0046 02EB0142 		add	r2, r2, r1, lsl #16
 1231 004a 41F69551 		movw	r1, #7573
 1232 004e 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
 1233 0050 02EB0162 		add	r2, r2, r1, lsl #24
 1234 0054 6260     		str	r2, [r4, #4]
 504:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->VendorExtensionDesc, &data[PTP_di_VendorExtensionDesc], &len);
 1235              		.loc 1 504 0
 1236 0056 41F69652 		movw	r2, #7574
 1237 005a 9A5C     		ldrb	r2, [r3, r2]	@ zero_extendqisi2
 1238 005c 41F69751 		movw	r1, #7575
 1239 0060 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
 1240 0062 02EB0122 		add	r2, r2, r1, lsl #8
 1241 0066 2281     		strh	r2, [r4, #8]	@ movhi
 505:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 1242              		.loc 1 505 0
 1243 0068 0DF10602 		add	r2, sp, #6
 1244 006c 03F5EC51 		add	r1, r3, #7552
 1245              	.LVL111:
 1246 0070 1831     		adds	r1, r1, #24
 1247              	.LVL112:
 1248 0072 04F10A00 		add	r0, r4, #10
 1249              	.LVL113:
 1250 0076 FFF7FEFF 		bl	PTP_GetString
 1251              	.LVL114:
 507:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->FunctionalMode = LE16(&data[PTP_di_FunctionalMode+totallen]);
 1252              		.loc 1 507 0
 1253 007a BDF80620 		ldrh	r2, [sp, #6]
 1254 007e 5200     		lsls	r2, r2, #1
 1255 0080 561C     		adds	r6, r2, #1
 1256              	.LVL115:
 508:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->OperationsSupported_len = PTP_GetArray16 ((uint16_t *)&dev_info->OperationsSupported,
 1257              		.loc 1 508 0
 1258 0082 02F10903 		add	r3, r2, #9
 1259 0086 EB5C     		ldrb	r3, [r5, r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccSoqm0V.s 			page 40


 1260 0088 02F10A01 		add	r1, r2, #10
 1261 008c 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
 1262 008e 03EB0123 		add	r3, r3, r1, lsl #8
 1263 0092 A4F80A31 		strh	r3, [r4, #266]	@ movhi
 509:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 1264              		.loc 1 509 0
 1265 0096 0B32     		adds	r2, r2, #11
 1266 0098 2946     		mov	r1, r5
 1267 009a 04F58870 		add	r0, r4, #272
 1268 009e FFF7FEFF 		bl	PTP_GetArray16
 1269              	.LVL116:
 1270 00a2 C4F80C01 		str	r0, [r4, #268]
 513:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->EventsSupported_len = PTP_GetArray16 ((uint16_t *)&dev_info->EventsSupported, 
 1271              		.loc 1 513 0
 1272 00a6 06EB4002 		add	r2, r6, r0, lsl #1
 1273 00aa 161D     		adds	r6, r2, #4
 1274              	.LVL117:
 514:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 1275              		.loc 1 514 0
 1276 00ac 0E32     		adds	r2, r2, #14
 1277 00ae 2946     		mov	r1, r5
 1278 00b0 04F5EE70 		add	r0, r4, #476
 1279 00b4 FFF7FEFF 		bl	PTP_GetArray16
 1280              	.LVL118:
 1281 00b8 C4F8D801 		str	r0, [r4, #472]
 518:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->DevicePropertiesSupported_len = PTP_GetArray16 ((uint16_t *)&dev_info->DeviceProperti
 1282              		.loc 1 518 0
 1283 00bc 06EB4002 		add	r2, r6, r0, lsl #1
 1284 00c0 161D     		adds	r6, r2, #4
 1285              	.LVL119:
 519:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 1286              		.loc 1 519 0
 1287 00c2 0E32     		adds	r2, r2, #14
 1288 00c4 2946     		mov	r1, r5
 1289 00c6 04F52A70 		add	r0, r4, #680
 1290 00ca FFF7FEFF 		bl	PTP_GetArray16
 1291              	.LVL120:
 1292 00ce C4F8A402 		str	r0, [r4, #676]
 523:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 1293              		.loc 1 523 0
 1294 00d2 06EB4002 		add	r2, r6, r0, lsl #1
 1295 00d6 161D     		adds	r6, r2, #4
 1296              	.LVL121:
 525:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
 1297              		.loc 1 525 0
 1298 00d8 0E32     		adds	r2, r2, #14
 1299 00da 2946     		mov	r1, r5
 1300 00dc 04F55D70 		add	r0, r4, #884
 1301 00e0 FFF7FEFF 		bl	PTP_GetArray16
 1302              	.LVL122:
 1303 00e4 C4F87003 		str	r0, [r4, #880]
 529:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     dev_info->ImageFormats_len =  PTP_GetArray16 ((uint16_t *)&dev_info->ImageFormats, 
 1304              		.loc 1 529 0
 1305 00e8 06EB4002 		add	r2, r6, r0, lsl #1
 1306 00ec 161D     		adds	r6, r2, #4
 1307              	.LVL123:
 530:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                       data, 
ARM GAS  /tmp/ccSoqm0V.s 			page 41


 1308              		.loc 1 530 0
 1309 00ee 0E32     		adds	r2, r2, #14
 1310 00f0 2946     		mov	r1, r5
 1311 00f2 04F58860 		add	r0, r4, #1088
 1312 00f6 FFF7FEFF 		bl	PTP_GetArray16
 1313              	.LVL124:
 1314 00fa C4F83C04 		str	r0, [r4, #1084]
 534:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->Manufacturer, &data[PTP_di_OperationsSupported+totallen], &len);
 1315              		.loc 1 534 0
 1316 00fe 06EB4000 		add	r0, r6, r0, lsl #1
 1317 0102 061D     		adds	r6, r0, #4
 1318              	.LVL125:
 535:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 1319              		.loc 1 535 0
 1320 0104 00F10E01 		add	r1, r0, #14
 1321 0108 0DF10602 		add	r2, sp, #6
 1322 010c 2944     		add	r1, r1, r5
 1323 010e 04F5A160 		add	r0, r4, #1288
 1324 0112 FFF7FEFF 		bl	PTP_GetString
 1325              	.LVL126:
 537:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->Model, &data[PTP_di_OperationsSupported+totallen], &len);
 1326              		.loc 1 537 0
 1327 0116 BDF80610 		ldrh	r1, [sp, #6]
 1328 011a 06EB4101 		add	r1, r6, r1, lsl #1
 1329 011e 4E1C     		adds	r6, r1, #1
 1330              	.LVL127:
 538:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 1331              		.loc 1 538 0
 1332 0120 0B31     		adds	r1, r1, #11
 1333 0122 0DF10602 		add	r2, sp, #6
 1334 0126 2944     		add	r1, r1, r5
 1335 0128 04F20760 		addw	r0, r4, #1543
 1336 012c FFF7FEFF 		bl	PTP_GetString
 1337              	.LVL128:
 540:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->DeviceVersion, &data[PTP_di_OperationsSupported+totallen], &len);
 1338              		.loc 1 540 0
 1339 0130 BDF80610 		ldrh	r1, [sp, #6]
 1340 0134 06EB4101 		add	r1, r6, r1, lsl #1
 1341 0138 4E1C     		adds	r6, r1, #1
 1342              	.LVL129:
 541:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 1343              		.loc 1 541 0
 1344 013a 0B31     		adds	r1, r1, #11
 1345 013c 0DF10602 		add	r2, sp, #6
 1346 0140 2944     		add	r1, r1, r5
 1347 0142 04F20670 		addw	r0, r4, #1798
 1348 0146 FFF7FEFF 		bl	PTP_GetString
 1349              	.LVL130:
 543:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     PTP_GetString(dev_info->SerialNumber, &data[PTP_di_OperationsSupported+totallen], &len);
 1350              		.loc 1 543 0
 1351 014a BDF80610 		ldrh	r1, [sp, #6]
 1352 014e 06EB4101 		add	r1, r6, r1, lsl #1
 1353              	.LVL131:
 544:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 1354              		.loc 1 544 0
 1355 0152 0B31     		adds	r1, r1, #11
 1356              	.LVL132:
ARM GAS  /tmp/ccSoqm0V.s 			page 42


 1357 0154 0DF10602 		add	r2, sp, #6
 1358 0158 2944     		add	r1, r1, r5
 1359              	.LVL133:
 1360 015a 04F60500 		addw	r0, r4, #2053
 1361 015e FFF7FEFF 		bl	PTP_GetString
 1362              	.LVL134:
 546:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
 1363              		.loc 1 546 0
 1364 0162 02B0     		add	sp, sp, #8
 1365              	.LCFI21:
 1366              		.cfi_def_cfa_offset 16
 1367              		@ sp needed
 1368 0164 70BD     		pop	{r4, r5, r6, pc}
 1369              	.LVL135:
 1370              	.L48:
 1371              	.LCFI22:
 1372              		.cfi_def_cfa_offset 0
 1373              		.cfi_restore 4
 1374              		.cfi_restore 5
 1375              		.cfi_restore 6
 1376              		.cfi_restore 14
 1377 0166 7047     		bx	lr
 1378              		.cfi_endproc
 1379              	.LFE129:
 1381              		.section	.text.PTP_GetArray32,"ax",%progbits
 1382              		.align	2
 1383              		.thumb
 1384              		.thumb_func
 1386              	PTP_GetArray32:
 1387              	.LFB138:
 848:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 849:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 850:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  PTP_GetString
 851:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets SCII String from.
 852:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  str: ascii string
 853:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  data: Device info structure
 854:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval None
 855:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */              
 856:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 857:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** static uint32_t PTP_GetArray32 (uint32_t *array, uint8_t *data, uint32_t offset)
 858:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 1388              		.loc 1 858 0
 1389              		.cfi_startproc
 1390              		@ args = 0, pretend = 0, frame = 0
 1391              		@ frame_needed = 0, uses_anonymous_args = 0
 1392              	.LVL136:
 1393 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1394              	.LCFI23:
 1395              		.cfi_def_cfa_offset 20
 1396              		.cfi_offset 4, -20
 1397              		.cfi_offset 5, -16
 1398              		.cfi_offset 6, -12
 1399              		.cfi_offset 7, -8
 1400              		.cfi_offset 14, -4
 1401 0002 8646     		mov	lr, r0
 1402              	.LVL137:
 859:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t size, idx = 0;
ARM GAS  /tmp/ccSoqm0V.s 			page 43


 860:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 861:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   size=LE32(&data[offset]);
 1403              		.loc 1 861 0
 1404 0004 8B5C     		ldrb	r3, [r1, r2]	@ zero_extendqisi2
 1405 0006 501C     		adds	r0, r2, #1
 1406              	.LVL138:
 1407 0008 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 1408 000a 03EB0023 		add	r3, r3, r0, lsl #8
 1409 000e 901C     		adds	r0, r2, #2
 1410 0010 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 1411 0012 03EB0043 		add	r3, r3, r0, lsl #16
 1412 0016 D01C     		adds	r0, r2, #3
 1413 0018 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 1414 001a 03EB0060 		add	r0, r3, r0, lsl #24
 1415              	.LVL139:
 859:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint32_t size, idx = 0;
 1416              		.loc 1 859 0
 1417 001e 0025     		movs	r5, #0
 862:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   while (size > idx) 
 1418              		.loc 1 862 0
 1419 0020 12E0     		b	.L50
 1420              	.LVL140:
 1421              	.L51:
 863:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 864:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     array[idx] = LE32(&data[offset+(sizeof(uint32_t)*(idx+1))]);
 1422              		.loc 1 864 0
 1423 0022 AE00     		lsls	r6, r5, #2
 1424 0024 0135     		adds	r5, r5, #1
 1425              	.LVL141:
 1426 0026 02EB8504 		add	r4, r2, r5, lsl #2
 1427 002a 0B5D     		ldrb	r3, [r1, r4]	@ zero_extendqisi2
 1428 002c 671C     		adds	r7, r4, #1
 1429 002e CF5D     		ldrb	r7, [r1, r7]	@ zero_extendqisi2
 1430 0030 03EB0723 		add	r3, r3, r7, lsl #8
 1431 0034 A71C     		adds	r7, r4, #2
 1432 0036 CF5D     		ldrb	r7, [r1, r7]	@ zero_extendqisi2
 1433 0038 03EB0743 		add	r3, r3, r7, lsl #16
 1434 003c 0334     		adds	r4, r4, #3
 1435 003e 0C5D     		ldrb	r4, [r1, r4]	@ zero_extendqisi2
 1436 0040 03EB0463 		add	r3, r3, r4, lsl #24
 1437 0044 4EF80630 		str	r3, [lr, r6]
 1438              	.LVL142:
 1439              	.L50:
 862:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   while (size > idx) 
 1440              		.loc 1 862 0
 1441 0048 8542     		cmp	r5, r0
 1442 004a EAD3     		bcc	.L51
 865:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     idx++;
 866:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 867:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return size;
 868:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 1443              		.loc 1 868 0
 1444 004c F0BD     		pop	{r4, r5, r6, r7, pc}
 1445              		.cfi_endproc
 1446              	.LFE138:
 1448 004e 00BF     		.section	.text.PTP_GetStorageIDs,"ax",%progbits
 1449              		.align	2
ARM GAS  /tmp/ccSoqm0V.s 			page 44


 1450              		.thumb
 1451              		.thumb_func
 1453              	PTP_GetStorageIDs:
 1454              	.LFB130:
 556:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;   
 1455              		.loc 1 556 0
 1456              		.cfi_startproc
 1457              		@ args = 0, pretend = 0, frame = 0
 1458              		@ frame_needed = 0, uses_anonymous_args = 0
 1459              	.LVL143:
 1460 0000 10B5     		push	{r4, lr}
 1461              	.LCFI24:
 1462              		.cfi_def_cfa_offset 8
 1463              		.cfi_offset 4, -8
 1464              		.cfi_offset 14, -4
 1465 0002 0C46     		mov	r4, r1
 557:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t *data = MTP_Handle->ptp.data_container.payload.data;
 1466              		.loc 1 557 0
 1467 0004 D0F84435 		ldr	r3, [r0, #1348]
 1468 0008 D969     		ldr	r1, [r3, #28]
 1469              	.LVL144:
 560:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 1470              		.loc 1 560 0
 1471 000a 0022     		movs	r2, #0
 1472 000c 01F5EC51 		add	r1, r1, #7552
 1473              	.LVL145:
 1474 0010 1031     		adds	r1, r1, #16
 1475 0012 201D     		adds	r0, r4, #4
 1476              	.LVL146:
 1477 0014 FFF7FEFF 		bl	PTP_GetArray32
 1478              	.LVL147:
 1479 0018 2060     		str	r0, [r4]
 1480 001a 10BD     		pop	{r4, pc}
 1481              		.cfi_endproc
 1482              	.LFE130:
 1484              		.section	.text.PTP_BufferFullCallback,"ax",%progbits
 1485              		.align	2
 1486              		.thumb
 1487              		.thumb_func
 1489              	PTP_BufferFullCallback:
 1490              	.LFB128:
 443:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 1491              		.loc 1 443 0
 1492              		.cfi_startproc
 1493              		@ args = 0, pretend = 0, frame = 0
 1494              		@ frame_needed = 0, uses_anonymous_args = 0
 1495              	.LVL148:
 1496 0000 38B5     		push	{r3, r4, r5, lr}
 1497              	.LCFI25:
 1498              		.cfi_def_cfa_offset 16
 1499              		.cfi_offset 3, -16
 1500              		.cfi_offset 4, -12
 1501              		.cfi_offset 5, -8
 1502              		.cfi_offset 14, -4
 444:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 1503              		.loc 1 444 0
 1504 0002 D0F84435 		ldr	r3, [r0, #1348]
ARM GAS  /tmp/ccSoqm0V.s 			page 45


 1505 0006 DC69     		ldr	r4, [r3, #28]
 1506              	.LVL149:
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 1507              		.loc 1 446 0
 1508 0008 41F68A53 		movw	r3, #7562
 1509 000c E35A     		ldrh	r3, [r4, r3]
 1510 000e A3F58053 		sub	r3, r3, #4096
 1511 0012 013B     		subs	r3, r3, #1
 1512 0014 1A2B     		cmp	r3, #26
 1513 0016 34D8     		bhi	.L55
 1514 0018 DFE803F0 		tbb	[pc, r3]
 1515              	.L58:
 1516 001c 0E       		.byte	(.L57-.L58)/2
 1517 001d 33       		.byte	(.L55-.L58)/2
 1518 001e 33       		.byte	(.L55-.L58)/2
 1519 001f 33       		.byte	(.L55-.L58)/2
 1520 0020 33       		.byte	(.L55-.L58)/2
 1521 0021 33       		.byte	(.L55-.L58)/2
 1522 0022 33       		.byte	(.L55-.L58)/2
 1523 0023 33       		.byte	(.L55-.L58)/2
 1524 0024 12       		.byte	(.L59-.L58)/2
 1525 0025 33       		.byte	(.L55-.L58)/2
 1526 0026 33       		.byte	(.L55-.L58)/2
 1527 0027 33       		.byte	(.L55-.L58)/2
 1528 0028 27       		.byte	(.L60-.L58)/2
 1529 0029 33       		.byte	(.L55-.L58)/2
 1530 002a 33       		.byte	(.L55-.L58)/2
 1531 002b 33       		.byte	(.L55-.L58)/2
 1532 002c 33       		.byte	(.L55-.L58)/2
 1533 002d 33       		.byte	(.L55-.L58)/2
 1534 002e 33       		.byte	(.L55-.L58)/2
 1535 002f 33       		.byte	(.L55-.L58)/2
 1536 0030 33       		.byte	(.L55-.L58)/2
 1537 0031 33       		.byte	(.L55-.L58)/2
 1538 0032 33       		.byte	(.L55-.L58)/2
 1539 0033 33       		.byte	(.L55-.L58)/2
 1540 0034 33       		.byte	(.L55-.L58)/2
 1541 0035 33       		.byte	(.L55-.L58)/2
 1542 0036 12       		.byte	(.L59-.L58)/2
 1543 0037 00       		.p2align 1
 1544              	.L57:
 449:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 1545              		.loc 1 449 0
 1546 0038 2146     		mov	r1, r4
 1547 003a FFF7FEFF 		bl	PTP_DecodeDeviceInfo
 1548              	.LVL150:
 450:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 1549              		.loc 1 450 0
 1550 003e 38BD     		pop	{r3, r4, r5, pc}
 1551              	.LVL151:
 1552              	.L59:
 456:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 1553              		.loc 1 456 0
 1554 0040 42F2BC13 		movw	r3, #8636
 1555 0044 E358     		ldr	r3, [r4, r3]
 1556 0046 E3B9     		cbnz	r3, .L55
 459:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        
ARM GAS  /tmp/ccSoqm0V.s 			page 46


 1557              		.loc 1 459 0
 1558 0048 42F2C415 		movw	r5, #8644
 1559 004c 4FF47D72 		mov	r2, #1012
 1560 0050 04F5EC51 		add	r1, r4, #7552
 1561 0054 1031     		adds	r1, r1, #16
 1562 0056 6059     		ldr	r0, [r4, r5]
 1563              	.LVL152:
 1564 0058 FFF7FEFF 		bl	memcpy
 1565              	.LVL153:
 462:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 1566              		.loc 1 462 0
 1567 005c 6359     		ldr	r3, [r4, r5]
 1568 005e 03F57D73 		add	r3, r3, #1012
 1569 0062 42F2B012 		movw	r2, #8624
 1570 0066 A350     		str	r3, [r4, r2]
 1571 0068 38BD     		pop	{r3, r4, r5, pc}
 1572              	.LVL154:
 1573              	.L60:
 468:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 1574              		.loc 1 468 0
 1575 006a 42F2BC13 		movw	r3, #8636
 1576 006e E358     		ldr	r3, [r4, r3]
 1577 0070 3BB9     		cbnz	r3, .L55
 471:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 1578              		.loc 1 471 0
 1579 0072 42F2C413 		movw	r3, #8644
 1580 0076 E358     		ldr	r3, [r4, r3]
 1581 0078 03F57D73 		add	r3, r3, #1012
 1582 007c 42F2B012 		movw	r2, #8624
 1583 0080 A350     		str	r3, [r4, r2]
 1584              	.L55:
 1585 0082 38BD     		pop	{r3, r4, r5, pc}
 1586              		.cfi_endproc
 1587              	.LFE128:
 1589              		.section	.text.USBH_PTP_Init,"ax",%progbits
 1590              		.align	2
 1591              		.global	USBH_PTP_Init
 1592              		.thumb
 1593              		.thumb_func
 1595              	USBH_PTP_Init:
 1596              	.LFB124:
 126:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1597              		.loc 1 126 0
 1598              		.cfi_startproc
 1599              		@ args = 0, pretend = 0, frame = 0
 1600              		@ frame_needed = 0, uses_anonymous_args = 0
 1601              		@ link register save eliminated.
 1602              	.LVL155:
 127:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 1603              		.loc 1 127 0
 1604 0000 D0F84435 		ldr	r3, [r0, #1348]
 1605 0004 DB69     		ldr	r3, [r3, #28]
 1606              	.LVL156:
 130:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.req_state = PTP_REQ_SEND;
 1607              		.loc 1 130 0
 1608 0006 03F5EB52 		add	r2, r3, #7520
 1609 000a 0020     		movs	r0, #0
ARM GAS  /tmp/ccSoqm0V.s 			page 47


 1610              	.LVL157:
 1611 000c 1070     		strb	r0, [r2]
 131:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 1612              		.loc 1 131 0
 1613 000e 0121     		movs	r1, #1
 1614 0010 41F66152 		movw	r2, #7521
 1615 0014 9954     		strb	r1, [r3, r2]
 134:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 1616              		.loc 1 134 0
 1617 0016 7047     		bx	lr
 1618              		.cfi_endproc
 1619              	.LFE124:
 1621              		.section	.text.USBH_PTP_SendRequest,"ax",%progbits
 1622              		.align	2
 1623              		.global	USBH_PTP_SendRequest
 1624              		.thumb
 1625              		.thumb_func
 1627              	USBH_PTP_SendRequest:
 1628              	.LFB126:
 392:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef            status = USBH_OK; 
 1629              		.loc 1 392 0
 1630              		.cfi_startproc
 1631              		@ args = 0, pretend = 0, frame = 0
 1632              		@ frame_needed = 0, uses_anonymous_args = 0
 1633              	.LVL158:
 1634 0000 70B5     		push	{r4, r5, r6, lr}
 1635              	.LCFI26:
 1636              		.cfi_def_cfa_offset 16
 1637              		.cfi_offset 4, -16
 1638              		.cfi_offset 5, -12
 1639              		.cfi_offset 6, -8
 1640              		.cfi_offset 14, -4
 1641 0002 0D46     		mov	r5, r1
 1642              	.LVL159:
 394:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 1643              		.loc 1 394 0
 1644 0004 D0F84435 		ldr	r3, [r0, #1348]
 1645 0008 DC69     		ldr	r4, [r3, #28]
 1646              	.LVL160:
 397:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 1647              		.loc 1 397 0
 1648 000a 41F66456 		movw	r6, #7524
 1649 000e 2022     		movs	r2, #32
 1650 0010 0021     		movs	r1, #0
 1651              	.LVL161:
 1652 0012 A019     		adds	r0, r4, r6
 1653              	.LVL162:
 1654 0014 FFF7FEFF 		bl	memset
 1655              	.LVL163:
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.type = PTP_USB_CONTAINER_COMMAND;
 1656              		.loc 1 400 0
 1657 0018 95F82030 		ldrb	r3, [r5, #32]	@ zero_extendqisi2
 1658 001c 0333     		adds	r3, r3, #3
 1659 001e 9B00     		lsls	r3, r3, #2
 1660 0020 A351     		str	r3, [r4, r6]
 401:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.code = req->Code;
 1661              		.loc 1 401 0
ARM GAS  /tmp/ccSoqm0V.s 			page 48


 1662 0022 0122     		movs	r2, #1
 1663 0024 41F66853 		movw	r3, #7528
 1664 0028 E252     		strh	r2, [r4, r3]	@ movhi
 402:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.trans_id = req->Transaction_ID;
 1665              		.loc 1 402 0
 1666 002a 2A88     		ldrh	r2, [r5]
 1667 002c 41F66A53 		movw	r3, #7530
 1668 0030 E252     		strh	r2, [r4, r3]	@ movhi
 403:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param1 = req->Param1;
 1669              		.loc 1 403 0
 1670 0032 AA68     		ldr	r2, [r5, #8]
 1671 0034 41F66C53 		movw	r3, #7532
 1672 0038 E250     		str	r2, [r4, r3]
 404:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param2 = req->Param2;
 1673              		.loc 1 404 0
 1674 003a EA68     		ldr	r2, [r5, #12]
 1675 003c 41F67053 		movw	r3, #7536
 1676 0040 E250     		str	r2, [r4, r3]
 405:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param3 = req->Param3;
 1677              		.loc 1 405 0
 1678 0042 2A69     		ldr	r2, [r5, #16]
 1679 0044 41F67453 		movw	r3, #7540
 1680 0048 E250     		str	r2, [r4, r3]
 406:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param4 = req->Param4;
 1681              		.loc 1 406 0
 1682 004a 6A69     		ldr	r2, [r5, #20]
 1683 004c 41F67853 		movw	r3, #7544
 1684 0050 E250     		str	r2, [r4, r3]
 407:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_Handle->ptp.op_container.param5 = req->Param5;
 1685              		.loc 1 407 0
 1686 0052 AA69     		ldr	r2, [r5, #24]
 1687 0054 41F67C53 		movw	r3, #7548
 1688 0058 E250     		str	r2, [r4, r3]
 408:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 1689              		.loc 1 408 0
 1690 005a EB69     		ldr	r3, [r5, #28]
 1691 005c 04F5EC54 		add	r4, r4, #7552
 1692              	.LVL164:
 1693 0060 2360     		str	r3, [r4]
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 1694              		.loc 1 411 0
 1695 0062 0020     		movs	r0, #0
 1696 0064 70BD     		pop	{r4, r5, r6, pc}
 1697              		.cfi_endproc
 1698              	.LFE126:
 1700 0066 00BF     		.section	.text.USBH_PTP_GetResponse,"ax",%progbits
 1701              		.align	2
 1702              		.global	USBH_PTP_GetResponse
 1703              		.thumb
 1704              		.thumb_func
 1706              	USBH_PTP_GetResponse:
 1707              	.LFB127:
 420:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef            status = USBH_OK; 
 1708              		.loc 1 420 0
 1709              		.cfi_startproc
 1710              		@ args = 0, pretend = 0, frame = 0
 1711              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccSoqm0V.s 			page 49


 1712              		@ link register save eliminated.
 1713              	.LVL165:
 422:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 1714              		.loc 1 422 0
 1715 0000 D0F84435 		ldr	r3, [r0, #1348]
 1716 0004 DB69     		ldr	r3, [r3, #28]
 1717              	.LVL166:
 425:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->SessionID = MTP_Handle->ptp.session_id;
 1718              		.loc 1 425 0
 1719 0006 42F28A12 		movw	r2, #8586
 1720 000a 9A5A     		ldrh	r2, [r3, r2]
 1721 000c 0A80     		strh	r2, [r1]	@ movhi
 426:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Transaction_ID = MTP_Handle->ptp.resp_container.trans_id;
 1722              		.loc 1 426 0
 1723 000e 42F2A812 		movw	r2, #8616
 1724 0012 9A58     		ldr	r2, [r3, r2]
 1725 0014 4A60     		str	r2, [r1, #4]
 427:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param1 = MTP_Handle->ptp.resp_container.param1;
 1726              		.loc 1 427 0
 1727 0016 42F28C12 		movw	r2, #8588
 1728 001a 9A58     		ldr	r2, [r3, r2]
 1729 001c 8A60     		str	r2, [r1, #8]
 428:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param2 = MTP_Handle->ptp.resp_container.param2;
 1730              		.loc 1 428 0
 1731 001e 42F29012 		movw	r2, #8592
 1732 0022 9A58     		ldr	r2, [r3, r2]
 1733 0024 CA60     		str	r2, [r1, #12]
 429:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param3 = MTP_Handle->ptp.resp_container.param3;
 1734              		.loc 1 429 0
 1735 0026 42F29412 		movw	r2, #8596
 1736 002a 9A58     		ldr	r2, [r3, r2]
 1737 002c 0A61     		str	r2, [r1, #16]
 430:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param4 = MTP_Handle->ptp.resp_container.param4;
 1738              		.loc 1 430 0
 1739 002e 42F29812 		movw	r2, #8600
 1740 0032 9A58     		ldr	r2, [r3, r2]
 1741 0034 4A61     		str	r2, [r1, #20]
 431:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   resp->Param5 = MTP_Handle->ptp.resp_container.param5;
 1742              		.loc 1 431 0
 1743 0036 42F29C12 		movw	r2, #8604
 1744 003a 9A58     		ldr	r2, [r3, r2]
 1745 003c 8A61     		str	r2, [r1, #24]
 432:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 1746              		.loc 1 432 0
 1747 003e 42F2A012 		movw	r2, #8608
 1748 0042 9B58     		ldr	r3, [r3, r2]
 1749              	.LVL167:
 1750 0044 CB61     		str	r3, [r1, #28]
 435:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 1751              		.loc 1 435 0
 1752 0046 0020     		movs	r0, #0
 1753              	.LVL168:
 1754 0048 7047     		bx	lr
 1755              		.cfi_endproc
 1756              	.LFE127:
 1758 004a 00BF     		.section	.text.USBH_PTP_Process,"ax",%progbits
 1759              		.align	2
ARM GAS  /tmp/ccSoqm0V.s 			page 50


 1760              		.global	USBH_PTP_Process
 1761              		.thumb
 1762              		.thumb_func
 1764              	USBH_PTP_Process:
 1765              	.LFB125:
 144:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY;
 1766              		.loc 1 144 0
 1767              		.cfi_startproc
 1768              		@ args = 0, pretend = 0, frame = 40
 1769              		@ frame_needed = 0, uses_anonymous_args = 0
 1770              	.LVL169:
 1771 0000 70B5     		push	{r4, r5, r6, lr}
 1772              	.LCFI27:
 1773              		.cfi_def_cfa_offset 16
 1774              		.cfi_offset 4, -16
 1775              		.cfi_offset 5, -12
 1776              		.cfi_offset 6, -8
 1777              		.cfi_offset 14, -4
 1778 0002 8CB0     		sub	sp, sp, #48
 1779              	.LCFI28:
 1780              		.cfi_def_cfa_offset 64
 1781 0004 0646     		mov	r6, r0
 1782              	.LVL170:
 147:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;  
 1783              		.loc 1 147 0
 1784 0006 D0F84435 		ldr	r3, [r0, #1348]
 1785 000a DC69     		ldr	r4, [r3, #28]
 1786              	.LVL171:
 151:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 1787              		.loc 1 151 0
 1788 000c 04F5EB53 		add	r3, r4, #7520
 1789 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1790 0012 013B     		subs	r3, r3, #1
 1791 0014 082B     		cmp	r3, #8
 1792 0016 00F26981 		bhi	.L93
 1793 001a DFE813F0 		tbh	[pc, r3, lsl #1]
 1794              	.L69:
 1795 001e 0900     		.2byte	(.L68-.L69)/2
 1796 0020 1A00     		.2byte	(.L70-.L69)/2
 1797 0022 4B00     		.2byte	(.L71-.L69)/2
 1798 0024 5E00     		.2byte	(.L72-.L69)/2
 1799 0026 BB00     		.2byte	(.L73-.L69)/2
 1800 0028 CC00     		.2byte	(.L74-.L69)/2
 1801 002a 3201     		.2byte	(.L75-.L69)/2
 1802 002c 4101     		.2byte	(.L76-.L69)/2
 1803 002e 6201     		.2byte	(.L77-.L69)/2
 1804              		.p2align 1
 1805              	.L68:
 159:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        MTP_Handle->ptp.op_container.length, 
 1806              		.loc 1 159 0
 1807 0030 41F66451 		movw	r1, #7524
 158:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        (uint8_t*)&(MTP_Handle->ptp.op_container),
 1808              		.loc 1 158 0
 1809 0034 41F62D53 		movw	r3, #7469
 1810 0038 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1811 003a 625A     		ldrh	r2, [r4, r1]
 1812 003c 0125     		movs	r5, #1
ARM GAS  /tmp/ccSoqm0V.s 			page 51


 1813 003e 0095     		str	r5, [sp]
 1814 0040 2144     		add	r1, r1, r4
 1815 0042 FFF7FEFF 		bl	USBH_BulkSendData
 1816              	.LVL172:
 163:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 1817              		.loc 1 163 0
 1818 0046 04F5EB54 		add	r4, r4, #7520
 1819              	.LVL173:
 1820 004a 0223     		movs	r3, #2
 1821 004c 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 1822              		.loc 1 145 0
 1823 004e 2846     		mov	r0, r5
 164:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 1824              		.loc 1 164 0
 1825 0050 57E1     		b	.L67
 1826              	.LVL174:
 1827              	.L70:
 167:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 1828              		.loc 1 167 0
 1829 0052 41F62D53 		movw	r3, #7469
 1830 0056 E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 1831 0058 FFF7FEFF 		bl	USBH_LL_GetURBState
 1832              	.LVL175:
 169:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 1833              		.loc 1 169 0
 1834 005c 0128     		cmp	r0, #1
 1835 005e 19D1     		bne	.L78
 171:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 1836              		.loc 1 171 0
 1837 0060 42F2AC13 		movw	r3, #8620
 1838 0064 E358     		ldr	r3, [r4, r3]
 1839 0066 23B9     		cbnz	r3, .L79
 173:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 1840              		.loc 1 173 0
 1841 0068 04F5EB54 		add	r4, r4, #7520
 1842              	.LVL176:
 1843 006c 0723     		movs	r3, #7
 1844 006e 2370     		strb	r3, [r4]
 1845 0070 47E1     		b	.L67
 1846              	.LVL177:
 1847              	.L79:
 175:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 1848              		.loc 1 175 0
 1849 0072 012B     		cmp	r3, #1
 1850 0074 05D1     		bne	.L80
 177:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 1851              		.loc 1 177 0
 1852 0076 04F5EB54 		add	r4, r4, #7520
 1853              	.LVL178:
 1854 007a 0323     		movs	r3, #3
 1855 007c 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 1856              		.loc 1 145 0
 1857 007e 0120     		movs	r0, #1
 1858              	.LVL179:
 1859 0080 3FE1     		b	.L67
ARM GAS  /tmp/ccSoqm0V.s 			page 52


 1860              	.LVL180:
 1861              	.L80:
 179:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 1862              		.loc 1 179 0
 1863 0082 022B     		cmp	r3, #2
 1864 0084 40F03481 		bne	.L94
 181:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 1865              		.loc 1 181 0
 1866 0088 04F5EB54 		add	r4, r4, #7520
 1867              	.LVL181:
 1868 008c 0523     		movs	r3, #5
 1869 008e 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 1870              		.loc 1 145 0
 1871 0090 0120     		movs	r0, #1
 1872              	.LVL182:
 1873 0092 36E1     		b	.L67
 1874              	.LVL183:
 1875              	.L78:
 187:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 1876              		.loc 1 187 0
 1877 0094 0228     		cmp	r0, #2
 1878 0096 04D1     		bne	.L81
 190:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 1879              		.loc 1 190 0
 1880 0098 04F5EB54 		add	r4, r4, #7520
 1881              	.LVL184:
 1882 009c 0120     		movs	r0, #1
 1883              	.LVL185:
 1884 009e 2070     		strb	r0, [r4]
 1885 00a0 2FE1     		b	.L67
 1886              	.LVL186:
 1887              	.L81:
 195:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 1888              		.loc 1 195 0
 1889 00a2 0528     		cmp	r0, #5
 1890 00a4 40F02681 		bne	.L95
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 1891              		.loc 1 197 0
 1892 00a8 04F5EB54 		add	r4, r4, #7520
 1893              	.LVL187:
 1894 00ac 0923     		movs	r3, #9
 1895 00ae 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 1896              		.loc 1 145 0
 1897 00b0 0120     		movs	r0, #1
 1898              	.LVL188:
 1899 00b2 26E1     		b	.L67
 1900              	.LVL189:
 1901              	.L71:
 206:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                        MTP_Handle->ptp.data_ptr,
 1902              		.loc 1 206 0
 1903 00b4 41F62D53 		movw	r3, #7469
 1904 00b8 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1905 00ba 41F63252 		movw	r2, #7474
 1906 00be A25A     		ldrh	r2, [r4, r2]
 1907 00c0 42F2B011 		movw	r1, #8624
ARM GAS  /tmp/ccSoqm0V.s 			page 53


 1908 00c4 6158     		ldr	r1, [r4, r1]
 1909 00c6 0125     		movs	r5, #1
 1910 00c8 0095     		str	r5, [sp]
 1911 00ca FFF7FEFF 		bl	USBH_BulkSendData
 1912              	.LVL190:
 213:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 1913              		.loc 1 213 0
 1914 00ce 04F5EB54 		add	r4, r4, #7520
 1915              	.LVL191:
 1916 00d2 0423     		movs	r3, #4
 1917 00d4 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 1918              		.loc 1 145 0
 1919 00d6 2846     		mov	r0, r5
 214:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 1920              		.loc 1 214 0
 1921 00d8 13E1     		b	.L67
 1922              	.LVL192:
 1923              	.L72:
 217:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 1924              		.loc 1 217 0
 1925 00da 41F62D53 		movw	r3, #7469
 1926 00de E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 1927 00e0 FFF7FEFF 		bl	USBH_LL_GetURBState
 1928              	.LVL193:
 219:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 1929              		.loc 1 219 0
 1930 00e4 0128     		cmp	r0, #1
 1931 00e6 44D1     		bne	.L82
 222:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 1932              		.loc 1 222 0
 1933 00e8 42F2B413 		movw	r3, #8628
 1934 00ec E258     		ldr	r2, [r4, r3]
 1935 00ee 41F63253 		movw	r3, #7474
 1936 00f2 E35A     		ldrh	r3, [r4, r3]
 1937 00f4 9A42     		cmp	r2, r3
 1938 00f6 1DDD     		ble	.L83
 224:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_length -= MTP_Handle->DataOutEpSize; 
 1939              		.loc 1 224 0
 1940 00f8 42F2B010 		movw	r0, #8624
 1941              	.LVL194:
 1942 00fc 2158     		ldr	r1, [r4, r0]
 1943 00fe 1944     		add	r1, r1, r3
 1944 0100 2150     		str	r1, [r4, r0]
 225:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_packet += MTP_Handle->DataOutEpSize;
 1945              		.loc 1 225 0
 1946 0102 D21A     		subs	r2, r2, r3
 1947 0104 42F2B411 		movw	r1, #8628
 1948 0108 6250     		str	r2, [r4, r1]
 226:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
 1949              		.loc 1 226 0
 1950 010a 42F2B811 		movw	r1, #8632
 1951 010e 6258     		ldr	r2, [r4, r1]
 1952 0110 1344     		add	r3, r3, r2
 1953 0112 6350     		str	r3, [r4, r1]
 228:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         {
 1954              		.loc 1 228 0
ARM GAS  /tmp/ccSoqm0V.s 			page 54


 1955 0114 B3F57D7F 		cmp	r3, #1012
 1956 0118 10D3     		bcc	.L84
 230:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.data_packet = 0;
 1957              		.loc 1 230 0
 1958 011a 3046     		mov	r0, r6
 1959 011c FFF7FEFF 		bl	PTP_BufferFullCallback
 1960              	.LVL195:
 231:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.iteration++;            
 1961              		.loc 1 231 0
 1962 0120 0022     		movs	r2, #0
 1963 0122 42F2B813 		movw	r3, #8632
 1964 0126 E250     		str	r2, [r4, r3]
 232:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         }
 1965              		.loc 1 232 0
 1966 0128 42F2BC12 		movw	r2, #8636
 1967 012c A358     		ldr	r3, [r4, r2]
 1968 012e 0133     		adds	r3, r3, #1
 1969 0130 A350     		str	r3, [r4, r2]
 1970 0132 03E0     		b	.L84
 1971              	.LVL196:
 1972              	.L83:
 238:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       } 
 1973              		.loc 1 238 0
 1974 0134 0022     		movs	r2, #0
 1975 0136 42F2B413 		movw	r3, #8628
 1976 013a E250     		str	r2, [r4, r3]
 1977              	.LVL197:
 1978              	.L84:
 242:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 1979              		.loc 1 242 0
 1980 013c 42F2B413 		movw	r3, #8628
 1981 0140 E358     		ldr	r3, [r4, r3]
 1982 0142 002B     		cmp	r3, #0
 1983 0144 0FDD     		ble	.L85
 244:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                            MTP_Handle->ptp.data_ptr,
 1984              		.loc 1 244 0
 1985 0146 41F62D53 		movw	r3, #7469
 1986 014a E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1987 014c 41F63252 		movw	r2, #7474
 1988 0150 A25A     		ldrh	r2, [r4, r2]
 1989 0152 42F2B011 		movw	r1, #8624
 1990 0156 6158     		ldr	r1, [r4, r1]
 1991 0158 0124     		movs	r4, #1
 1992              	.LVL198:
 1993 015a 0094     		str	r4, [sp]
 1994 015c 3046     		mov	r0, r6
 1995 015e FFF7FEFF 		bl	USBH_BulkSendData
 1996              	.LVL199:
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 1997              		.loc 1 145 0
 1998 0162 2046     		mov	r0, r4
 1999 0164 CDE0     		b	.L67
 2000              	.LVL200:
 2001              	.L85:
 253:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }  
 2002              		.loc 1 253 0
 2003 0166 04F5EB54 		add	r4, r4, #7520
ARM GAS  /tmp/ccSoqm0V.s 			page 55


 2004              	.LVL201:
 2005 016a 0723     		movs	r3, #7
 2006 016c 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2007              		.loc 1 145 0
 2008 016e 0120     		movs	r0, #1
 2009 0170 C7E0     		b	.L67
 2010              	.LVL202:
 2011              	.L82:
 260:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 2012              		.loc 1 260 0
 2013 0172 0228     		cmp	r0, #2
 2014 0174 05D1     		bne	.L86
 263:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 2015              		.loc 1 263 0
 2016 0176 04F5EB54 		add	r4, r4, #7520
 2017              	.LVL203:
 2018 017a 0323     		movs	r3, #3
 2019 017c 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2020              		.loc 1 145 0
 2021 017e 0120     		movs	r0, #1
 2022              	.LVL204:
 2023 0180 BFE0     		b	.L67
 2024              	.LVL205:
 2025              	.L86:
 269:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 2026              		.loc 1 269 0
 2027 0182 0528     		cmp	r0, #5
 2028 0184 40F0B880 		bne	.L96
 271:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 2029              		.loc 1 271 0
 2030 0188 04F5EB54 		add	r4, r4, #7520
 2031              	.LVL206:
 2032 018c 0923     		movs	r3, #9
 2033 018e 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2034              		.loc 1 145 0
 2035 0190 0120     		movs	r0, #1
 2036              	.LVL207:
 2037 0192 B6E0     		b	.L67
 2038              	.LVL208:
 2039              	.L73:
 280:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           MTP_Handle->ptp.data_ptr, 
 2040              		.loc 1 280 0
 2041 0194 41F62C53 		movw	r3, #7468
 2042 0198 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2043 019a 41F63452 		movw	r2, #7476
 2044 019e A25A     		ldrh	r2, [r4, r2]
 2045 01a0 42F2B011 		movw	r1, #8624
 2046 01a4 6158     		ldr	r1, [r4, r1]
 2047 01a6 FFF7FEFF 		bl	USBH_BulkReceiveData
 2048              	.LVL209:
 285:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2049              		.loc 1 285 0
 2050 01aa 04F5EB54 		add	r4, r4, #7520
 2051              	.LVL210:
ARM GAS  /tmp/ccSoqm0V.s 			page 56


 2052 01ae 0623     		movs	r3, #6
 2053 01b0 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2054              		.loc 1 145 0
 2055 01b2 0120     		movs	r0, #1
 286:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 2056              		.loc 1 286 0
 2057 01b4 A5E0     		b	.L67
 2058              	.LVL211:
 2059              	.L74:
 289:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 2060              		.loc 1 289 0
 2061 01b6 41F62C53 		movw	r3, #7468
 2062 01ba E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 2063 01bc FFF7FEFF 		bl	USBH_LL_GetURBState
 2064              	.LVL212:
 291:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 2065              		.loc 1 291 0
 2066 01c0 0128     		cmp	r0, #1
 2067 01c2 56D1     		bne	.L87
 293:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 2068              		.loc 1 293 0
 2069 01c4 41F62C53 		movw	r3, #7468
 2070 01c8 E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 2071 01ca 3046     		mov	r0, r6
 2072              	.LVL213:
 2073 01cc FFF7FEFF 		bl	USBH_LL_GetLastXferSize
 2074              	.LVL214:
 295:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 2075              		.loc 1 295 0
 2076 01d0 04F50752 		add	r2, r4, #8640
 2077 01d4 1368     		ldr	r3, [r2]
 2078 01d6 591C     		adds	r1, r3, #1
 2079 01d8 1160     		str	r1, [r2]
 2080 01da 53B9     		cbnz	r3, .L88
 298:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.iteration = 0;
 2081              		.loc 1 298 0
 2082 01dc 42F2B013 		movw	r3, #8624
 2083 01e0 E358     		ldr	r3, [r4, r3]
 2084 01e2 1A68     		ldr	r2, [r3]
 2085 01e4 42F2B413 		movw	r3, #8628
 2086 01e8 E250     		str	r2, [r4, r3]
 299:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }
 2087              		.loc 1 299 0
 2088 01ea 0022     		movs	r2, #0
 2089 01ec 42F2BC13 		movw	r3, #8636
 2090 01f0 E250     		str	r2, [r4, r3]
 2091              	.L88:
 302:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 2092              		.loc 1 302 0
 2093 01f2 41F63453 		movw	r3, #7476
 2094 01f6 E35A     		ldrh	r3, [r4, r3]
 2095 01f8 9842     		cmp	r0, r3
 2096 01fa 2FD3     		bcc	.L89
 302:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
 2097              		.loc 1 302 0 is_stmt 0 discriminator 1
 2098 01fc 42F2B413 		movw	r3, #8628
ARM GAS  /tmp/ccSoqm0V.s 			page 57


 2099 0200 E358     		ldr	r3, [r4, r3]
 2100 0202 002B     		cmp	r3, #0
 2101 0204 2ADD     		ble	.L89
 304:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_length -= len;
 2102              		.loc 1 304 0 is_stmt 1
 2103 0206 42F2B011 		movw	r1, #8624
 2104 020a 6258     		ldr	r2, [r4, r1]
 2105 020c 0244     		add	r2, r2, r0
 2106 020e 6250     		str	r2, [r4, r1]
 305:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.data_packet += len;
 2107              		.loc 1 305 0
 2108 0210 1B1A     		subs	r3, r3, r0
 2109 0212 42F2B412 		movw	r2, #8628
 2110 0216 A350     		str	r3, [r4, r2]
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 2111              		.loc 1 306 0
 2112 0218 42F2B812 		movw	r2, #8632
 2113 021c A358     		ldr	r3, [r4, r2]
 2114 021e 1844     		add	r0, r0, r3
 2115              	.LVL215:
 2116 0220 A050     		str	r0, [r4, r2]
 308:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         {
 2117              		.loc 1 308 0
 2118 0222 B0F57D7F 		cmp	r0, #1012
 2119 0226 0BD3     		bcc	.L90
 310:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.data_packet = 0;
 2120              		.loc 1 310 0
 2121 0228 3046     		mov	r0, r6
 2122 022a FFF7FEFF 		bl	PTP_BufferFullCallback
 2123              	.LVL216:
 311:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****           MTP_Handle->ptp.iteration++;            
 2124              		.loc 1 311 0
 2125 022e 0022     		movs	r2, #0
 2126 0230 42F2B813 		movw	r3, #8632
 2127 0234 E250     		str	r2, [r4, r3]
 312:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         }
 2128              		.loc 1 312 0
 2129 0236 42F2BC12 		movw	r2, #8636
 2130 023a A358     		ldr	r3, [r4, r2]
 2131 023c 0133     		adds	r3, r3, #1
 2132 023e A350     		str	r3, [r4, r2]
 2133              	.L90:
 316:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                               MTP_Handle->ptp.data_ptr, 
 2134              		.loc 1 316 0
 2135 0240 41F62C53 		movw	r3, #7468
 2136 0244 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2137 0246 41F63452 		movw	r2, #7476
 2138 024a A25A     		ldrh	r2, [r4, r2]
 2139 024c 42F2B011 		movw	r1, #8624
 2140 0250 6158     		ldr	r1, [r4, r1]
 2141 0252 3046     		mov	r0, r6
 2142 0254 FFF7FEFF 		bl	USBH_BulkReceiveData
 2143              	.LVL217:
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2144              		.loc 1 145 0
 2145 0258 0120     		movs	r0, #1
 316:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                               MTP_Handle->ptp.data_ptr, 
ARM GAS  /tmp/ccSoqm0V.s 			page 58


 2146              		.loc 1 316 0
 2147 025a 52E0     		b	.L67
 2148              	.LVL218:
 2149              	.L89:
 323:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         MTP_Handle->ptp.state = PTP_RESPONSE_STATE;
 2150              		.loc 1 323 0
 2151 025c 42F2B412 		movw	r2, #8628
 2152 0260 A358     		ldr	r3, [r4, r2]
 2153 0262 1B1A     		subs	r3, r3, r0
 2154 0264 A350     		str	r3, [r4, r2]
 324:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 2155              		.loc 1 324 0
 2156 0266 04F5EB54 		add	r4, r4, #7520
 2157              	.LVL219:
 2158 026a 0723     		movs	r3, #7
 2159 026c 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2160              		.loc 1 145 0
 2161 026e 0120     		movs	r0, #1
 2162              	.LVL220:
 2163 0270 47E0     		b	.L67
 2164              	.LVL221:
 2165              	.L87:
 330:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 2166              		.loc 1 330 0
 2167 0272 0528     		cmp	r0, #5
 2168 0274 42D1     		bne	.L97
 332:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 2169              		.loc 1 332 0
 2170 0276 04F5EB54 		add	r4, r4, #7520
 2171              	.LVL222:
 2172 027a 0923     		movs	r3, #9
 2173 027c 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2174              		.loc 1 145 0
 2175 027e 0120     		movs	r0, #1
 2176              	.LVL223:
 2177 0280 3FE0     		b	.L67
 2178              	.LVL224:
 2179              	.L75:
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           (uint8_t*)&(MTP_Handle->ptp.resp_container), 
 2180              		.loc 1 341 0
 2181 0282 41F62C53 		movw	r3, #7468
 2182 0286 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2183 0288 3F22     		movs	r2, #63
 2184 028a 04F50651 		add	r1, r4, #8576
 2185 028e 0431     		adds	r1, r1, #4
 2186 0290 FFF7FEFF 		bl	USBH_BulkReceiveData
 2187              	.LVL225:
 346:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2188              		.loc 1 346 0
 2189 0294 04F5EB54 		add	r4, r4, #7520
 2190              	.LVL226:
 2191 0298 0823     		movs	r3, #8
 2192 029a 2370     		strb	r3, [r4]
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2193              		.loc 1 145 0
ARM GAS  /tmp/ccSoqm0V.s 			page 59


 2194 029c 0120     		movs	r0, #1
 347:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 2195              		.loc 1 347 0
 2196 029e 30E0     		b	.L67
 2197              	.LVL227:
 2198              	.L76:
 350:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 2199              		.loc 1 350 0
 2200 02a0 41F62C53 		movw	r3, #7468
 2201 02a4 E15C     		ldrb	r1, [r4, r3]	@ zero_extendqisi2
 2202 02a6 FFF7FEFF 		bl	USBH_LL_GetURBState
 2203              	.LVL228:
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 2204              		.loc 1 352 0
 2205 02aa 0128     		cmp	r0, #1
 2206 02ac 11D1     		bne	.L91
 354:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        
 2207              		.loc 1 354 0
 2208 02ae 03A9     		add	r1, sp, #12
 2209 02b0 3046     		mov	r0, r6
 2210              	.LVL229:
 2211 02b2 FFF7FEFF 		bl	USBH_PTP_GetResponse
 2212              	.LVL230:
 356:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        {
 2213              		.loc 1 356 0
 2214 02b6 BDF80C20 		ldrh	r2, [sp, #12]
 2215 02ba 42F20103 		movw	r3, #8193
 2216 02be 9A42     		cmp	r2, r3
 2217 02c0 01D1     		bne	.L98
 358:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 2218              		.loc 1 358 0
 2219 02c2 0020     		movs	r0, #0
 2220 02c4 00E0     		b	.L92
 2221              	.L98:
 362:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        }
 2222              		.loc 1 362 0
 2223 02c6 0220     		movs	r0, #2
 2224              	.L92:
 2225              	.LVL231:
 364:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 2226              		.loc 1 364 0
 2227 02c8 0122     		movs	r2, #1
 2228 02ca 41F66153 		movw	r3, #7521
 2229 02ce E254     		strb	r2, [r4, r3]
 2230 02d0 17E0     		b	.L67
 2231              	.LVL232:
 2232              	.L91:
 366:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 2233              		.loc 1 366 0
 2234 02d2 0528     		cmp	r0, #5
 2235 02d4 14D1     		bne	.L99
 368:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 2236              		.loc 1 368 0
 2237 02d6 04F5EB54 		add	r4, r4, #7520
 2238              	.LVL233:
 2239 02da 0923     		movs	r3, #9
 2240 02dc 2370     		strb	r3, [r4]
ARM GAS  /tmp/ccSoqm0V.s 			page 60


 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2241              		.loc 1 145 0
 2242 02de 0120     		movs	r0, #1
 2243              	.LVL234:
 2244 02e0 0FE0     		b	.L67
 2245              	.LVL235:
 2246              	.L77:
 376:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       break;
 2247              		.loc 1 376 0
 2248 02e2 0120     		movs	r0, #1
 2249              	.LVL236:
 2250 02e4 41F66153 		movw	r3, #7521
 2251 02e8 E054     		strb	r0, [r4, r3]
 377:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       
 2252              		.loc 1 377 0
 2253 02ea 0AE0     		b	.L67
 2254              	.LVL237:
 2255              	.L93:
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;  
 2256              		.loc 1 145 0
 2257 02ec 0120     		movs	r0, #1
 2258              	.LVL238:
 2259 02ee 08E0     		b	.L67
 2260              	.LVL239:
 2261              	.L94:
 2262 02f0 0120     		movs	r0, #1
 2263              	.LVL240:
 2264 02f2 06E0     		b	.L67
 2265              	.LVL241:
 2266              	.L95:
 2267 02f4 0120     		movs	r0, #1
 2268              	.LVL242:
 2269 02f6 04E0     		b	.L67
 2270              	.LVL243:
 2271              	.L96:
 2272 02f8 0120     		movs	r0, #1
 2273              	.LVL244:
 2274 02fa 02E0     		b	.L67
 2275              	.LVL245:
 2276              	.L97:
 2277 02fc 0120     		movs	r0, #1
 2278              	.LVL246:
 2279 02fe 00E0     		b	.L67
 2280              	.LVL247:
 2281              	.L99:
 2282 0300 0120     		movs	r0, #1
 2283              	.LVL248:
 2284              	.L67:
 383:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 2285              		.loc 1 383 0
 2286 0302 0CB0     		add	sp, sp, #48
 2287              	.LCFI29:
 2288              		.cfi_def_cfa_offset 16
 2289              		@ sp needed
 2290 0304 70BD     		pop	{r4, r5, r6, pc}
 2291              		.cfi_endproc
 2292              	.LFE125:
ARM GAS  /tmp/ccSoqm0V.s 			page 61


 2294 0306 00BF     		.section	.text.USBH_PTP_OpenSession,"ax",%progbits
 2295              		.align	2
 2296              		.global	USBH_PTP_OpenSession
 2297              		.thumb
 2298              		.thumb_func
 2300              	USBH_PTP_OpenSession:
 2301              	.LFB139:
 869:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 870:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /*******************************************************************************
 871:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                              
 872:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                           PTP Requests
 873:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 874:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** *******************************************************************************/
 875:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 876:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_OpenSession
 877:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Open a new session
 878:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 879:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  session: Session ID (MUST BE > 0)
 880:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
 881:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 882:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_OpenSession (USBH_HandleTypeDef *phost, uint32_t session)
 883:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 2302              		.loc 1 883 0
 2303              		.cfi_startproc
 2304              		@ args = 0, pretend = 0, frame = 40
 2305              		@ frame_needed = 0, uses_anonymous_args = 0
 2306              	.LVL249:
 2307 0000 30B5     		push	{r4, r5, lr}
 2308              	.LCFI30:
 2309              		.cfi_def_cfa_offset 12
 2310              		.cfi_offset 4, -12
 2311              		.cfi_offset 5, -8
 2312              		.cfi_offset 14, -4
 2313 0002 8BB0     		sub	sp, sp, #44
 2314              	.LCFI31:
 2315              		.cfi_def_cfa_offset 56
 2316              	.LVL250:
 884:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
 885:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2317              		.loc 1 885 0
 2318 0004 D0F84435 		ldr	r3, [r0, #1348]
 2319 0008 DC69     		ldr	r4, [r3, #28]
 2320              	.LVL251:
 886:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
 887:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
 888:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 2321              		.loc 1 888 0
 2322 000a 41F66153 		movw	r3, #7521
 2323 000e E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2324 0010 012B     		cmp	r3, #1
 2325 0012 02D0     		beq	.L103
 2326 0014 022B     		cmp	r3, #2
 2327 0016 20D0     		beq	.L104
 2328 0018 22E0     		b	.L106
 2329              	.L103:
 889:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 890:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
ARM GAS  /tmp/ccSoqm0V.s 			page 62


 891:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 892:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Init session params */
 893:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.transaction_id = 0x00000000;
 2330              		.loc 1 893 0
 2331 001a 0023     		movs	r3, #0
 894:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.session_id = session;
 2332              		.loc 1 894 0
 2333 001c 42F2A812 		movw	r2, #8616
 2334 0020 A150     		str	r1, [r4, r2]
 895:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_NODATA;
 2335              		.loc 1 895 0
 2336 0022 42F2AC12 		movw	r2, #8620
 2337 0026 A350     		str	r3, [r4, r2]
 896:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 897:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
 898:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_OpenSession;
 2338              		.loc 1 898 0
 2339 0028 41F20202 		movw	r2, #4098
 2340 002c ADF80420 		strh	r2, [sp, #4]	@ movhi
 899:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = session;
 2341              		.loc 1 899 0
 2342 0030 0291     		str	r1, [sp, #8]
 900:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 2343              		.loc 1 900 0
 2344 0032 0125     		movs	r5, #1
 2345 0034 42F2A412 		movw	r2, #8612
 2346 0038 A550     		str	r5, [r4, r2]
 2347 003a 0393     		str	r3, [sp, #12]
 901:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = session;
 2348              		.loc 1 901 0
 2349 003c 0491     		str	r1, [sp, #16]
 902:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 1;
 2350              		.loc 1 902 0
 2351 003e 8DF82450 		strb	r5, [sp, #36]
 903:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 904:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet inti USB raw packet*/
 905:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 2352              		.loc 1 905 0
 2353 0042 01A9     		add	r1, sp, #4
 2354              	.LVL252:
 2355 0044 FFF7FEFF 		bl	USBH_PTP_SendRequest
 2356              	.LVL253:
 906:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
 907:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
 908:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 2357              		.loc 1 908 0
 2358 0048 04F5EB53 		add	r3, r4, #7520
 2359 004c 1D70     		strb	r5, [r3]
 909:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 2360              		.loc 1 909 0
 2361 004e 0222     		movs	r2, #2
 2362 0050 41F66153 		movw	r3, #7521
 2363 0054 E254     		strb	r2, [r4, r3]
 910:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
 2364              		.loc 1 910 0
 2365 0056 2846     		mov	r0, r5
 911:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
ARM GAS  /tmp/ccSoqm0V.s 			page 63


 912:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 913:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
 914:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2366              		.loc 1 914 0
 2367 0058 03E0     		b	.L102
 2368              	.LVL254:
 2369              	.L104:
 915:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 916:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
 917:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 2370              		.loc 1 917 0
 2371 005a FFF7FEFF 		bl	USBH_PTP_Process
 2372              	.LVL255:
 918:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2373              		.loc 1 918 0
 2374 005e 00E0     		b	.L102
 2375              	.LVL256:
 2376              	.L106:
 884:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2377              		.loc 1 884 0
 2378 0060 0120     		movs	r0, #1
 2379              	.LVL257:
 2380              	.L102:
 919:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 920:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
 921:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 922:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 923:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
 924:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 2381              		.loc 1 924 0
 2382 0062 0BB0     		add	sp, sp, #44
 2383              	.LCFI32:
 2384              		.cfi_def_cfa_offset 12
 2385              		@ sp needed
 2386 0064 30BD     		pop	{r4, r5, pc}
 2387              		.cfi_endproc
 2388              	.LFE139:
 2390 0066 00BF     		.section	.text.USBH_PTP_GetDevicePropDesc,"ax",%progbits
 2391              		.align	2
 2392              		.global	USBH_PTP_GetDevicePropDesc
 2393              		.thumb
 2394              		.thumb_func
 2396              	USBH_PTP_GetDevicePropDesc:
 2397              	.LFB140:
 925:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 926:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 927:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetDevicePropDesc
 928:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets object partially
 929:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 930:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
 931:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
 932:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 933:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetDevicePropDesc (USBH_HandleTypeDef *phost,
 934:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                 uint16_t propcode, 
 935:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 			PTP_DevicePropDescTypdef* devicepropertydesc)
 936:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 2398              		.loc 1 936 0
ARM GAS  /tmp/ccSoqm0V.s 			page 64


 2399              		.cfi_startproc
 2400              		@ args = 0, pretend = 0, frame = 40
 2401              		@ frame_needed = 0, uses_anonymous_args = 0
 2402              	.LVL258:
 2403 0000 70B5     		push	{r4, r5, r6, lr}
 2404              	.LCFI33:
 2405              		.cfi_def_cfa_offset 16
 2406              		.cfi_offset 4, -16
 2407              		.cfi_offset 5, -12
 2408              		.cfi_offset 6, -8
 2409              		.cfi_offset 14, -4
 2410 0002 8AB0     		sub	sp, sp, #40
 2411              	.LCFI34:
 2412              		.cfi_def_cfa_offset 56
 2413              	.LVL259:
 937:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
 938:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2414              		.loc 1 938 0
 2415 0004 D0F84435 		ldr	r3, [r0, #1348]
 2416 0008 DC69     		ldr	r4, [r3, #28]
 2417              	.LVL260:
 939:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
 940:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   uint8_t               *data = MTP_Handle->ptp.data_container.payload.data;
 941:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 2418              		.loc 1 941 0
 2419 000a 41F66153 		movw	r3, #7521
 2420 000e E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2421 0010 012B     		cmp	r3, #1
 2422 0012 03D0     		beq	.L110
 2423 0014 1546     		mov	r5, r2
 2424 0016 022B     		cmp	r3, #2
 2425 0018 31D0     		beq	.L111
 2426 001a 4EE0     		b	.L113
 2427              	.L110:
 942:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
 943:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
 944:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
 945:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
 946:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 2428              		.loc 1 946 0
 2429 001c 0226     		movs	r6, #2
 2430 001e 42F2AC13 		movw	r3, #8620
 2431 0022 E650     		str	r6, [r4, r3]
 947:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 2432              		.loc 1 947 0
 2433 0024 04F5EC53 		add	r3, r4, #7552
 2434 0028 0433     		adds	r3, r3, #4
 2435 002a 42F2B012 		movw	r2, #8624
 2436              	.LVL261:
 2437 002e A350     		str	r3, [r4, r2]
 948:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 2438              		.loc 1 948 0
 2439 0030 0023     		movs	r3, #0
 2440 0032 42F2B412 		movw	r2, #8628
 2441 0036 A350     		str	r3, [r4, r2]
 949:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 2442              		.loc 1 949 0
ARM GAS  /tmp/ccSoqm0V.s 			page 65


 2443 0038 04F50752 		add	r2, r4, #8640
 2444 003c 1360     		str	r3, [r2]
 950:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 2445              		.loc 1 950 0
 2446 003e 42F2B812 		movw	r2, #8632
 2447 0042 A350     		str	r3, [r4, r2]
 951:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
 952:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
 953:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetDevicePropDesc;
 2448              		.loc 1 953 0
 2449 0044 41F21403 		movw	r3, #4116
 2450 0048 ADF80430 		strh	r3, [sp, #4]	@ movhi
 954:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 2451              		.loc 1 954 0
 2452 004c 42F2A813 		movw	r3, #8616
 2453 0050 E358     		ldr	r3, [r4, r3]
 2454 0052 0293     		str	r3, [sp, #8]
 955:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 2455              		.loc 1 955 0
 2456 0054 42F2A412 		movw	r2, #8612
 2457 0058 A358     		ldr	r3, [r4, r2]
 2458 005a 5D1C     		adds	r5, r3, #1
 2459 005c A550     		str	r5, [r4, r2]
 2460 005e 0393     		str	r3, [sp, #12]
 956:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = propcode;     
 2461              		.loc 1 956 0
 2462 0060 0491     		str	r1, [sp, #16]
 957:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 1;
 2463              		.loc 1 957 0
 2464 0062 0125     		movs	r5, #1
 2465 0064 8DF82450 		strb	r5, [sp, #36]
 958:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 959:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
 960:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 2466              		.loc 1 960 0
 2467 0068 01A9     		add	r1, sp, #4
 2468              	.LVL262:
 2469 006a FFF7FEFF 		bl	USBH_PTP_SendRequest
 2470              	.LVL263:
 961:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
 962:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
 963:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 2471              		.loc 1 963 0
 2472 006e 04F5EB53 		add	r3, r4, #7520
 2473 0072 1D70     		strb	r5, [r3]
 964:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 2474              		.loc 1 964 0
 2475 0074 41F66153 		movw	r3, #7521
 2476 0078 E654     		strb	r6, [r4, r3]
 965:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
 2477              		.loc 1 965 0
 2478 007a 2B46     		mov	r3, r5
 966:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
 967:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
 968:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
 969:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2479              		.loc 1 969 0
ARM GAS  /tmp/ccSoqm0V.s 			page 66


 2480 007c 1EE0     		b	.L109
 2481              	.LVL264:
 2482              	.L111:
 970:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 971:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
 972:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 2483              		.loc 1 972 0
 2484 007e FFF7FEFF 		bl	USBH_PTP_Process
 2485              	.LVL265:
 973:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 974:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 2486              		.loc 1 974 0
 2487 0082 0346     		mov	r3, r0
 2488 0084 D0B9     		cbnz	r0, .L109
 975:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
 976:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 	devicepropertydesc->DevicePropertyCode = LE16(&data[PTP_dpd_DevicePropertyCode]);
 2489              		.loc 1 976 0
 2490 0086 41F69052 		movw	r2, #7568
 2491 008a A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 2492 008c 41F69151 		movw	r1, #7569
 2493 0090 615C     		ldrb	r1, [r4, r1]	@ zero_extendqisi2
 2494 0092 02EB0122 		add	r2, r2, r1, lsl #8
 2495 0096 2A80     		strh	r2, [r5]	@ movhi
 977:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 	devicepropertydesc->DataType = LE16(&data[PTP_dpd_DataType]);
 2496              		.loc 1 977 0
 2497 0098 41F69252 		movw	r2, #7570
 2498 009c A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 2499 009e 41F69351 		movw	r1, #7571
 2500 00a2 615C     		ldrb	r1, [r4, r1]	@ zero_extendqisi2
 2501 00a4 02EB0122 		add	r2, r2, r1, lsl #8
 2502 00a8 6A80     		strh	r2, [r5, #2]	@ movhi
 978:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 	devicepropertydesc->GetSet = *(uint8_t *)(&data[PTP_dpd_GetSet]);
 2503              		.loc 1 978 0
 2504 00aa 41F69452 		movw	r2, #7572
 2505 00ae A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 2506 00b0 2A71     		strb	r2, [r5, #4]
 979:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 	devicepropertydesc->FormFlag =  PTP_DPFF_None;
 2507              		.loc 1 979 0
 2508 00b2 0022     		movs	r2, #0
 2509 00b4 85F80822 		strb	r2, [r5, #520]
 2510 00b8 00E0     		b	.L109
 2511              	.LVL266:
 2512              	.L113:
 937:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2513              		.loc 1 937 0
 2514 00ba 0123     		movs	r3, #1
 2515              	.LVL267:
 2516              	.L109:
 980:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
 981:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 982:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
 983:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
 984:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 985:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
 986:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
 987:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 2517              		.loc 1 987 0
ARM GAS  /tmp/ccSoqm0V.s 			page 67


 2518 00bc 1846     		mov	r0, r3
 2519 00be 0AB0     		add	sp, sp, #40
 2520              	.LCFI35:
 2521              		.cfi_def_cfa_offset 16
 2522              		@ sp needed
 2523 00c0 70BD     		pop	{r4, r5, r6, pc}
 2524              		.cfi_endproc
 2525              	.LFE140:
 2527 00c2 00BF     		.section	.text.USBH_PTP_GetDeviceInfo,"ax",%progbits
 2528              		.align	2
 2529              		.global	USBH_PTP_GetDeviceInfo
 2530              		.thumb
 2531              		.thumb_func
 2533              	USBH_PTP_GetDeviceInfo:
 2534              	.LFB141:
 988:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
 989:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetDeviceInfo
 990:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets device info dataset and fills deviceinfo structure.
 991:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
 992:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
 993:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
 994:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
 995:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetDeviceInfo (USBH_HandleTypeDef *phost, PTP_DeviceInfoTypedef *dev_in
 996:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 2535              		.loc 1 996 0
 2536              		.cfi_startproc
 2537              		@ args = 0, pretend = 0, frame = 40
 2538              		@ frame_needed = 0, uses_anonymous_args = 0
 2539              	.LVL268:
 2540 0000 70B5     		push	{r4, r5, r6, lr}
 2541              	.LCFI36:
 2542              		.cfi_def_cfa_offset 16
 2543              		.cfi_offset 4, -16
 2544              		.cfi_offset 5, -12
 2545              		.cfi_offset 6, -8
 2546              		.cfi_offset 14, -4
 2547 0002 8AB0     		sub	sp, sp, #40
 2548              	.LCFI37:
 2549              		.cfi_def_cfa_offset 56
 2550 0004 0546     		mov	r5, r0
 2551              	.LVL269:
 997:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
 998:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2552              		.loc 1 998 0
 2553 0006 D0F84435 		ldr	r3, [r0, #1348]
 2554 000a DC69     		ldr	r4, [r3, #28]
 2555              	.LVL270:
 999:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1000:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1001:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 2556              		.loc 1 1001 0
 2557 000c 41F66153 		movw	r3, #7521
 2558 0010 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2559 0012 012B     		cmp	r3, #1
 2560 0014 03D0     		beq	.L117
 2561 0016 0E46     		mov	r6, r1
 2562 0018 022B     		cmp	r3, #2
ARM GAS  /tmp/ccSoqm0V.s 			page 68


 2563 001a 31D0     		beq	.L118
 2564 001c 39E0     		b	.L120
 2565              	.L117:
1002:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1003:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1004:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1005:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1006:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 2566              		.loc 1 1006 0
 2567 001e 0226     		movs	r6, #2
 2568 0020 42F2AC13 		movw	r3, #8620
 2569 0024 E650     		str	r6, [r4, r3]
1007:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 2570              		.loc 1 1007 0
 2571 0026 04F5EC53 		add	r3, r4, #7552
 2572 002a 0433     		adds	r3, r3, #4
 2573 002c 42F2B012 		movw	r2, #8624
 2574 0030 A350     		str	r3, [r4, r2]
1008:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 2575              		.loc 1 1008 0
 2576 0032 0023     		movs	r3, #0
 2577 0034 42F2B412 		movw	r2, #8628
 2578 0038 A350     		str	r3, [r4, r2]
1009:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 2579              		.loc 1 1009 0
 2580 003a 04F50752 		add	r2, r4, #8640
 2581 003e 1360     		str	r3, [r2]
1010:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 2582              		.loc 1 1010 0
 2583 0040 42F2B812 		movw	r2, #8632
 2584 0044 A350     		str	r3, [r4, r2]
1011:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1012:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1013:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetDeviceInfo;
 2585              		.loc 1 1013 0
 2586 0046 41F20102 		movw	r2, #4097
 2587 004a ADF80420 		strh	r2, [sp, #4]	@ movhi
1014:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 2588              		.loc 1 1014 0
 2589 004e 42F2A812 		movw	r2, #8616
 2590 0052 A258     		ldr	r2, [r4, r2]
 2591 0054 0292     		str	r2, [sp, #8]
1015:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 2592              		.loc 1 1015 0
 2593 0056 42F2A411 		movw	r1, #8612
 2594              	.LVL271:
 2595 005a 6258     		ldr	r2, [r4, r1]
 2596 005c 501C     		adds	r0, r2, #1
 2597              	.LVL272:
 2598 005e 6050     		str	r0, [r4, r1]
 2599 0060 0392     		str	r2, [sp, #12]
1016:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 0;
 2600              		.loc 1 1016 0
 2601 0062 8DF82430 		strb	r3, [sp, #36]
1017:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1018:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet inti USB raw packet*/
1019:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
ARM GAS  /tmp/ccSoqm0V.s 			page 69


 2602              		.loc 1 1019 0
 2603 0066 01A9     		add	r1, sp, #4
 2604 0068 2846     		mov	r0, r5
 2605 006a FFF7FEFF 		bl	USBH_PTP_SendRequest
 2606              	.LVL273:
1020:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1021:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1022:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 2607              		.loc 1 1022 0
 2608 006e 04F5EB52 		add	r2, r4, #7520
 2609 0072 0123     		movs	r3, #1
 2610 0074 1370     		strb	r3, [r2]
1023:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 2611              		.loc 1 1023 0
 2612 0076 41F66152 		movw	r2, #7521
 2613 007a A654     		strb	r6, [r4, r2]
1024:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY; 
 2614              		.loc 1 1024 0
 2615 007c 1C46     		mov	r4, r3
 2616              	.LVL274:
1025:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1026:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1027:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif     
1028:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2617              		.loc 1 1028 0
 2618 007e 09E0     		b	.L116
 2619              	.LVL275:
 2620              	.L118:
1029:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1030:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1031:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 2621              		.loc 1 1031 0
 2622 0080 FFF7FEFF 		bl	USBH_PTP_Process
 2623              	.LVL276:
1032:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1033:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 2624              		.loc 1 1033 0
 2625 0084 0446     		mov	r4, r0
 2626              	.LVL277:
 2627 0086 28B9     		cbnz	r0, .L116
1034:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1035:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        PTP_DecodeDeviceInfo (phost, dev_info);
 2628              		.loc 1 1035 0
 2629 0088 3146     		mov	r1, r6
 2630 008a 2846     		mov	r0, r5
 2631              	.LVL278:
 2632 008c FFF7FEFF 		bl	PTP_DecodeDeviceInfo
 2633              	.LVL279:
 2634 0090 00E0     		b	.L116
 2635              	.LVL280:
 2636              	.L120:
 997:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2637              		.loc 1 997 0
 2638 0092 0124     		movs	r4, #1
 2639              	.LVL281:
 2640              	.L116:
1036:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
ARM GAS  /tmp/ccSoqm0V.s 			page 70


1037:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1038:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1039:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1040:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1041:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1042:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1043:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 2641              		.loc 1 1043 0
 2642 0094 2046     		mov	r0, r4
 2643 0096 0AB0     		add	sp, sp, #40
 2644              	.LCFI38:
 2645              		.cfi_def_cfa_offset 16
 2646              		@ sp needed
 2647 0098 70BD     		pop	{r4, r5, r6, pc}
 2648              		.cfi_endproc
 2649              	.LFE141:
 2651 009a 00BF     		.section	.text.USBH_PTP_GetStorageIds,"ax",%progbits
 2652              		.align	2
 2653              		.global	USBH_PTP_GetStorageIds
 2654              		.thumb
 2655              		.thumb_func
 2657              	USBH_PTP_GetStorageIds:
 2658              	.LFB142:
1044:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1045:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1046:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetStorageIds
1047:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets device info dataset and fills deviceinfo structure.
1048:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1049:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1050:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1051:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1052:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetStorageIds (USBH_HandleTypeDef *phost, PTP_StorageIDsTypedef *storag
1053:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 2659              		.loc 1 1053 0
 2660              		.cfi_startproc
 2661              		@ args = 0, pretend = 0, frame = 40
 2662              		@ frame_needed = 0, uses_anonymous_args = 0
 2663              	.LVL282:
 2664 0000 70B5     		push	{r4, r5, r6, lr}
 2665              	.LCFI39:
 2666              		.cfi_def_cfa_offset 16
 2667              		.cfi_offset 4, -16
 2668              		.cfi_offset 5, -12
 2669              		.cfi_offset 6, -8
 2670              		.cfi_offset 14, -4
 2671 0002 8AB0     		sub	sp, sp, #40
 2672              	.LCFI40:
 2673              		.cfi_def_cfa_offset 56
 2674 0004 0546     		mov	r5, r0
 2675              	.LVL283:
1054:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1055:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2676              		.loc 1 1055 0
 2677 0006 D0F84435 		ldr	r3, [r0, #1348]
 2678 000a DC69     		ldr	r4, [r3, #28]
 2679              	.LVL284:
1056:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
ARM GAS  /tmp/ccSoqm0V.s 			page 71


1057:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1058:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 2680              		.loc 1 1058 0
 2681 000c 41F66153 		movw	r3, #7521
 2682 0010 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2683 0012 012B     		cmp	r3, #1
 2684 0014 03D0     		beq	.L124
 2685 0016 0E46     		mov	r6, r1
 2686 0018 022B     		cmp	r3, #2
 2687 001a 31D0     		beq	.L125
 2688 001c 39E0     		b	.L127
 2689              	.L124:
1059:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1060:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1061:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1062:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1063:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 2690              		.loc 1 1063 0
 2691 001e 0226     		movs	r6, #2
 2692 0020 42F2AC13 		movw	r3, #8620
 2693 0024 E650     		str	r6, [r4, r3]
1064:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 2694              		.loc 1 1064 0
 2695 0026 04F5EC53 		add	r3, r4, #7552
 2696 002a 0433     		adds	r3, r3, #4
 2697 002c 42F2B012 		movw	r2, #8624
 2698 0030 A350     		str	r3, [r4, r2]
1065:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 2699              		.loc 1 1065 0
 2700 0032 0023     		movs	r3, #0
 2701 0034 42F2B412 		movw	r2, #8628
 2702 0038 A350     		str	r3, [r4, r2]
1066:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 2703              		.loc 1 1066 0
 2704 003a 04F50752 		add	r2, r4, #8640
 2705 003e 1360     		str	r3, [r2]
1067:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 2706              		.loc 1 1067 0
 2707 0040 42F2B812 		movw	r2, #8632
 2708 0044 A350     		str	r3, [r4, r2]
1068:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1069:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1070:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetStorageIDs;
 2709              		.loc 1 1070 0
 2710 0046 41F20402 		movw	r2, #4100
 2711 004a ADF80420 		strh	r2, [sp, #4]	@ movhi
1071:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 2712              		.loc 1 1071 0
 2713 004e 42F2A812 		movw	r2, #8616
 2714 0052 A258     		ldr	r2, [r4, r2]
 2715 0054 0292     		str	r2, [sp, #8]
1072:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 2716              		.loc 1 1072 0
 2717 0056 42F2A411 		movw	r1, #8612
 2718              	.LVL285:
 2719 005a 6258     		ldr	r2, [r4, r1]
 2720 005c 501C     		adds	r0, r2, #1
ARM GAS  /tmp/ccSoqm0V.s 			page 72


 2721              	.LVL286:
 2722 005e 6050     		str	r0, [r4, r1]
 2723 0060 0392     		str	r2, [sp, #12]
1073:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 0;
 2724              		.loc 1 1073 0
 2725 0062 8DF82430 		strb	r3, [sp, #36]
1074:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1075:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet inti USB raw packet*/
1076:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 2726              		.loc 1 1076 0
 2727 0066 01A9     		add	r1, sp, #4
 2728 0068 2846     		mov	r0, r5
 2729 006a FFF7FEFF 		bl	USBH_PTP_SendRequest
 2730              	.LVL287:
1077:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1078:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1079:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 2731              		.loc 1 1079 0
 2732 006e 04F5EB52 		add	r2, r4, #7520
 2733 0072 0123     		movs	r3, #1
 2734 0074 1370     		strb	r3, [r2]
1080:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 2735              		.loc 1 1080 0
 2736 0076 41F66152 		movw	r2, #7521
 2737 007a A654     		strb	r6, [r4, r2]
1081:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
 2738              		.loc 1 1081 0
 2739 007c 1C46     		mov	r4, r3
 2740              	.LVL288:
1082:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1083:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1084:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1085:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2741              		.loc 1 1085 0
 2742 007e 09E0     		b	.L123
 2743              	.LVL289:
 2744              	.L125:
1086:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1087:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1088:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 2745              		.loc 1 1088 0
 2746 0080 FFF7FEFF 		bl	USBH_PTP_Process
 2747              	.LVL290:
1089:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1090:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 2748              		.loc 1 1090 0
 2749 0084 0446     		mov	r4, r0
 2750              	.LVL291:
 2751 0086 28B9     		cbnz	r0, .L123
1091:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1092:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       PTP_GetStorageIDs (phost, storage_ids);
 2752              		.loc 1 1092 0
 2753 0088 3146     		mov	r1, r6
 2754 008a 2846     		mov	r0, r5
 2755              	.LVL292:
 2756 008c FFF7FEFF 		bl	PTP_GetStorageIDs
 2757              	.LVL293:
ARM GAS  /tmp/ccSoqm0V.s 			page 73


 2758 0090 00E0     		b	.L123
 2759              	.LVL294:
 2760              	.L127:
1054:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2761              		.loc 1 1054 0
 2762 0092 0124     		movs	r4, #1
 2763              	.LVL295:
 2764              	.L123:
1093:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1094:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1095:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1096:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1097:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1098:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1099:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1100:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 2765              		.loc 1 1100 0
 2766 0094 2046     		mov	r0, r4
 2767 0096 0AB0     		add	sp, sp, #40
 2768              	.LCFI41:
 2769              		.cfi_def_cfa_offset 16
 2770              		@ sp needed
 2771 0098 70BD     		pop	{r4, r5, r6, pc}
 2772              		.cfi_endproc
 2773              	.LFE142:
 2775 009a 00BF     		.section	.text.USBH_PTP_GetStorageInfo,"ax",%progbits
 2776              		.align	2
 2777              		.global	USBH_PTP_GetStorageInfo
 2778              		.thumb
 2779              		.thumb_func
 2781              	USBH_PTP_GetStorageInfo:
 2782              	.LFB143:
1101:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1102:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1103:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetDeviceInfo
1104:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets device info dataset and fills deviceinfo structure.
1105:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1106:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1107:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1108:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1109:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetStorageInfo (USBH_HandleTypeDef *phost, uint32_t storage_id, PTP_Sto
1110:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 2783              		.loc 1 1110 0
 2784              		.cfi_startproc
 2785              		@ args = 0, pretend = 0, frame = 40
 2786              		@ frame_needed = 0, uses_anonymous_args = 0
 2787              	.LVL296:
 2788 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2789              	.LCFI42:
 2790              		.cfi_def_cfa_offset 20
 2791              		.cfi_offset 4, -20
 2792              		.cfi_offset 5, -16
 2793              		.cfi_offset 6, -12
 2794              		.cfi_offset 7, -8
 2795              		.cfi_offset 14, -4
 2796 0002 8BB0     		sub	sp, sp, #44
 2797              	.LCFI43:
ARM GAS  /tmp/ccSoqm0V.s 			page 74


 2798              		.cfi_def_cfa_offset 64
 2799 0004 0646     		mov	r6, r0
 2800 0006 0D46     		mov	r5, r1
 2801              	.LVL297:
1111:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1112:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2802              		.loc 1 1112 0
 2803 0008 D0F84435 		ldr	r3, [r0, #1348]
 2804 000c DC69     		ldr	r4, [r3, #28]
 2805              	.LVL298:
1113:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1114:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1115:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 2806              		.loc 1 1115 0
 2807 000e 41F66153 		movw	r3, #7521
 2808 0012 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 2809 0014 012B     		cmp	r3, #1
 2810 0016 03D0     		beq	.L131
 2811 0018 1746     		mov	r7, r2
 2812 001a 022B     		cmp	r3, #2
 2813 001c 31D0     		beq	.L132
 2814 001e 3AE0     		b	.L134
 2815              	.L131:
1116:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1117:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1118:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1119:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1120:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 2816              		.loc 1 1120 0
 2817 0020 0227     		movs	r7, #2
 2818 0022 42F2AC13 		movw	r3, #8620
 2819 0026 E750     		str	r7, [r4, r3]
1121:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 2820              		.loc 1 1121 0
 2821 0028 04F5EC53 		add	r3, r4, #7552
 2822 002c 0433     		adds	r3, r3, #4
 2823 002e 42F2B012 		movw	r2, #8624
 2824              	.LVL299:
 2825 0032 A350     		str	r3, [r4, r2]
1122:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 2826              		.loc 1 1122 0
 2827 0034 0023     		movs	r3, #0
 2828 0036 42F2B412 		movw	r2, #8628
 2829 003a A350     		str	r3, [r4, r2]
1123:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 2830              		.loc 1 1123 0
 2831 003c 04F50752 		add	r2, r4, #8640
 2832 0040 1360     		str	r3, [r2]
1124:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 2833              		.loc 1 1124 0
 2834 0042 42F2B812 		movw	r2, #8632
 2835 0046 A350     		str	r3, [r4, r2]
1125:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1126:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1127:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetStorageInfo;
 2836              		.loc 1 1127 0
 2837 0048 41F20503 		movw	r3, #4101
ARM GAS  /tmp/ccSoqm0V.s 			page 75


 2838 004c ADF80430 		strh	r3, [sp, #4]	@ movhi
1128:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 2839              		.loc 1 1128 0
 2840 0050 42F2A813 		movw	r3, #8616
 2841 0054 E358     		ldr	r3, [r4, r3]
 2842 0056 0293     		str	r3, [sp, #8]
1129:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 2843              		.loc 1 1129 0
 2844 0058 42F2A412 		movw	r2, #8612
 2845 005c A358     		ldr	r3, [r4, r2]
 2846 005e 591C     		adds	r1, r3, #1
 2847              	.LVL300:
 2848 0060 A150     		str	r1, [r4, r2]
 2849 0062 0393     		str	r3, [sp, #12]
1130:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = storage_id;    
 2850              		.loc 1 1130 0
 2851 0064 0495     		str	r5, [sp, #16]
1131:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 1;
 2852              		.loc 1 1131 0
 2853 0066 0125     		movs	r5, #1
 2854              	.LVL301:
 2855 0068 8DF82450 		strb	r5, [sp, #36]
1132:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1133:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet inti USB raw packet*/
1134:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 2856              		.loc 1 1134 0
 2857 006c 01A9     		add	r1, sp, #4
 2858 006e FFF7FEFF 		bl	USBH_PTP_SendRequest
 2859              	.LVL302:
1135:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1136:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1137:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 2860              		.loc 1 1137 0
 2861 0072 04F5EB53 		add	r3, r4, #7520
 2862 0076 1D70     		strb	r5, [r3]
1138:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 2863              		.loc 1 1138 0
 2864 0078 41F66153 		movw	r3, #7521
 2865 007c E754     		strb	r7, [r4, r3]
1139:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
 2866              		.loc 1 1139 0
 2867 007e 2C46     		mov	r4, r5
 2868              	.LVL303:
1140:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1141:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1142:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1143:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2869              		.loc 1 1143 0
 2870 0080 0AE0     		b	.L130
 2871              	.LVL304:
 2872              	.L132:
1144:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1145:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1146:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 2873              		.loc 1 1146 0
 2874 0082 FFF7FEFF 		bl	USBH_PTP_Process
 2875              	.LVL305:
ARM GAS  /tmp/ccSoqm0V.s 			page 76


1147:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1148:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 2876              		.loc 1 1148 0
 2877 0086 0446     		mov	r4, r0
 2878              	.LVL306:
 2879 0088 30B9     		cbnz	r0, .L130
1149:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1150:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       PTP_GetStorageInfo (phost, storage_id, storage_info);
 2880              		.loc 1 1150 0
 2881 008a 3A46     		mov	r2, r7
 2882 008c 2946     		mov	r1, r5
 2883 008e 3046     		mov	r0, r6
 2884              	.LVL307:
 2885 0090 FFF7FEFF 		bl	PTP_GetStorageInfo
 2886              	.LVL308:
 2887 0094 00E0     		b	.L130
 2888              	.LVL309:
 2889              	.L134:
1111:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2890              		.loc 1 1111 0
 2891 0096 0124     		movs	r4, #1
 2892              	.LVL310:
 2893              	.L130:
1151:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1152:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1153:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1154:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1155:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1156:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1157:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1158:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 2894              		.loc 1 1158 0
 2895 0098 2046     		mov	r0, r4
 2896 009a 0BB0     		add	sp, sp, #44
 2897              	.LCFI44:
 2898              		.cfi_def_cfa_offset 20
 2899              		@ sp needed
 2900 009c F0BD     		pop	{r4, r5, r6, r7, pc}
 2901              		.cfi_endproc
 2902              	.LFE143:
 2904 009e 00BF     		.section	.text.USBH_PTP_GetNumObjects,"ax",%progbits
 2905              		.align	2
 2906              		.global	USBH_PTP_GetNumObjects
 2907              		.thumb
 2908              		.thumb_func
 2910              	USBH_PTP_GetNumObjects:
 2911              	.LFB144:
1159:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1160:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1161:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetNumObjects
1162:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets device info dataset and fills deviceinfo structure.
1163:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1164:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1165:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1166:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1167:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetNumObjects (USBH_HandleTypeDef *phost, 
1168:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t storage_id, 
ARM GAS  /tmp/ccSoqm0V.s 			page 77


1169:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t objectformatcode, 
1170:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t associationOH,
1171:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t* numobs)
1172:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 2912              		.loc 1 1172 0
 2913              		.cfi_startproc
 2914              		@ args = 4, pretend = 0, frame = 40
 2915              		@ frame_needed = 0, uses_anonymous_args = 0
 2916              	.LVL311:
 2917 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2918              	.LCFI45:
 2919              		.cfi_def_cfa_offset 20
 2920              		.cfi_offset 4, -20
 2921              		.cfi_offset 5, -16
 2922              		.cfi_offset 6, -12
 2923              		.cfi_offset 7, -8
 2924              		.cfi_offset 14, -4
 2925 0002 8BB0     		sub	sp, sp, #44
 2926              	.LCFI46:
 2927              		.cfi_def_cfa_offset 64
 2928              	.LVL312:
1173:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1174:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 2929              		.loc 1 1174 0
 2930 0004 D0F84445 		ldr	r4, [r0, #1348]
 2931 0008 E469     		ldr	r4, [r4, #28]
 2932              	.LVL313:
1175:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1176:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1177:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 2933              		.loc 1 1177 0
 2934 000a 41F66155 		movw	r5, #7521
 2935 000e 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 2936 0010 012D     		cmp	r5, #1
 2937 0012 02D0     		beq	.L138
 2938 0014 022D     		cmp	r5, #2
 2939 0016 24D0     		beq	.L139
 2940 0018 2DE0     		b	.L141
 2941              	.L138:
1178:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1179:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1180:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1181:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1182:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_NODATA;
 2942              		.loc 1 1182 0
 2943 001a 0026     		movs	r6, #0
 2944 001c 42F2AC15 		movw	r5, #8620
 2945 0020 6651     		str	r6, [r4, r5]
1183:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1184:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1185:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetNumObjects;
 2946              		.loc 1 1185 0
 2947 0022 41F20605 		movw	r5, #4102
 2948 0026 ADF80450 		strh	r5, [sp, #4]	@ movhi
1186:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 2949              		.loc 1 1186 0
 2950 002a 42F2A815 		movw	r5, #8616
ARM GAS  /tmp/ccSoqm0V.s 			page 78


 2951 002e 6559     		ldr	r5, [r4, r5]
 2952 0030 0295     		str	r5, [sp, #8]
1187:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 2953              		.loc 1 1187 0
 2954 0032 42F2A416 		movw	r6, #8612
 2955 0036 A559     		ldr	r5, [r4, r6]
 2956 0038 6F1C     		adds	r7, r5, #1
 2957 003a A751     		str	r7, [r4, r6]
 2958 003c 0395     		str	r5, [sp, #12]
1188:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = storage_id;  
 2959              		.loc 1 1188 0
 2960 003e 0491     		str	r1, [sp, #16]
1189:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param2 = objectformatcode;
 2961              		.loc 1 1189 0
 2962 0040 0592     		str	r2, [sp, #20]
1190:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param3 = associationOH;    
 2963              		.loc 1 1190 0
 2964 0042 0693     		str	r3, [sp, #24]
1191:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 3;
 2965              		.loc 1 1191 0
 2966 0044 0323     		movs	r3, #3
 2967              	.LVL314:
 2968 0046 8DF82430 		strb	r3, [sp, #36]
1192:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1193:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1194:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 2969              		.loc 1 1194 0
 2970 004a 01A9     		add	r1, sp, #4
 2971              	.LVL315:
 2972 004c FFF7FEFF 		bl	USBH_PTP_SendRequest
 2973              	.LVL316:
1195:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1196:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1197:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 2974              		.loc 1 1197 0
 2975 0050 04F5EB52 		add	r2, r4, #7520
 2976 0054 0123     		movs	r3, #1
 2977 0056 1370     		strb	r3, [r2]
1198:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 2978              		.loc 1 1198 0
 2979 0058 0221     		movs	r1, #2
 2980 005a 41F66152 		movw	r2, #7521
 2981 005e A154     		strb	r1, [r4, r2]
1199:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1200:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1201:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1202:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1203:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 2982              		.loc 1 1203 0
 2983 0060 0AE0     		b	.L137
 2984              	.LVL317:
 2985              	.L139:
1204:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1205:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1206:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 2986              		.loc 1 1206 0
 2987 0062 FFF7FEFF 		bl	USBH_PTP_Process
ARM GAS  /tmp/ccSoqm0V.s 			page 79


 2988              	.LVL318:
1207:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1208:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 2989              		.loc 1 1208 0
 2990 0066 0346     		mov	r3, r0
 2991 0068 30B9     		cbnz	r0, .L137
1209:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1210:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       *numobs = MTP_Handle->ptp.resp_container.param1;
 2992              		.loc 1 1210 0
 2993 006a 42F29012 		movw	r2, #8592
 2994 006e A158     		ldr	r1, [r4, r2]
 2995 0070 109A     		ldr	r2, [sp, #64]
 2996 0072 1160     		str	r1, [r2]
 2997 0074 00E0     		b	.L137
 2998              	.LVL319:
 2999              	.L141:
1173:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3000              		.loc 1 1173 0
 3001 0076 0123     		movs	r3, #1
 3002              	.LVL320:
 3003              	.L137:
1211:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1212:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1213:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1214:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1215:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1216:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1217:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1218:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 3004              		.loc 1 1218 0
 3005 0078 1846     		mov	r0, r3
 3006 007a 0BB0     		add	sp, sp, #44
 3007              	.LCFI47:
 3008              		.cfi_def_cfa_offset 20
 3009              		@ sp needed
 3010 007c F0BD     		pop	{r4, r5, r6, r7, pc}
 3011              		.cfi_endproc
 3012              	.LFE144:
 3014 007e 00BF     		.section	.text.USBH_PTP_GetObjectHandles,"ax",%progbits
 3015              		.align	2
 3016              		.global	USBH_PTP_GetObjectHandles
 3017              		.thumb
 3018              		.thumb_func
 3020              	USBH_PTP_GetObjectHandles:
 3021              	.LFB145:
1219:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1220:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1221:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetObjectHandles
1222:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets device info dataset and fills deviceinfo structure.
1223:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1224:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1225:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1226:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1227:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetObjectHandles (USBH_HandleTypeDef *phost, 
1228:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t storage_id, 
1229:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t objectformatcode, 
1230:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t associationOH,
ARM GAS  /tmp/ccSoqm0V.s 			page 80


1231:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            PTP_ObjectHandlesTypedef* objecthandles)
1232:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3022              		.loc 1 1232 0
 3023              		.cfi_startproc
 3024              		@ args = 4, pretend = 0, frame = 40
 3025              		@ frame_needed = 0, uses_anonymous_args = 0
 3026              	.LVL321:
 3027 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3028              	.LCFI48:
 3029              		.cfi_def_cfa_offset 20
 3030              		.cfi_offset 4, -20
 3031              		.cfi_offset 5, -16
 3032              		.cfi_offset 6, -12
 3033              		.cfi_offset 7, -8
 3034              		.cfi_offset 14, -4
 3035 0002 8BB0     		sub	sp, sp, #44
 3036              	.LCFI49:
 3037              		.cfi_def_cfa_offset 64
 3038              	.LVL322:
1233:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1234:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3039              		.loc 1 1234 0
 3040 0004 D0F84445 		ldr	r4, [r0, #1348]
 3041 0008 E469     		ldr	r4, [r4, #28]
 3042              	.LVL323:
1235:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1236:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1237:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 3043              		.loc 1 1237 0
 3044 000a 41F66155 		movw	r5, #7521
 3045 000e 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 3046 0010 012D     		cmp	r5, #1
 3047 0012 02D0     		beq	.L145
 3048 0014 022D     		cmp	r5, #2
 3049 0016 35D0     		beq	.L146
 3050 0018 43E0     		b	.L148
 3051              	.L145:
1238:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1239:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1240:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1241:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1242:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 3052              		.loc 1 1242 0
 3053 001a 0226     		movs	r6, #2
 3054 001c 42F2AC15 		movw	r5, #8620
 3055 0020 6651     		str	r6, [r4, r5]
1243:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 3056              		.loc 1 1243 0
 3057 0022 04F5EC55 		add	r5, r4, #7552
 3058 0026 0435     		adds	r5, r5, #4
 3059 0028 42F2B017 		movw	r7, #8624
 3060 002c E551     		str	r5, [r4, r7]
1244:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 3061              		.loc 1 1244 0
 3062 002e 0025     		movs	r5, #0
 3063 0030 42F2B417 		movw	r7, #8628
 3064 0034 E551     		str	r5, [r4, r7]
ARM GAS  /tmp/ccSoqm0V.s 			page 81


1245:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 3065              		.loc 1 1245 0
 3066 0036 04F50757 		add	r7, r4, #8640
 3067 003a 3D60     		str	r5, [r7]
1246:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 3068              		.loc 1 1246 0
 3069 003c 42F2B817 		movw	r7, #8632
 3070 0040 E551     		str	r5, [r4, r7]
1247:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1248:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1249:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetObjectHandles;
 3071              		.loc 1 1249 0
 3072 0042 41F20705 		movw	r5, #4103
 3073 0046 ADF80450 		strh	r5, [sp, #4]	@ movhi
1250:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3074              		.loc 1 1250 0
 3075 004a 42F2A815 		movw	r5, #8616
 3076 004e 6559     		ldr	r5, [r4, r5]
 3077 0050 0295     		str	r5, [sp, #8]
1251:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3078              		.loc 1 1251 0
 3079 0052 42F2A417 		movw	r7, #8612
 3080 0056 E559     		ldr	r5, [r4, r7]
 3081 0058 05F1010E 		add	lr, r5, #1
 3082 005c 44F807E0 		str	lr, [r4, r7]
 3083 0060 0395     		str	r5, [sp, #12]
1252:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = storage_id;  
 3084              		.loc 1 1252 0
 3085 0062 0491     		str	r1, [sp, #16]
1253:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param2 = objectformatcode;
 3086              		.loc 1 1253 0
 3087 0064 0592     		str	r2, [sp, #20]
1254:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param3 = associationOH;    
 3088              		.loc 1 1254 0
 3089 0066 0693     		str	r3, [sp, #24]
1255:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 3;
 3090              		.loc 1 1255 0
 3091 0068 0323     		movs	r3, #3
 3092              	.LVL324:
 3093 006a 8DF82430 		strb	r3, [sp, #36]
1256:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1257:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1258:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 3094              		.loc 1 1258 0
 3095 006e 01A9     		add	r1, sp, #4
 3096              	.LVL325:
 3097 0070 FFF7FEFF 		bl	USBH_PTP_SendRequest
 3098              	.LVL326:
1259:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1260:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1261:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3099              		.loc 1 1261 0
 3100 0074 04F5EB53 		add	r3, r4, #7520
 3101 0078 0125     		movs	r5, #1
 3102 007a 1D70     		strb	r5, [r3]
1262:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 3103              		.loc 1 1262 0
ARM GAS  /tmp/ccSoqm0V.s 			page 82


 3104 007c 41F66153 		movw	r3, #7521
 3105 0080 E654     		strb	r6, [r4, r3]
1263:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1264:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1265:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1266:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1267:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3106              		.loc 1 1267 0
 3107 0082 0FE0     		b	.L144
 3108              	.LVL327:
 3109              	.L146:
1268:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1269:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1270:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 3110              		.loc 1 1270 0
 3111 0084 FFF7FEFF 		bl	USBH_PTP_Process
 3112              	.LVL328:
1271:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1272:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 3113              		.loc 1 1272 0
 3114 0088 0546     		mov	r5, r0
 3115 008a 58B9     		cbnz	r0, .L144
1273:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1274:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        objecthandles->n = PTP_GetArray32 (objecthandles->Handler, 
 3116              		.loc 1 1274 0
 3117 008c 0022     		movs	r2, #0
 3118 008e 04F5EC51 		add	r1, r4, #7552
 3119 0092 1031     		adds	r1, r1, #16
 3120 0094 109B     		ldr	r3, [sp, #64]
 3121 0096 181D     		adds	r0, r3, #4
 3122              	.LVL329:
 3123 0098 FFF7FEFF 		bl	PTP_GetArray32
 3124              	.LVL330:
 3125 009c 109B     		ldr	r3, [sp, #64]
 3126 009e 1860     		str	r0, [r3]
 3127 00a0 00E0     		b	.L144
 3128              	.LVL331:
 3129              	.L148:
1233:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3130              		.loc 1 1233 0
 3131 00a2 0125     		movs	r5, #1
 3132              	.LVL332:
 3133              	.L144:
1275:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                           MTP_Handle->ptp.data_container.payload.data, 
1276:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                           0); 
1277:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1278:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1279:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1280:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1281:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1282:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1283:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1284:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 3134              		.loc 1 1284 0
 3135 00a4 2846     		mov	r0, r5
 3136 00a6 0BB0     		add	sp, sp, #44
 3137              	.LCFI50:
ARM GAS  /tmp/ccSoqm0V.s 			page 83


 3138              		.cfi_def_cfa_offset 20
 3139              		@ sp needed
 3140 00a8 F0BD     		pop	{r4, r5, r6, r7, pc}
 3141              		.cfi_endproc
 3142              	.LFE145:
 3144 00aa 00BF     		.section	.text.USBH_PTP_GetObjectInfo,"ax",%progbits
 3145              		.align	2
 3146              		.global	USBH_PTP_GetObjectInfo
 3147              		.thumb
 3148              		.thumb_func
 3150              	USBH_PTP_GetObjectInfo:
 3151              	.LFB146:
1285:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1286:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1287:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetObjectInfo
1288:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets objert info
1289:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1290:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1291:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1292:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1293:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetObjectInfo (USBH_HandleTypeDef *phost, 
1294:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t handle, 
1295:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            PTP_ObjectInfoTypedef* object_info)
1296:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3152              		.loc 1 1296 0
 3153              		.cfi_startproc
 3154              		@ args = 0, pretend = 0, frame = 40
 3155              		@ frame_needed = 0, uses_anonymous_args = 0
 3156              	.LVL333:
 3157 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3158              	.LCFI51:
 3159              		.cfi_def_cfa_offset 20
 3160              		.cfi_offset 4, -20
 3161              		.cfi_offset 5, -16
 3162              		.cfi_offset 6, -12
 3163              		.cfi_offset 7, -8
 3164              		.cfi_offset 14, -4
 3165 0002 8BB0     		sub	sp, sp, #44
 3166              	.LCFI52:
 3167              		.cfi_def_cfa_offset 64
 3168 0004 0646     		mov	r6, r0
 3169              	.LVL334:
1297:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1298:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3170              		.loc 1 1298 0
 3171 0006 D0F84435 		ldr	r3, [r0, #1348]
 3172 000a DC69     		ldr	r4, [r3, #28]
 3173              	.LVL335:
1299:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1300:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1301:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 3174              		.loc 1 1301 0
 3175 000c 41F66153 		movw	r3, #7521
 3176 0010 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 3177 0012 012B     		cmp	r3, #1
 3178 0014 03D0     		beq	.L152
 3179 0016 1546     		mov	r5, r2
ARM GAS  /tmp/ccSoqm0V.s 			page 84


 3180 0018 022B     		cmp	r3, #2
 3181 001a 32D0     		beq	.L153
 3182 001c 3AE0     		b	.L155
 3183              	.L152:
1302:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1303:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1304:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1305:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1306:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 3184              		.loc 1 1306 0
 3185 001e 0227     		movs	r7, #2
 3186 0020 42F2AC13 		movw	r3, #8620
 3187 0024 E750     		str	r7, [r4, r3]
1307:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 3188              		.loc 1 1307 0
 3189 0026 04F5EC53 		add	r3, r4, #7552
 3190 002a 0433     		adds	r3, r3, #4
 3191 002c 42F2B012 		movw	r2, #8624
 3192              	.LVL336:
 3193 0030 A350     		str	r3, [r4, r2]
1308:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 3194              		.loc 1 1308 0
 3195 0032 0023     		movs	r3, #0
 3196 0034 42F2B412 		movw	r2, #8628
 3197 0038 A350     		str	r3, [r4, r2]
1309:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 3198              		.loc 1 1309 0
 3199 003a 04F50752 		add	r2, r4, #8640
 3200 003e 1360     		str	r3, [r2]
1310:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 3201              		.loc 1 1310 0
 3202 0040 42F2B812 		movw	r2, #8632
 3203 0044 A350     		str	r3, [r4, r2]
1311:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1312:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1313:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetObjectInfo;
 3204              		.loc 1 1313 0
 3205 0046 41F20803 		movw	r3, #4104
 3206 004a ADF80430 		strh	r3, [sp, #4]	@ movhi
1314:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3207              		.loc 1 1314 0
 3208 004e 42F2A813 		movw	r3, #8616
 3209 0052 E358     		ldr	r3, [r4, r3]
 3210 0054 0293     		str	r3, [sp, #8]
1315:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3211              		.loc 1 1315 0
 3212 0056 42F2A412 		movw	r2, #8612
 3213 005a A358     		ldr	r3, [r4, r2]
 3214 005c 581C     		adds	r0, r3, #1
 3215              	.LVL337:
 3216 005e A050     		str	r0, [r4, r2]
 3217 0060 0393     		str	r3, [sp, #12]
1316:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = handle;  
 3218              		.loc 1 1316 0
 3219 0062 0491     		str	r1, [sp, #16]
1317:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 1;
 3220              		.loc 1 1317 0
ARM GAS  /tmp/ccSoqm0V.s 			page 85


 3221 0064 0125     		movs	r5, #1
 3222 0066 8DF82450 		strb	r5, [sp, #36]
1318:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1319:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1320:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 3223              		.loc 1 1320 0
 3224 006a 01A9     		add	r1, sp, #4
 3225              	.LVL338:
 3226 006c 3046     		mov	r0, r6
 3227 006e FFF7FEFF 		bl	USBH_PTP_SendRequest
 3228              	.LVL339:
1321:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1322:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1323:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3229              		.loc 1 1323 0
 3230 0072 04F5EB53 		add	r3, r4, #7520
 3231 0076 1D70     		strb	r5, [r3]
1324:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 3232              		.loc 1 1324 0
 3233 0078 41F66153 		movw	r3, #7521
 3234 007c E754     		strb	r7, [r4, r3]
1325:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
 3235              		.loc 1 1325 0
 3236 007e 2C46     		mov	r4, r5
 3237              	.LVL340:
1326:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1327:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1328:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1329:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3238              		.loc 1 1329 0
 3239 0080 09E0     		b	.L151
 3240              	.LVL341:
 3241              	.L153:
1330:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1331:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1332:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 3242              		.loc 1 1332 0
 3243 0082 FFF7FEFF 		bl	USBH_PTP_Process
 3244              	.LVL342:
1333:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1334:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 3245              		.loc 1 1334 0
 3246 0086 0446     		mov	r4, r0
 3247              	.LVL343:
 3248 0088 28B9     		cbnz	r0, .L151
1335:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1336:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        PTP_GetObjectInfo (phost, object_info);
 3249              		.loc 1 1336 0
 3250 008a 2946     		mov	r1, r5
 3251 008c 3046     		mov	r0, r6
 3252              	.LVL344:
 3253 008e FFF7FEFF 		bl	PTP_GetObjectInfo
 3254              	.LVL345:
 3255 0092 00E0     		b	.L151
 3256              	.LVL346:
 3257              	.L155:
1297:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
ARM GAS  /tmp/ccSoqm0V.s 			page 86


 3258              		.loc 1 1297 0
 3259 0094 0124     		movs	r4, #1
 3260              	.LVL347:
 3261              	.L151:
1337:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1338:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1339:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1340:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1341:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1342:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1343:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1344:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 3262              		.loc 1 1344 0
 3263 0096 2046     		mov	r0, r4
 3264 0098 0BB0     		add	sp, sp, #44
 3265              	.LCFI53:
 3266              		.cfi_def_cfa_offset 20
 3267              		@ sp needed
 3268 009a F0BD     		pop	{r4, r5, r6, r7, pc}
 3269              		.cfi_endproc
 3270              	.LFE146:
 3272              		.section	.text.USBH_PTP_DeleteObject,"ax",%progbits
 3273              		.align	2
 3274              		.global	USBH_PTP_DeleteObject
 3275              		.thumb
 3276              		.thumb_func
 3278              	USBH_PTP_DeleteObject:
 3279              	.LFB147:
1345:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1346:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1347:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_DeleteObject
1348:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Delete an object.
1349:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1350:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  handle : Object Handle
1351:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1352:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1353:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_DeleteObject (USBH_HandleTypeDef *phost,
1354:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                           uint32_t handle,
1355:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                           uint32_t objectformatcode)
1356:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3280              		.loc 1 1356 0
 3281              		.cfi_startproc
 3282              		@ args = 0, pretend = 0, frame = 40
 3283              		@ frame_needed = 0, uses_anonymous_args = 0
 3284              	.LVL348:
 3285 0000 70B5     		push	{r4, r5, r6, lr}
 3286              	.LCFI54:
 3287              		.cfi_def_cfa_offset 16
 3288              		.cfi_offset 4, -16
 3289              		.cfi_offset 5, -12
 3290              		.cfi_offset 6, -8
 3291              		.cfi_offset 14, -4
 3292 0002 8AB0     		sub	sp, sp, #40
 3293              	.LCFI55:
 3294              		.cfi_def_cfa_offset 56
 3295              	.LVL349:
1357:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
ARM GAS  /tmp/ccSoqm0V.s 			page 87


1358:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3296              		.loc 1 1358 0
 3297 0004 D0F84435 		ldr	r3, [r0, #1348]
 3298 0008 DC69     		ldr	r4, [r3, #28]
 3299              	.LVL350:
1359:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1360:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1361:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 3300              		.loc 1 1361 0
 3301 000a 41F66153 		movw	r3, #7521
 3302 000e E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 3303 0010 012B     		cmp	r3, #1
 3304 0012 02D0     		beq	.L159
 3305 0014 022B     		cmp	r3, #2
 3306 0016 22D0     		beq	.L160
 3307 0018 24E0     		b	.L162
 3308              	.L159:
1362:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1363:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1364:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1365:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1366:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_NODATA;
 3309              		.loc 1 1366 0
 3310 001a 0025     		movs	r5, #0
 3311 001c 42F2AC13 		movw	r3, #8620
 3312 0020 E550     		str	r5, [r4, r3]
1367:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1368:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1369:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_DeleteObject;
 3313              		.loc 1 1369 0
 3314 0022 41F20B03 		movw	r3, #4107
 3315 0026 ADF80430 		strh	r3, [sp, #4]	@ movhi
1370:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3316              		.loc 1 1370 0
 3317 002a 42F2A813 		movw	r3, #8616
 3318 002e E358     		ldr	r3, [r4, r3]
 3319 0030 0293     		str	r3, [sp, #8]
1371:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3320              		.loc 1 1371 0
 3321 0032 42F2A415 		movw	r5, #8612
 3322 0036 6359     		ldr	r3, [r4, r5]
 3323 0038 5E1C     		adds	r6, r3, #1
 3324 003a 6651     		str	r6, [r4, r5]
 3325 003c 0393     		str	r3, [sp, #12]
1372:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = handle;  
 3326              		.loc 1 1372 0
 3327 003e 0491     		str	r1, [sp, #16]
1373:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param2 = objectformatcode;
 3328              		.loc 1 1373 0
 3329 0040 0592     		str	r2, [sp, #20]
1374:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 2;
 3330              		.loc 1 1374 0
 3331 0042 0225     		movs	r5, #2
 3332 0044 8DF82450 		strb	r5, [sp, #36]
1375:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1376:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1377:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
ARM GAS  /tmp/ccSoqm0V.s 			page 88


 3333              		.loc 1 1377 0
 3334 0048 01A9     		add	r1, sp, #4
 3335              	.LVL351:
 3336 004a FFF7FEFF 		bl	USBH_PTP_SendRequest
 3337              	.LVL352:
1378:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1379:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1380:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3338              		.loc 1 1380 0
 3339 004e 04F5EB53 		add	r3, r4, #7520
 3340 0052 0120     		movs	r0, #1
 3341 0054 1870     		strb	r0, [r3]
1381:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 3342              		.loc 1 1381 0
 3343 0056 41F66153 		movw	r3, #7521
 3344 005a E554     		strb	r5, [r4, r3]
1382:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1383:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1384:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1385:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1386:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3345              		.loc 1 1386 0
 3346 005c 03E0     		b	.L158
 3347              	.LVL353:
 3348              	.L160:
1387:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1388:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1389:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 3349              		.loc 1 1389 0
 3350 005e FFF7FEFF 		bl	USBH_PTP_Process
 3351              	.LVL354:
1390:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3352              		.loc 1 1390 0
 3353 0062 00E0     		b	.L158
 3354              	.LVL355:
 3355              	.L162:
1357:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3356              		.loc 1 1357 0
 3357 0064 0120     		movs	r0, #1
 3358              	.LVL356:
 3359              	.L158:
1391:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1392:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1393:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1394:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1395:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1396:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 3360              		.loc 1 1396 0
 3361 0066 0AB0     		add	sp, sp, #40
 3362              	.LCFI56:
 3363              		.cfi_def_cfa_offset 16
 3364              		@ sp needed
 3365 0068 70BD     		pop	{r4, r5, r6, pc}
 3366              		.cfi_endproc
 3367              	.LFE147:
 3369 006a 00BF     		.section	.text.USBH_PTP_GetObject,"ax",%progbits
 3370              		.align	2
ARM GAS  /tmp/ccSoqm0V.s 			page 89


 3371              		.global	USBH_PTP_GetObject
 3372              		.thumb
 3373              		.thumb_func
 3375              	USBH_PTP_GetObject:
 3376              	.LFB148:
1397:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1398:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1399:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetObject
1400:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets object
1401:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1402:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1403:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1404:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1405:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetObject (USBH_HandleTypeDef *phost, 
1406:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t handle, 
1407:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint8_t *object)
1408:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3377              		.loc 1 1408 0
 3378              		.cfi_startproc
 3379              		@ args = 0, pretend = 0, frame = 40
 3380              		@ frame_needed = 0, uses_anonymous_args = 0
 3381              	.LVL357:
 3382 0000 70B5     		push	{r4, r5, r6, lr}
 3383              	.LCFI57:
 3384              		.cfi_def_cfa_offset 16
 3385              		.cfi_offset 4, -16
 3386              		.cfi_offset 5, -12
 3387              		.cfi_offset 6, -8
 3388              		.cfi_offset 14, -4
 3389 0002 8AB0     		sub	sp, sp, #40
 3390              	.LCFI58:
 3391              		.cfi_def_cfa_offset 56
 3392              	.LVL358:
1409:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1410:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3393              		.loc 1 1410 0
 3394 0004 D0F84435 		ldr	r3, [r0, #1348]
 3395 0008 DC69     		ldr	r4, [r3, #28]
 3396              	.LVL359:
1411:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1412:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1413:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 3397              		.loc 1 1413 0
 3398 000a 41F66153 		movw	r3, #7521
 3399 000e E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 3400 0010 012B     		cmp	r3, #1
 3401 0012 02D0     		beq	.L166
 3402 0014 022B     		cmp	r3, #2
 3403 0016 33D0     		beq	.L167
 3404 0018 45E0     		b	.L169
 3405              	.L166:
1414:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1415:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1416:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1417:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1418:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 3406              		.loc 1 1418 0
ARM GAS  /tmp/ccSoqm0V.s 			page 90


 3407 001a 0226     		movs	r6, #2
 3408 001c 42F2AC13 		movw	r3, #8620
 3409 0020 E650     		str	r6, [r4, r3]
1419:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 3410              		.loc 1 1419 0
 3411 0022 04F5EC53 		add	r3, r4, #7552
 3412 0026 0433     		adds	r3, r3, #4
 3413 0028 42F2B015 		movw	r5, #8624
 3414 002c 6351     		str	r3, [r4, r5]
1420:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 3415              		.loc 1 1420 0
 3416 002e 0023     		movs	r3, #0
 3417 0030 42F2B415 		movw	r5, #8628
 3418 0034 6351     		str	r3, [r4, r5]
1421:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 3419              		.loc 1 1421 0
 3420 0036 04F50755 		add	r5, r4, #8640
 3421 003a 2B60     		str	r3, [r5]
1422:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 3422              		.loc 1 1422 0
 3423 003c 42F2B815 		movw	r5, #8632
 3424 0040 6351     		str	r3, [r4, r5]
1423:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1424:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* set object control params */
1425:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.object_ptr = object;
 3425              		.loc 1 1425 0
 3426 0042 42F2C413 		movw	r3, #8644
 3427 0046 E250     		str	r2, [r4, r3]
1426:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1427:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1428:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetObject;
 3428              		.loc 1 1428 0
 3429 0048 41F20903 		movw	r3, #4105
 3430 004c ADF80430 		strh	r3, [sp, #4]	@ movhi
1429:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3431              		.loc 1 1429 0
 3432 0050 42F2A813 		movw	r3, #8616
 3433 0054 E358     		ldr	r3, [r4, r3]
 3434 0056 0293     		str	r3, [sp, #8]
1430:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3435              		.loc 1 1430 0
 3436 0058 42F2A412 		movw	r2, #8612
 3437              	.LVL360:
 3438 005c A358     		ldr	r3, [r4, r2]
 3439 005e 5D1C     		adds	r5, r3, #1
 3440 0060 A550     		str	r5, [r4, r2]
 3441 0062 0393     		str	r3, [sp, #12]
1431:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = handle;  
 3442              		.loc 1 1431 0
 3443 0064 0491     		str	r1, [sp, #16]
1432:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 1;
 3444              		.loc 1 1432 0
 3445 0066 0125     		movs	r5, #1
 3446 0068 8DF82450 		strb	r5, [sp, #36]
1433:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1434:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1435:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
ARM GAS  /tmp/ccSoqm0V.s 			page 91


1436:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 3447              		.loc 1 1436 0
 3448 006c 01A9     		add	r1, sp, #4
 3449              	.LVL361:
 3450 006e FFF7FEFF 		bl	USBH_PTP_SendRequest
 3451              	.LVL362:
1437:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1438:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1439:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3452              		.loc 1 1439 0
 3453 0072 04F5EB53 		add	r3, r4, #7520
 3454 0076 1D70     		strb	r5, [r3]
1440:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 3455              		.loc 1 1440 0
 3456 0078 41F66153 		movw	r3, #7521
 3457 007c E654     		strb	r6, [r4, r3]
1441:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1442:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1443:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1444:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1445:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3458              		.loc 1 1445 0
 3459 007e 13E0     		b	.L165
 3460              	.LVL363:
 3461              	.L167:
1446:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1447:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1448:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 3462              		.loc 1 1448 0
 3463 0080 FFF7FEFF 		bl	USBH_PTP_Process
 3464              	.LVL364:
1449:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1450:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 3465              		.loc 1 1450 0
 3466 0084 0546     		mov	r5, r0
 3467 0086 78B9     		cbnz	r0, .L165
1451:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1452:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       /* first packet is in the PTP data payload buffer */
1453:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       if(MTP_Handle->ptp.iteration == 0)
 3468              		.loc 1 1453 0
 3469 0088 42F2BC13 		movw	r3, #8636
 3470 008c E358     		ldr	r3, [r4, r3]
 3471 008e 5BB9     		cbnz	r3, .L165
1454:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
1455:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         /* copy it to object */
1456:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         USBH_memcpy(MTP_Handle->ptp.object_ptr, MTP_Handle->ptp.data_container.payload.data, PTP_US
 3472              		.loc 1 1456 0
 3473 0090 4FF47D72 		mov	r2, #1012
 3474 0094 04F5EC51 		add	r1, r4, #7552
 3475 0098 1031     		adds	r1, r1, #16
 3476 009a 42F2C413 		movw	r3, #8644
 3477 009e E058     		ldr	r0, [r4, r3]
 3478              	.LVL365:
 3479 00a0 FFF7FEFF 		bl	memcpy
 3480              	.LVL366:
 3481 00a4 00E0     		b	.L165
 3482              	.LVL367:
ARM GAS  /tmp/ccSoqm0V.s 			page 92


 3483              	.L169:
1409:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3484              		.loc 1 1409 0
 3485 00a6 0125     		movs	r5, #1
 3486              	.LVL368:
 3487              	.L165:
1457:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }
1458:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1459:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1460:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1461:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1462:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1463:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1464:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1465:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 3488              		.loc 1 1465 0
 3489 00a8 2846     		mov	r0, r5
 3490 00aa 0AB0     		add	sp, sp, #40
 3491              	.LCFI59:
 3492              		.cfi_def_cfa_offset 16
 3493              		@ sp needed
 3494 00ac 70BD     		pop	{r4, r5, r6, pc}
 3495              		.cfi_endproc
 3496              	.LFE148:
 3498 00ae 00BF     		.section	.text.USBH_PTP_GetPartialObject,"ax",%progbits
 3499              		.align	2
 3500              		.global	USBH_PTP_GetPartialObject
 3501              		.thumb
 3502              		.thumb_func
 3504              	USBH_PTP_GetPartialObject:
 3505              	.LFB149:
1466:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1467:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1468:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetPartialObject
1469:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets object partially
1470:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1471:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1472:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1473:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1474:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetPartialObject(USBH_HandleTypeDef *phost, 
1475:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t handle, 
1476:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t offset,
1477:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t maxbytes, 
1478:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint8_t *object,
1479:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t *len)
1480:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3506              		.loc 1 1480 0
 3507              		.cfi_startproc
 3508              		@ args = 8, pretend = 0, frame = 40
 3509              		@ frame_needed = 0, uses_anonymous_args = 0
 3510              	.LVL369:
 3511 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3512              	.LCFI60:
 3513              		.cfi_def_cfa_offset 20
 3514              		.cfi_offset 4, -20
 3515              		.cfi_offset 5, -16
 3516              		.cfi_offset 6, -12
ARM GAS  /tmp/ccSoqm0V.s 			page 93


 3517              		.cfi_offset 7, -8
 3518              		.cfi_offset 14, -4
 3519 0002 8BB0     		sub	sp, sp, #44
 3520              	.LCFI61:
 3521              		.cfi_def_cfa_offset 64
 3522              	.LVL370:
1481:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1482:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3523              		.loc 1 1482 0
 3524 0004 D0F84445 		ldr	r4, [r0, #1348]
 3525 0008 E469     		ldr	r4, [r4, #28]
 3526              	.LVL371:
1483:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1484:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1485:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 3527              		.loc 1 1485 0
 3528 000a 41F66155 		movw	r5, #7521
 3529 000e 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 3530 0010 012D     		cmp	r5, #1
 3531 0012 02D0     		beq	.L173
 3532 0014 022D     		cmp	r5, #2
 3533 0016 39D0     		beq	.L174
 3534 0018 4EE0     		b	.L176
 3535              	.L173:
1486:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1487:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1488:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1489:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1490:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 3536              		.loc 1 1490 0
 3537 001a 0226     		movs	r6, #2
 3538 001c 42F2AC15 		movw	r5, #8620
 3539 0020 6651     		str	r6, [r4, r5]
1491:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 3540              		.loc 1 1491 0
 3541 0022 04F5EC55 		add	r5, r4, #7552
 3542 0026 0435     		adds	r5, r5, #4
 3543 0028 42F2B017 		movw	r7, #8624
 3544 002c E551     		str	r5, [r4, r7]
1492:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 3545              		.loc 1 1492 0
 3546 002e 0025     		movs	r5, #0
 3547 0030 42F2B417 		movw	r7, #8628
 3548 0034 E551     		str	r5, [r4, r7]
1493:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 3549              		.loc 1 1493 0
 3550 0036 04F50757 		add	r7, r4, #8640
 3551 003a 3D60     		str	r5, [r7]
1494:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 3552              		.loc 1 1494 0
 3553 003c 42F2B817 		movw	r7, #8632
 3554 0040 E551     		str	r5, [r4, r7]
1495:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1496:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* set object control params */
1497:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.object_ptr = object;
 3555              		.loc 1 1497 0
 3556 0042 42F2C415 		movw	r5, #8644
ARM GAS  /tmp/ccSoqm0V.s 			page 94


 3557 0046 109F     		ldr	r7, [sp, #64]
 3558 0048 6751     		str	r7, [r4, r5]
1498:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1499:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1500:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetPartialObject;
 3559              		.loc 1 1500 0
 3560 004a 41F21B05 		movw	r5, #4123
 3561 004e ADF80450 		strh	r5, [sp, #4]	@ movhi
1501:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3562              		.loc 1 1501 0
 3563 0052 42F2A815 		movw	r5, #8616
 3564 0056 6559     		ldr	r5, [r4, r5]
 3565 0058 0295     		str	r5, [sp, #8]
1502:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3566              		.loc 1 1502 0
 3567 005a 42F2A417 		movw	r7, #8612
 3568 005e E559     		ldr	r5, [r4, r7]
 3569 0060 05F1010E 		add	lr, r5, #1
 3570 0064 44F807E0 		str	lr, [r4, r7]
 3571 0068 0395     		str	r5, [sp, #12]
1503:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = handle;  
 3572              		.loc 1 1503 0
 3573 006a 0491     		str	r1, [sp, #16]
1504:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param2 = offset;
 3574              		.loc 1 1504 0
 3575 006c 0592     		str	r2, [sp, #20]
1505:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param3 = maxbytes;   
 3576              		.loc 1 1505 0
 3577 006e 0693     		str	r3, [sp, #24]
1506:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 3;
 3578              		.loc 1 1506 0
 3579 0070 0323     		movs	r3, #3
 3580              	.LVL372:
 3581 0072 8DF82430 		strb	r3, [sp, #36]
1507:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1508:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1509:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 3582              		.loc 1 1509 0
 3583 0076 01A9     		add	r1, sp, #4
 3584              	.LVL373:
 3585 0078 FFF7FEFF 		bl	USBH_PTP_SendRequest
 3586              	.LVL374:
1510:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1511:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1512:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3587              		.loc 1 1512 0
 3588 007c 04F5EB53 		add	r3, r4, #7520
 3589 0080 0125     		movs	r5, #1
 3590 0082 1D70     		strb	r5, [r3]
1513:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 3591              		.loc 1 1513 0
 3592 0084 41F66153 		movw	r3, #7521
 3593 0088 E654     		strb	r6, [r4, r3]
1514:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1515:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1516:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1517:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
ARM GAS  /tmp/ccSoqm0V.s 			page 95


1518:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3594              		.loc 1 1518 0
 3595 008a 16E0     		b	.L172
 3596              	.LVL375:
 3597              	.L174:
1519:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1520:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1521:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 3598              		.loc 1 1521 0
 3599 008c FFF7FEFF 		bl	USBH_PTP_Process
 3600              	.LVL376:
1522:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1523:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 3601              		.loc 1 1523 0
 3602 0090 0546     		mov	r5, r0
 3603 0092 90B9     		cbnz	r0, .L172
1524:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1525:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       *len = MTP_Handle->ptp.resp_container.param1;
 3604              		.loc 1 1525 0
 3605 0094 42F29013 		movw	r3, #8592
 3606 0098 E258     		ldr	r2, [r4, r3]
 3607 009a 119B     		ldr	r3, [sp, #68]
 3608 009c 1A60     		str	r2, [r3]
1526:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       /* first packet is in the PTP data payload buffer */
1527:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       if(MTP_Handle->ptp.iteration == 0)
 3609              		.loc 1 1527 0
 3610 009e 42F2BC13 		movw	r3, #8636
 3611 00a2 E358     		ldr	r3, [r4, r3]
 3612 00a4 4BB9     		cbnz	r3, .L172
1528:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       {
1529:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         /* copy it to object */
1530:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         USBH_memcpy(MTP_Handle->ptp.object_ptr, MTP_Handle->ptp.data_container.payload.data, *len);
 3613              		.loc 1 1530 0
 3614 00a6 04F5EC51 		add	r1, r4, #7552
 3615 00aa 1031     		adds	r1, r1, #16
 3616 00ac 42F2C413 		movw	r3, #8644
 3617 00b0 E058     		ldr	r0, [r4, r3]
 3618              	.LVL377:
 3619 00b2 FFF7FEFF 		bl	memcpy
 3620              	.LVL378:
 3621 00b6 00E0     		b	.L172
 3622              	.LVL379:
 3623              	.L176:
1481:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3624              		.loc 1 1481 0
 3625 00b8 0125     		movs	r5, #1
 3626              	.LVL380:
 3627              	.L172:
1531:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       }      
1532:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1533:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1534:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1535:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1536:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1537:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1538:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1539:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
ARM GAS  /tmp/ccSoqm0V.s 			page 96


 3628              		.loc 1 1539 0
 3629 00ba 2846     		mov	r0, r5
 3630 00bc 0BB0     		add	sp, sp, #44
 3631              	.LCFI62:
 3632              		.cfi_def_cfa_offset 20
 3633              		@ sp needed
 3634 00be F0BD     		pop	{r4, r5, r6, r7, pc}
 3635              		.cfi_endproc
 3636              	.LFE149:
 3638              		.section	.text.USBH_PTP_GetObjectPropsSupported,"ax",%progbits
 3639              		.align	2
 3640              		.global	USBH_PTP_GetObjectPropsSupported
 3641              		.thumb
 3642              		.thumb_func
 3644              	USBH_PTP_GetObjectPropsSupported:
 3645              	.LFB150:
1540:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1541:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1542:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetObjectPropsSupported
1543:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets object partially
1544:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1545:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1546:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1547:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1548:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetObjectPropsSupported (USBH_HandleTypeDef *phost,
1549:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                      uint16_t ofc,
1550:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                      uint32_t *propnum, 
1551:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                      uint16_t *props)
1552:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3646              		.loc 1 1552 0
 3647              		.cfi_startproc
 3648              		@ args = 0, pretend = 0, frame = 40
 3649              		@ frame_needed = 0, uses_anonymous_args = 0
 3650              	.LVL381:
 3651 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3652              	.LCFI63:
 3653              		.cfi_def_cfa_offset 20
 3654              		.cfi_offset 4, -20
 3655              		.cfi_offset 5, -16
 3656              		.cfi_offset 6, -12
 3657              		.cfi_offset 7, -8
 3658              		.cfi_offset 14, -4
 3659 0002 8BB0     		sub	sp, sp, #44
 3660              	.LCFI64:
 3661              		.cfi_def_cfa_offset 64
 3662 0004 1F46     		mov	r7, r3
 3663              	.LVL382:
1553:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1554:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3664              		.loc 1 1554 0
 3665 0006 D0F84435 		ldr	r3, [r0, #1348]
 3666              	.LVL383:
 3667 000a DC69     		ldr	r4, [r3, #28]
 3668              	.LVL384:
1555:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1556:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1557:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
ARM GAS  /tmp/ccSoqm0V.s 			page 97


 3669              		.loc 1 1557 0
 3670 000c 41F66153 		movw	r3, #7521
 3671 0010 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 3672 0012 012B     		cmp	r3, #1
 3673 0014 03D0     		beq	.L180
 3674 0016 1646     		mov	r6, r2
 3675 0018 022B     		cmp	r3, #2
 3676 001a 30D0     		beq	.L181
 3677 001c 3CE0     		b	.L183
 3678              	.L180:
1558:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1559:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1560:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1561:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1562:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 3679              		.loc 1 1562 0
 3680 001e 0226     		movs	r6, #2
 3681 0020 42F2AC13 		movw	r3, #8620
 3682 0024 E650     		str	r6, [r4, r3]
1563:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 3683              		.loc 1 1563 0
 3684 0026 04F5EC53 		add	r3, r4, #7552
 3685 002a 0433     		adds	r3, r3, #4
 3686 002c 42F2B012 		movw	r2, #8624
 3687              	.LVL385:
 3688 0030 A350     		str	r3, [r4, r2]
1564:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 3689              		.loc 1 1564 0
 3690 0032 0023     		movs	r3, #0
 3691 0034 42F2B412 		movw	r2, #8628
 3692 0038 A350     		str	r3, [r4, r2]
1565:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 3693              		.loc 1 1565 0
 3694 003a 04F50752 		add	r2, r4, #8640
 3695 003e 1360     		str	r3, [r2]
1566:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 3696              		.loc 1 1566 0
 3697 0040 42F2B812 		movw	r2, #8632
 3698 0044 A350     		str	r3, [r4, r2]
1567:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1568:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1569:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetObjectPropsSupported;
 3699              		.loc 1 1569 0
 3700 0046 49F60103 		movw	r3, #38913
 3701 004a ADF80430 		strh	r3, [sp, #4]	@ movhi
1570:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3702              		.loc 1 1570 0
 3703 004e 42F2A813 		movw	r3, #8616
 3704 0052 E358     		ldr	r3, [r4, r3]
 3705 0054 0293     		str	r3, [sp, #8]
1571:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3706              		.loc 1 1571 0
 3707 0056 42F2A412 		movw	r2, #8612
 3708 005a A358     		ldr	r3, [r4, r2]
 3709 005c 5D1C     		adds	r5, r3, #1
 3710 005e A550     		str	r5, [r4, r2]
 3711 0060 0393     		str	r3, [sp, #12]
ARM GAS  /tmp/ccSoqm0V.s 			page 98


1572:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = ofc;  
 3712              		.loc 1 1572 0
 3713 0062 0491     		str	r1, [sp, #16]
1573:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 1;
 3714              		.loc 1 1573 0
 3715 0064 0125     		movs	r5, #1
 3716 0066 8DF82450 		strb	r5, [sp, #36]
1574:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1575:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1576:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 3717              		.loc 1 1576 0
 3718 006a 01A9     		add	r1, sp, #4
 3719              	.LVL386:
 3720 006c FFF7FEFF 		bl	USBH_PTP_SendRequest
 3721              	.LVL387:
1577:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1578:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1579:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3722              		.loc 1 1579 0
 3723 0070 04F5EB53 		add	r3, r4, #7520
 3724 0074 1D70     		strb	r5, [r3]
1580:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 3725              		.loc 1 1580 0
 3726 0076 41F66153 		movw	r3, #7521
 3727 007a E654     		strb	r6, [r4, r3]
1581:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1582:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1583:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1584:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1585:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3728              		.loc 1 1585 0
 3729 007c 0DE0     		b	.L179
 3730              	.LVL388:
 3731              	.L181:
1586:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1587:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1588:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 3732              		.loc 1 1588 0
 3733 007e FFF7FEFF 		bl	USBH_PTP_Process
 3734              	.LVL389:
1589:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1590:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 3735              		.loc 1 1590 0
 3736 0082 0546     		mov	r5, r0
 3737 0084 48B9     		cbnz	r0, .L179
1591:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1592:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       *propnum = PTP_GetArray16 (props, MTP_Handle->ptp.data_container.payload.data, 0);      
 3738              		.loc 1 1592 0
 3739 0086 0022     		movs	r2, #0
 3740 0088 04F5EC51 		add	r1, r4, #7552
 3741 008c 1031     		adds	r1, r1, #16
 3742 008e 3846     		mov	r0, r7
 3743              	.LVL390:
 3744 0090 FFF7FEFF 		bl	PTP_GetArray16
 3745              	.LVL391:
 3746 0094 3060     		str	r0, [r6]
 3747 0096 00E0     		b	.L179
ARM GAS  /tmp/ccSoqm0V.s 			page 99


 3748              	.LVL392:
 3749              	.L183:
1553:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3750              		.loc 1 1553 0
 3751 0098 0125     		movs	r5, #1
 3752              	.LVL393:
 3753              	.L179:
1593:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1594:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1595:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1596:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1597:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1598:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1599:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1600:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 3754              		.loc 1 1600 0
 3755 009a 2846     		mov	r0, r5
 3756 009c 0BB0     		add	sp, sp, #44
 3757              	.LCFI65:
 3758              		.cfi_def_cfa_offset 20
 3759              		@ sp needed
 3760 009e F0BD     		pop	{r4, r5, r6, r7, pc}
 3761              		.cfi_endproc
 3762              	.LFE150:
 3764              		.section	.text.USBH_PTP_GetObjectPropDesc,"ax",%progbits
 3765              		.align	2
 3766              		.global	USBH_PTP_GetObjectPropDesc
 3767              		.thumb
 3768              		.thumb_func
 3770              	USBH_PTP_GetObjectPropDesc:
 3771              	.LFB151:
1601:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1602:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1603:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetObjectPropDesc
1604:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets object partially
1605:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1606:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1607:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1608:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1609:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetObjectPropDesc (USBH_HandleTypeDef *phost,
1610:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                 uint16_t opc, 
1611:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                 uint16_t ofc, 
1612:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                 PTP_ObjectPropDescTypeDef *opd)
1613:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3772              		.loc 1 1613 0
 3773              		.cfi_startproc
 3774              		@ args = 0, pretend = 0, frame = 40
 3775              		@ frame_needed = 0, uses_anonymous_args = 0
 3776              	.LVL394:
 3777 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3778              	.LCFI66:
 3779              		.cfi_def_cfa_offset 20
 3780              		.cfi_offset 4, -20
 3781              		.cfi_offset 5, -16
 3782              		.cfi_offset 6, -12
 3783              		.cfi_offset 7, -8
 3784              		.cfi_offset 14, -4
ARM GAS  /tmp/ccSoqm0V.s 			page 100


 3785 0002 8BB0     		sub	sp, sp, #44
 3786              	.LCFI67:
 3787              		.cfi_def_cfa_offset 64
 3788 0004 0646     		mov	r6, r0
 3789 0006 1F46     		mov	r7, r3
 3790              	.LVL395:
1614:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1615:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3791              		.loc 1 1615 0
 3792 0008 D0F84435 		ldr	r3, [r0, #1348]
 3793              	.LVL396:
 3794 000c DC69     		ldr	r4, [r3, #28]
 3795              	.LVL397:
1616:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1617:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1618:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 3796              		.loc 1 1618 0
 3797 000e 41F66153 		movw	r3, #7521
 3798 0012 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 3799 0014 012B     		cmp	r3, #1
 3800 0016 02D0     		beq	.L187
 3801 0018 022B     		cmp	r3, #2
 3802 001a 32D0     		beq	.L188
 3803 001c 3DE0     		b	.L190
 3804              	.L187:
1619:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1620:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1621:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1622:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1623:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 3805              		.loc 1 1623 0
 3806 001e 0227     		movs	r7, #2
 3807              	.LVL398:
 3808 0020 42F2AC13 		movw	r3, #8620
 3809 0024 E750     		str	r7, [r4, r3]
1624:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 3810              		.loc 1 1624 0
 3811 0026 04F5EC53 		add	r3, r4, #7552
 3812 002a 0433     		adds	r3, r3, #4
 3813 002c 42F2B010 		movw	r0, #8624
 3814              	.LVL399:
 3815 0030 2350     		str	r3, [r4, r0]
1625:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 3816              		.loc 1 1625 0
 3817 0032 0023     		movs	r3, #0
 3818 0034 42F2B410 		movw	r0, #8628
 3819 0038 2350     		str	r3, [r4, r0]
1626:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 3820              		.loc 1 1626 0
 3821 003a 04F50750 		add	r0, r4, #8640
 3822 003e 0360     		str	r3, [r0]
1627:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 3823              		.loc 1 1627 0
 3824 0040 42F2B810 		movw	r0, #8632
 3825 0044 2350     		str	r3, [r4, r0]
1628:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1629:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
ARM GAS  /tmp/ccSoqm0V.s 			page 101


1630:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetObjectPropDesc;
 3826              		.loc 1 1630 0
 3827 0046 49F60203 		movw	r3, #38914
 3828 004a ADF80430 		strh	r3, [sp, #4]	@ movhi
1631:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3829              		.loc 1 1631 0
 3830 004e 42F2A813 		movw	r3, #8616
 3831 0052 E358     		ldr	r3, [r4, r3]
 3832 0054 0293     		str	r3, [sp, #8]
1632:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3833              		.loc 1 1632 0
 3834 0056 42F2A410 		movw	r0, #8612
 3835 005a 2358     		ldr	r3, [r4, r0]
 3836 005c 5D1C     		adds	r5, r3, #1
 3837 005e 2550     		str	r5, [r4, r0]
 3838 0060 0393     		str	r3, [sp, #12]
1633:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = opc;  
 3839              		.loc 1 1633 0
 3840 0062 0491     		str	r1, [sp, #16]
1634:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param2 = ofc;      
 3841              		.loc 1 1634 0
 3842 0064 0592     		str	r2, [sp, #20]
1635:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 2;
 3843              		.loc 1 1635 0
 3844 0066 8DF82470 		strb	r7, [sp, #36]
1636:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1637:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1638:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 3845              		.loc 1 1638 0
 3846 006a 01A9     		add	r1, sp, #4
 3847              	.LVL400:
 3848 006c 3046     		mov	r0, r6
 3849 006e FFF7FEFF 		bl	USBH_PTP_SendRequest
 3850              	.LVL401:
1639:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1640:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1641:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3851              		.loc 1 1641 0
 3852 0072 04F5EB53 		add	r3, r4, #7520
 3853 0076 0125     		movs	r5, #1
 3854 0078 1D70     		strb	r5, [r3]
1642:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 3855              		.loc 1 1642 0
 3856 007a 41F66153 		movw	r3, #7521
 3857 007e E754     		strb	r7, [r4, r3]
1643:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1644:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1645:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1646:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1647:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 3858              		.loc 1 1647 0
 3859 0080 0CE0     		b	.L186
 3860              	.LVL402:
 3861              	.L188:
1648:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1649:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1650:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
ARM GAS  /tmp/ccSoqm0V.s 			page 102


 3862              		.loc 1 1650 0
 3863 0082 FFF7FEFF 		bl	USBH_PTP_Process
 3864              	.LVL403:
1651:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1652:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 3865              		.loc 1 1652 0
 3866 0086 0546     		mov	r5, r0
 3867 0088 40B9     		cbnz	r0, .L186
1653:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1654:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****      PTP_GetObjectPropDesc(phost, opd, MTP_Handle->ptp.data_length);
 3868              		.loc 1 1654 0
 3869 008a 42F2B413 		movw	r3, #8628
 3870 008e E258     		ldr	r2, [r4, r3]
 3871 0090 3946     		mov	r1, r7
 3872 0092 3046     		mov	r0, r6
 3873              	.LVL404:
 3874 0094 FFF7FEFF 		bl	PTP_GetObjectPropDesc
 3875              	.LVL405:
 3876 0098 00E0     		b	.L186
 3877              	.LVL406:
 3878              	.L190:
1614:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3879              		.loc 1 1614 0
 3880 009a 0125     		movs	r5, #1
 3881              	.LVL407:
 3882              	.L186:
1655:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1656:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1657:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1658:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1659:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1660:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1661:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1662:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 3883              		.loc 1 1662 0
 3884 009c 2846     		mov	r0, r5
 3885 009e 0BB0     		add	sp, sp, #44
 3886              	.LCFI68:
 3887              		.cfi_def_cfa_offset 20
 3888              		@ sp needed
 3889 00a0 F0BD     		pop	{r4, r5, r6, r7, pc}
 3890              		.cfi_endproc
 3891              	.LFE151:
 3893 00a2 00BF     		.section	.text.USBH_PTP_GetObjectPropList,"ax",%progbits
 3894              		.align	2
 3895              		.global	USBH_PTP_GetObjectPropList
 3896              		.thumb
 3897              		.thumb_func
 3899              	USBH_PTP_GetObjectPropList:
 3900              	.LFB152:
1663:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                  
1664:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1665:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_GetObjectPropList
1666:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Gets object partially
1667:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1668:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1669:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
ARM GAS  /tmp/ccSoqm0V.s 			page 103


1670:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1671:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_GetObjectPropList (USBH_HandleTypeDef *phost,
1672:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                 uint32_t handle, 
1673:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                 MTP_PropertiesTypedef *pprops, 
1674:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                                 uint32_t *nrofprops)
1675:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 3901              		.loc 1 1675 0
 3902              		.cfi_startproc
 3903              		@ args = 0, pretend = 0, frame = 40
 3904              		@ frame_needed = 0, uses_anonymous_args = 0
 3905              	.LVL408:
 3906 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3907              	.LCFI69:
 3908              		.cfi_def_cfa_offset 24
 3909              		.cfi_offset 4, -24
 3910              		.cfi_offset 5, -20
 3911              		.cfi_offset 6, -16
 3912              		.cfi_offset 7, -12
 3913              		.cfi_offset 8, -8
 3914              		.cfi_offset 14, -4
 3915 0004 8AB0     		sub	sp, sp, #40
 3916              	.LCFI70:
 3917              		.cfi_def_cfa_offset 64
 3918 0006 0646     		mov	r6, r0
 3919              	.LVL409:
1676:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1677:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 3920              		.loc 1 1677 0
 3921 0008 D0F84435 		ldr	r3, [r0, #1348]
 3922              	.LVL410:
 3923 000c DC69     		ldr	r4, [r3, #28]
 3924              	.LVL411:
1678:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1679:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1680:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 3925              		.loc 1 1680 0
 3926 000e 41F66153 		movw	r3, #7521
 3927 0012 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 3928 0014 012B     		cmp	r3, #1
 3929 0016 03D0     		beq	.L194
 3930 0018 9046     		mov	r8, r2
 3931 001a 022B     		cmp	r3, #2
 3932 001c 46D0     		beq	.L195
 3933 001e 51E0     		b	.L197
 3934              	.L194:
 3935 0020 0F46     		mov	r7, r1
1681:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1682:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1683:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1684:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1685:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_GETDATA;
 3936              		.loc 1 1685 0
 3937 0022 4FF00208 		mov	r8, #2
 3938 0026 42F2AC13 		movw	r3, #8620
 3939 002a 44F80380 		str	r8, [r4, r3]
1686:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 3940              		.loc 1 1686 0
ARM GAS  /tmp/ccSoqm0V.s 			page 104


 3941 002e 04F5EC53 		add	r3, r4, #7552
 3942 0032 0433     		adds	r3, r3, #4
 3943 0034 42F2B012 		movw	r2, #8624
 3944              	.LVL412:
 3945 0038 A350     		str	r3, [r4, r2]
1687:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = 0;
 3946              		.loc 1 1687 0
 3947 003a 0025     		movs	r5, #0
 3948 003c 42F2B413 		movw	r3, #8628
 3949 0040 E550     		str	r5, [r4, r3]
1688:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 3950              		.loc 1 1688 0
 3951 0042 04F50753 		add	r3, r4, #8640
 3952 0046 1D60     		str	r5, [r3]
1689:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 3953              		.loc 1 1689 0
 3954 0048 42F2B813 		movw	r3, #8632
 3955 004c E550     		str	r5, [r4, r3]
1690:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****    
1691:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* copy first packet of the object into data container */
1692:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_memcpy(MTP_Handle->ptp.data_container.payload.data, MTP_Handle->ptp.object_ptr, PTP_USB_BU
 3956              		.loc 1 1692 0
 3957 004e 4FF47D72 		mov	r2, #1012
 3958 0052 42F2C413 		movw	r3, #8644
 3959 0056 E158     		ldr	r1, [r4, r3]
 3960              	.LVL413:
 3961 0058 04F5EC50 		add	r0, r4, #7552
 3962              	.LVL414:
 3963 005c 1030     		adds	r0, r0, #16
 3964 005e FFF7FEFF 		bl	memcpy
 3965              	.LVL415:
1693:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****        
1694:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1695:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_GetObjPropList;
 3966              		.loc 1 1695 0
 3967 0062 49F60503 		movw	r3, #38917
 3968 0066 ADF80430 		strh	r3, [sp, #4]	@ movhi
1696:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 3969              		.loc 1 1696 0
 3970 006a 42F2A813 		movw	r3, #8616
 3971 006e E358     		ldr	r3, [r4, r3]
 3972 0070 0293     		str	r3, [sp, #8]
1697:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 3973              		.loc 1 1697 0
 3974 0072 42F2A412 		movw	r2, #8612
 3975 0076 A358     		ldr	r3, [r4, r2]
 3976 0078 591C     		adds	r1, r3, #1
 3977 007a A150     		str	r1, [r4, r2]
 3978 007c 0393     		str	r3, [sp, #12]
1698:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param1 = handle;  
 3979              		.loc 1 1698 0
 3980 007e 0497     		str	r7, [sp, #16]
1699:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param2 = 0x00000000U;  /* 0x00000000U should be "all formats" */
 3981              		.loc 1 1699 0
 3982 0080 0595     		str	r5, [sp, #20]
1700:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param3 = 0xFFFFFFFFU;  /* 0xFFFFFFFFU should be "all properties" */
 3983              		.loc 1 1700 0
ARM GAS  /tmp/ccSoqm0V.s 			page 105


 3984 0082 4FF0FF33 		mov	r3, #-1
 3985 0086 0693     		str	r3, [sp, #24]
1701:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param4 = 0x00000000U;
 3986              		.loc 1 1701 0
 3987 0088 0795     		str	r5, [sp, #28]
1702:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Param5 = 0xFFFFFFFFU;  /* Return full tree below the Param1 handle */
 3988              		.loc 1 1702 0
 3989 008a 0893     		str	r3, [sp, #32]
1703:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 5;  
 3990              		.loc 1 1703 0
 3991 008c 0523     		movs	r3, #5
 3992 008e 8DF82430 		strb	r3, [sp, #36]
1704:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1705:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1706:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 3993              		.loc 1 1706 0
 3994 0092 01A9     		add	r1, sp, #4
 3995 0094 3046     		mov	r0, r6
 3996 0096 FFF7FEFF 		bl	USBH_PTP_SendRequest
 3997              	.LVL416:
1707:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1708:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1709:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 3998              		.loc 1 1709 0
 3999 009a 04F5EB53 		add	r3, r4, #7520
 4000 009e 0125     		movs	r5, #1
 4001 00a0 1D70     		strb	r5, [r3]
1710:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 4002              		.loc 1 1710 0
 4003 00a2 41F66153 		movw	r3, #7521
 4004 00a6 04F80380 		strb	r8, [r4, r3]
1711:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY;
1712:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1713:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
1714:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1715:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 4005              		.loc 1 1715 0
 4006 00aa 0CE0     		b	.L193
 4007              	.LVL417:
 4008              	.L195:
1716:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1717:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1718:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 4009              		.loc 1 1718 0
 4010 00ac FFF7FEFF 		bl	USBH_PTP_Process
 4011              	.LVL418:
1719:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1720:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     if(status == USBH_OK)
 4012              		.loc 1 1720 0
 4013 00b0 0546     		mov	r5, r0
 4014 00b2 40B9     		cbnz	r0, .L193
1721:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     {
1722:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****       PTP_GetObjectPropList (phost, pprops,  MTP_Handle->ptp.data_length);
 4015              		.loc 1 1722 0
 4016 00b4 42F2B413 		movw	r3, #8628
 4017 00b8 E258     		ldr	r2, [r4, r3]
 4018 00ba 4146     		mov	r1, r8
ARM GAS  /tmp/ccSoqm0V.s 			page 106


 4019 00bc 3046     		mov	r0, r6
 4020              	.LVL419:
 4021 00be FFF7FEFF 		bl	PTP_GetObjectPropList
 4022              	.LVL420:
 4023 00c2 00E0     		b	.L193
 4024              	.LVL421:
 4025              	.L197:
1676:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 4026              		.loc 1 1676 0
 4027 00c4 0125     		movs	r5, #1
 4028              	.LVL422:
 4029              	.L193:
1723:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     }
1724:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1725:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1726:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1727:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1728:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1729:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1730:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }
 4030              		.loc 1 1730 0
 4031 00c6 2846     		mov	r0, r5
 4032 00c8 0AB0     		add	sp, sp, #40
 4033              	.LCFI71:
 4034              		.cfi_def_cfa_offset 24
 4035              		@ sp needed
 4036 00ca BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4037              		.cfi_endproc
 4038              	.LFE152:
 4040 00ce 00BF     		.section	.text.USBH_PTP_SendObject,"ax",%progbits
 4041              		.align	2
 4042              		.global	USBH_PTP_SendObject
 4043              		.thumb
 4044              		.thumb_func
 4046              	USBH_PTP_SendObject:
 4047              	.LFB153:
1731:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                
1732:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** /**
1733:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @brief  USBH_PTP_SendObject
1734:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   *         Send an object
1735:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  phost: Host handle
1736:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @param  dev_info: Device info structure
1737:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   * @retval USBH Status
1738:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   */
1739:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** USBH_StatusTypeDef USBH_PTP_SendObject (USBH_HandleTypeDef *phost, 
1740:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t handle, 
1741:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint8_t *object,
1742:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****                                            uint32_t size)
1743:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** {
 4048              		.loc 1 1743 0
 4049              		.cfi_startproc
 4050              		@ args = 0, pretend = 0, frame = 40
 4051              		@ frame_needed = 0, uses_anonymous_args = 0
 4052              	.LVL423:
 4053 0000 70B5     		push	{r4, r5, r6, lr}
 4054              	.LCFI72:
 4055              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccSoqm0V.s 			page 107


 4056              		.cfi_offset 4, -16
 4057              		.cfi_offset 5, -12
 4058              		.cfi_offset 6, -8
 4059              		.cfi_offset 14, -4
 4060 0002 8AB0     		sub	sp, sp, #40
 4061              	.LCFI73:
 4062              		.cfi_def_cfa_offset 56
 4063              	.LVL424:
1744:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   USBH_StatusTypeDef   status = USBH_BUSY; 
1745:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 4064              		.loc 1 1745 0
 4065 0004 D0F84415 		ldr	r1, [r0, #1348]
 4066              	.LVL425:
 4067 0008 CC69     		ldr	r4, [r1, #28]
 4068              	.LVL426:
1746:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   PTP_ContainerTypedef  ptp_container;
1747:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   
1748:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   switch(MTP_Handle->ptp.req_state)
 4069              		.loc 1 1748 0
 4070 000a 41F66151 		movw	r1, #7521
 4071 000e 615C     		ldrb	r1, [r4, r1]	@ zero_extendqisi2
 4072 0010 0129     		cmp	r1, #1
 4073 0012 02D0     		beq	.L201
 4074 0014 0229     		cmp	r1, #2
 4075 0016 36D0     		beq	.L202
 4076 0018 38E0     		b	.L204
 4077              	.L201:
1749:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   {
1750:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_SEND:
1751:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1752:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Set operation request type */
1753:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.flags = PTP_DP_SENDDATA;
 4078              		.loc 1 1753 0
 4079 001a 0125     		movs	r5, #1
 4080 001c 42F2AC11 		movw	r1, #8620
 4081 0020 6550     		str	r5, [r4, r1]
1754:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_ptr = (uint8_t *)&(MTP_Handle->ptp.data_container);
 4082              		.loc 1 1754 0
 4083 0022 04F5EC51 		add	r1, r4, #7552
 4084 0026 0431     		adds	r1, r1, #4
 4085 0028 42F2B016 		movw	r6, #8624
 4086 002c A151     		str	r1, [r4, r6]
1755:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet_counter = 0;
 4087              		.loc 1 1755 0
 4088 002e 04F50756 		add	r6, r4, #8640
 4089 0032 0021     		movs	r1, #0
 4090 0034 3160     		str	r1, [r6]
1756:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_packet = 0;
 4091              		.loc 1 1756 0
 4092 0036 42F2B816 		movw	r6, #8632
 4093 003a A151     		str	r1, [r4, r6]
1757:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.iteration = 0;
 4094              		.loc 1 1757 0
 4095 003c 42F2BC16 		movw	r6, #8636
 4096 0040 A151     		str	r1, [r4, r6]
1758:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1759:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* set object control params */
ARM GAS  /tmp/ccSoqm0V.s 			page 108


1760:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.object_ptr = object;
 4097              		.loc 1 1760 0
 4098 0042 42F2C416 		movw	r6, #8644
 4099 0046 A251     		str	r2, [r4, r6]
1761:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.data_length = size;    
 4100              		.loc 1 1761 0
 4101 0048 42F2B412 		movw	r2, #8628
 4102              	.LVL427:
 4103 004c A350     		str	r3, [r4, r2]
1762:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1763:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Fill operation request params */      
1764:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Code = PTP_OC_SendObject;
 4104              		.loc 1 1764 0
 4105 004e 41F20D03 		movw	r3, #4109
 4106              	.LVL428:
 4107 0052 ADF80430 		strh	r3, [sp, #4]	@ movhi
1765:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.SessionID = MTP_Handle->ptp.session_id;
 4108              		.loc 1 1765 0
 4109 0056 42F2A813 		movw	r3, #8616
 4110 005a E358     		ldr	r3, [r4, r3]
 4111 005c 0293     		str	r3, [sp, #8]
1766:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Transaction_ID = MTP_Handle->ptp.transaction_id ++;
 4112              		.loc 1 1766 0
 4113 005e 42F2A412 		movw	r2, #8612
 4114              	.LVL429:
 4115 0062 A358     		ldr	r3, [r4, r2]
 4116 0064 5E19     		adds	r6, r3, r5
 4117              	.LVL430:
 4118 0066 A650     		str	r6, [r4, r2]
 4119 0068 0393     		str	r3, [sp, #12]
1767:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     ptp_container.Nparam = 0;
 4120              		.loc 1 1767 0
 4121 006a 8DF82410 		strb	r1, [sp, #36]
1768:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** 
1769:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1770:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* convert request packet into USB raw packet*/
1771:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     USBH_PTP_SendRequest (phost, &ptp_container); 
 4122              		.loc 1 1771 0
 4123 006e 01A9     		add	r1, sp, #4
 4124 0070 FFF7FEFF 		bl	USBH_PTP_SendRequest
 4125              	.LVL431:
1772:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****         
1773:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     /* Setup State machine and start transfer */
1774:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.state = PTP_OP_REQUEST_STATE;
 4126              		.loc 1 1774 0
 4127 0074 04F5EB53 		add	r3, r4, #7520
 4128 0078 1D70     		strb	r5, [r3]
1775:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     MTP_Handle->ptp.req_state = PTP_REQ_WAIT;
 4129              		.loc 1 1775 0
 4130 007a 0222     		movs	r2, #2
 4131 007c 41F66153 		movw	r3, #7521
 4132 0080 E254     		strb	r2, [r4, r3]
1776:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_BUSY; 
 4133              		.loc 1 1776 0
 4134 0082 2846     		mov	r0, r5
1777:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #if (USBH_USE_OS == 1)
1778:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     osMessagePut ( phost->os_event, USBH_STATE_CHANGED_EVENT, 0);
ARM GAS  /tmp/ccSoqm0V.s 			page 109


1779:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** #endif      
1780:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 4135              		.loc 1 1780 0
 4136 0084 03E0     		b	.L200
 4137              	.LVL432:
 4138              	.L202:
1781:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1782:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   case PTP_REQ_WAIT:
1783:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     status = USBH_PTP_Process(phost);
 4139              		.loc 1 1783 0
 4140 0086 FFF7FEFF 		bl	USBH_PTP_Process
 4141              	.LVL433:
1784:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
 4142              		.loc 1 1784 0
 4143 008a 00E0     		b	.L200
 4144              	.LVL434:
 4145              	.L204:
1744:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   MTP_HandleTypeDef    *MTP_Handle =  (MTP_HandleTypeDef *)phost->pActiveClass->pData; 
 4146              		.loc 1 1744 0
 4147 008c 0120     		movs	r0, #1
 4148              	.LVL435:
 4149              	.L200:
1785:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     
1786:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   default:
1787:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****     break;
1788:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   }
1789:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c ****   return status;
1790:Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp_ptp.c **** }               
 4150              		.loc 1 1790 0
 4151 008e 0AB0     		add	sp, sp, #40
 4152              	.LCFI74:
 4153              		.cfi_def_cfa_offset 16
 4154              		@ sp needed
 4155 0090 70BD     		pop	{r4, r5, r6, pc}
 4156              		.cfi_endproc
 4157              	.LFE153:
 4159 0092 00BF     		.text
 4160              	.Letext0:
 4161              		.file 2 "/home/ada/Downloads/gcc-arm-none-eabi-5_4-2016q3/arm-none-eabi/include/machine/_default_t
 4162              		.file 3 "/home/ada/Downloads/gcc-arm-none-eabi-5_4-2016q3/arm-none-eabi/include/sys/_stdint.h"
 4163              		.file 4 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 4164              		.file 5 "Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Inc/usbh_mtp_ptp.h"
 4165              		.file 6 "Middlewares/ST/STM32_USB_Host_Library/Class/MTP/Inc/usbh_mtp.h"
 4166              		.file 7 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_ioreq.h"
 4167              		.file 8 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_core.h"
 4168              		.file 9 "Drivers/CMSIS/Include/core_cm4.h"
ARM GAS  /tmp/ccSoqm0V.s 			page 110


DEFINED SYMBOLS
                            *ABS*:00000000 usbh_mtp_ptp.c
     /tmp/ccSoqm0V.s:22     .text.PTP_GetString:00000000 $t
     /tmp/ccSoqm0V.s:26     .text.PTP_GetString:00000000 PTP_GetString
     /tmp/ccSoqm0V.s:80     .text.PTP_GetStorageInfo:00000000 $t
     /tmp/ccSoqm0V.s:84     .text.PTP_GetStorageInfo:00000000 PTP_GetStorageInfo
     /tmp/ccSoqm0V.s:260    .text.PTP_GetObjectInfo:00000000 $t
     /tmp/ccSoqm0V.s:264    .text.PTP_GetObjectInfo:00000000 PTP_GetObjectInfo
     /tmp/ccSoqm0V.s:453    .text.PTP_GetDevicePropValue:00000000 $t
     /tmp/ccSoqm0V.s:457    .text.PTP_GetDevicePropValue:00000000 PTP_GetDevicePropValue
     /tmp/ccSoqm0V.s:799    .text.PTP_GetObjectPropDesc:00000000 $t
     /tmp/ccSoqm0V.s:803    .text.PTP_GetObjectPropDesc:00000000 PTP_GetObjectPropDesc
     /tmp/ccSoqm0V.s:967    .text.PTP_GetObjectPropList:00000000 $t
     /tmp/ccSoqm0V.s:971    .text.PTP_GetObjectPropList:00000000 PTP_GetObjectPropList
     /tmp/ccSoqm0V.s:1111   .text.PTP_GetArray16:00000000 $t
     /tmp/ccSoqm0V.s:1115   .text.PTP_GetArray16:00000000 PTP_GetArray16
     /tmp/ccSoqm0V.s:1178   .text.PTP_DecodeDeviceInfo:00000000 $t
     /tmp/ccSoqm0V.s:1182   .text.PTP_DecodeDeviceInfo:00000000 PTP_DecodeDeviceInfo
     /tmp/ccSoqm0V.s:1382   .text.PTP_GetArray32:00000000 $t
     /tmp/ccSoqm0V.s:1386   .text.PTP_GetArray32:00000000 PTP_GetArray32
     /tmp/ccSoqm0V.s:1449   .text.PTP_GetStorageIDs:00000000 $t
     /tmp/ccSoqm0V.s:1453   .text.PTP_GetStorageIDs:00000000 PTP_GetStorageIDs
     /tmp/ccSoqm0V.s:1485   .text.PTP_BufferFullCallback:00000000 $t
     /tmp/ccSoqm0V.s:1489   .text.PTP_BufferFullCallback:00000000 PTP_BufferFullCallback
     /tmp/ccSoqm0V.s:1516   .text.PTP_BufferFullCallback:0000001c $d
     /tmp/ccSoqm0V.s:1590   .text.USBH_PTP_Init:00000000 $t
     /tmp/ccSoqm0V.s:1595   .text.USBH_PTP_Init:00000000 USBH_PTP_Init
     /tmp/ccSoqm0V.s:1622   .text.USBH_PTP_SendRequest:00000000 $t
     /tmp/ccSoqm0V.s:1627   .text.USBH_PTP_SendRequest:00000000 USBH_PTP_SendRequest
     /tmp/ccSoqm0V.s:1701   .text.USBH_PTP_GetResponse:00000000 $t
     /tmp/ccSoqm0V.s:1706   .text.USBH_PTP_GetResponse:00000000 USBH_PTP_GetResponse
     /tmp/ccSoqm0V.s:1759   .text.USBH_PTP_Process:00000000 $t
     /tmp/ccSoqm0V.s:1764   .text.USBH_PTP_Process:00000000 USBH_PTP_Process
     /tmp/ccSoqm0V.s:1795   .text.USBH_PTP_Process:0000001e $d
     /tmp/ccSoqm0V.s:1804   .text.USBH_PTP_Process:00000030 $t
     /tmp/ccSoqm0V.s:2295   .text.USBH_PTP_OpenSession:00000000 $t
     /tmp/ccSoqm0V.s:2300   .text.USBH_PTP_OpenSession:00000000 USBH_PTP_OpenSession
     /tmp/ccSoqm0V.s:2391   .text.USBH_PTP_GetDevicePropDesc:00000000 $t
     /tmp/ccSoqm0V.s:2396   .text.USBH_PTP_GetDevicePropDesc:00000000 USBH_PTP_GetDevicePropDesc
     /tmp/ccSoqm0V.s:2528   .text.USBH_PTP_GetDeviceInfo:00000000 $t
     /tmp/ccSoqm0V.s:2533   .text.USBH_PTP_GetDeviceInfo:00000000 USBH_PTP_GetDeviceInfo
     /tmp/ccSoqm0V.s:2652   .text.USBH_PTP_GetStorageIds:00000000 $t
     /tmp/ccSoqm0V.s:2657   .text.USBH_PTP_GetStorageIds:00000000 USBH_PTP_GetStorageIds
     /tmp/ccSoqm0V.s:2776   .text.USBH_PTP_GetStorageInfo:00000000 $t
     /tmp/ccSoqm0V.s:2781   .text.USBH_PTP_GetStorageInfo:00000000 USBH_PTP_GetStorageInfo
     /tmp/ccSoqm0V.s:2905   .text.USBH_PTP_GetNumObjects:00000000 $t
     /tmp/ccSoqm0V.s:2910   .text.USBH_PTP_GetNumObjects:00000000 USBH_PTP_GetNumObjects
     /tmp/ccSoqm0V.s:3015   .text.USBH_PTP_GetObjectHandles:00000000 $t
     /tmp/ccSoqm0V.s:3020   .text.USBH_PTP_GetObjectHandles:00000000 USBH_PTP_GetObjectHandles
     /tmp/ccSoqm0V.s:3145   .text.USBH_PTP_GetObjectInfo:00000000 $t
     /tmp/ccSoqm0V.s:3150   .text.USBH_PTP_GetObjectInfo:00000000 USBH_PTP_GetObjectInfo
     /tmp/ccSoqm0V.s:3273   .text.USBH_PTP_DeleteObject:00000000 $t
     /tmp/ccSoqm0V.s:3278   .text.USBH_PTP_DeleteObject:00000000 USBH_PTP_DeleteObject
     /tmp/ccSoqm0V.s:3370   .text.USBH_PTP_GetObject:00000000 $t
     /tmp/ccSoqm0V.s:3375   .text.USBH_PTP_GetObject:00000000 USBH_PTP_GetObject
     /tmp/ccSoqm0V.s:3499   .text.USBH_PTP_GetPartialObject:00000000 $t
     /tmp/ccSoqm0V.s:3504   .text.USBH_PTP_GetPartialObject:00000000 USBH_PTP_GetPartialObject
ARM GAS  /tmp/ccSoqm0V.s 			page 111


     /tmp/ccSoqm0V.s:3639   .text.USBH_PTP_GetObjectPropsSupported:00000000 $t
     /tmp/ccSoqm0V.s:3644   .text.USBH_PTP_GetObjectPropsSupported:00000000 USBH_PTP_GetObjectPropsSupported
     /tmp/ccSoqm0V.s:3765   .text.USBH_PTP_GetObjectPropDesc:00000000 $t
     /tmp/ccSoqm0V.s:3770   .text.USBH_PTP_GetObjectPropDesc:00000000 USBH_PTP_GetObjectPropDesc
     /tmp/ccSoqm0V.s:3894   .text.USBH_PTP_GetObjectPropList:00000000 $t
     /tmp/ccSoqm0V.s:3899   .text.USBH_PTP_GetObjectPropList:00000000 USBH_PTP_GetObjectPropList
     /tmp/ccSoqm0V.s:4041   .text.USBH_PTP_SendObject:00000000 $t
     /tmp/ccSoqm0V.s:4046   .text.USBH_PTP_SendObject:00000000 USBH_PTP_SendObject
                     .debug_frame:00000010 $d
     /tmp/ccSoqm0V.s:1543   .text.PTP_BufferFullCallback:00000037 $d
     /tmp/ccSoqm0V.s:1543   .text.PTP_BufferFullCallback:00000038 $t

UNDEFINED SYMBOLS
memcpy
memset
USBH_BulkSendData
USBH_LL_GetURBState
USBH_BulkReceiveData
USBH_LL_GetLastXferSize
